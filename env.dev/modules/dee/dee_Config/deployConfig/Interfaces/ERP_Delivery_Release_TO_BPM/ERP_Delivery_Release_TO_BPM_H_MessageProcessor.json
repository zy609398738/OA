{
  "normal": [
    {
      "xaTransaction": "",
      "transaction": "",
      "parentId": "8aaae0c55d102b6f015d104b72350007",
      "smallType": "VM",
      "description": "接收查询发货通知信息参数",
      "id": "8aaae0c55d102b6f015d104d34180011",
      "pollingFrequency": 600000,
      "simpleMpLog": "false",
      "bigType": "inbound",
      "isRef": "false",
      "enable": "true",
      "text": "接收查询发货通知信息参数",
      "queryKey": "8aaae0c55d102b6f015d106c516b0016",
      "exchange_pattern": "request-response",
      "address": "vm://ERP_Delivery_Release_H_TO_BPM",
      "encoding": "UTF-8",
      "connector_ref": "8aaae0c55d102b6f015d106a9e430015",
      "className": ""
    },
    {
      "ignoreSQLError": "false",
      "text": "查询发货通知表头数据",
      "description": "查询发货通知表头数据",
      "scriptContent": "Map logmap = message.getInboundProperty(\"logmap\");\nObject[] o = new Object[10];\no[0] = logmap.get(\"DELIVERY_ID\");\nList < Map > data = dbop.select(\"select hou.name,t.delivery_id,t.order_type,t.cust_name,t.sales_no,t.tran_name,t.org_id,t.currency,t.packing_instructions,t.om_employee_num,t.attribute3,t.attribute17,t.tp_attribute1,t.tp_attribute2 from CUX.EFLOW_INTERFACE_DELIVERY_MAIN t, HR_OPERATING_UNITS HOU WHERE T.ORG_ID = HOU.organization_id  and DELIVERY_ID = ?\", message);\nreturn data;",
      "smallType": "ExecuteSQLSimpleTransformer",
      "className": "com.bokesoft.dee.transport.jdbc.transformer.ExecuteSQLSimpleTransformer",
      "enable": "true",
      "parentId": "8aaae0c55d102b6f015d104b72350007",
      "queries": "[{\"value\":\"select hou.name,t.delivery_id,t.order_type,t.cust_name,t.sales_no,t.tran_name,t.org_id,t.currency,t.packing_instructions,t.om_employee_num,t.attribute3,t.attribute17,t.tp_attribute1,t.tp_attribute2 from CUX.EFLOW_INTERFACE_DELIVERY_MAIN t, HR_OPERATING_UNITS HOU WHERE T.ORG_ID = HOU.organization_id  and DELIVERY_ID = #[map-payload:delivery_id]\"}]",
      "bigType": "transformer_au",
      "simpleMpLog": "false",
      "ds": "8aaae09b5bf03e9f015bf17bc58e061f",
      "isRef": "false",
      "id": "8aaae0c55d102b6f015d1212229e0034",
      "resultIndexOf": 1
    },
    {
      "text": "查询发货通知明细表数据",
      "description": "查询ERP系统发货通知明细表数据",
      "scriptContent": "List < Map > data = dbop.select(\"select HOU.name,T.* from CUX.EFLOW_INTERFACE_DELIVERY_MAIN t,HR_OPERATING_UNITS HOU WHERE T.ORG_ID = HOU.organization_id and DELIVERY_ID=#[map-payload:DELIVERY_ID] \", message);\nreturn data;",
      "tablePath": "B_DeliveryNotice",
      "smallType": "FieldValueLookUpWithDsTransformer",
      "className": "com.bokesoft.dee.mule.dataimport.FieldValueLookUpWithDsTransformer",
      "query": "select delivery_id,detail_id,seq,prod_name,prod_type,prod_unit,amount,warehouse_no,slot_no,contract_no,memo,attribute1,price from cux.eflow_delivery_details  where delivery_id=#[map-payload:delivery_id] order by detail_id",
      "firstRecode": "true",
      "enable": "true",
      "parentId": "8aaae0c55d102b6f015d104b72350007",
      "subField": "B_DeliveryNoticeDtl",
      "bigType": "transformer_au",
      "simpleMpLog": "false",
      "ds": "8aaae09b5bf03e9f015bf17bc58e061f",
      "isRef": "false",
      "id": "8aaae0c55d102b6f015d10566ab50013"
    },
    {
      "text": "查询发货通知附件表数据",
      "description": "查询ERP系统发货通知附件表数据",
      "tablePath": "B_DeliveryNotice",
      "query": "select delivery_id,docs_id,oe_order_number,file_name,url from apps.cux3_eflow_delivery_docs where delivery_id=#[map-payload:delivery_id] and oe_order_number=#[map-payload:sales_no] order by docs_id",
      "smallType": "FieldValueLookUpWithDsTransformer",
      "className": "com.bokesoft.dee.mule.dataimport.FieldValueLookUpWithDsTransformer",
      "subField": "B_DeliveryNoticeAtt",
      "firstRecode": "true",
      "enable": "true",
      "parentId": "8aaae0c55d102b6f015d104b72350007",
      "bigType": "transformer_au",
      "simpleMpLog": "false",
      "ds": "8aaae09b5bf03e9f015bf17bc58e061f",
      "isRef": "false",
      "id": "8aaae0c55d102b6f015d1073d42d001b"
    },
    {
      "dispatchInterface": "8aaae0c55d102b6f015d104b71d10006",
      "description": "循环分发单条数据",
      "useList": "true",
      "text": "循环分发单条数据",
      "className": "com.bokesoft.dee.mule.dispatch.transformer.DispatchVMTransformer",
      "smallType": "DispatchVMTransformer",
      "enable": "true",
      "parentId": "8aaae0c55d102b6f015d104b72350007",
      "bigType": "transformer_au",
      "simpleMpLog": "false",
      "dispatchService": "8aaae0c55d102b6f015d104b7355000c",
      "isRef": "false",
      "id": "8aaae0c55d102b6f015d10df93370022"
    }
  ],
  "exception": [
    {
      "text": "把异常对象转换为文本",
      "description": "把异常对象转换为文本",
      "smallType": "ExceptionMessageTransformer",
      "className": "com.bokesoft.exchange.transformer.ExceptionMessageTransformer",
      "enable": "true",
      "parentId": "8aaae0c55d102b6f015d104b72350007",
      "bigType": "GGPZTransformer",
      "isRef": "true",
      "id": "8aaae0c55d102b6f015d104b72530008"
    },
    {
      "path": "${bokedee.logpath.runtimeLog}/ERP_TO_BPM_Delivery_Release",
      "text": "记录错误日志到文件_ERP_TO_BPM_Delivery_Release_H",
      "description": "",
      "smallType": "File",
      "className": "",
      "enable": "true",
      "outputPattern": "#[function:datestamp:yyyyMMddHHmmss]-#[message:id].xml",
      "parentId": "8aaae0c55d102b6f015d104b72350007",
      "bigType": "outbound",
      "file_subdir": "#[context:serviceName]/#[function:datestamp:yyyyMMdd]",
      "isRef": "false",
      "id": "8aaae0c55d102b6f015d104b72950009"
    },
    {
      "text": "把异常信息替换换行符_ERP_TO_BPM_Delivery_Release_H",
      "description": "把异常信息替换换行符",
      "scriptContent": "String exceptionContent = message.getPayload();String exception = exceptionContent.replace(\"\\n\", \"<br/>\");message.setPayload(exception);return message;",
      "className": "org.mule.module.scripting.transformer.ScriptTransformer",
      "smallType": "GroovyScriptTransformer",
      "enable": "false",
      "parentId": "8aaae0c55d102b6f015d104b72350007",
      "bigType": "transformer_au",
      "simpleMpLog": "false",
      "isRef": "false",
      "id": "8aaae0c55d102b6f015d104b72d6000a"
    },
    {
      "text": "把异常信息通过邮件发送_ERP_TO_BPM_Delivery_Release_H",
      "description": "把异常信息通过邮件发送",
      "connector_ref": "bokedee_default_smtp_connector",
      "subject": "ERP_TO_BPM_Delivery_Release",
      "className": "",
      "smallType": "SMTP",
      "enable": "false",
      "parentId": "8aaae0c55d102b6f015d104b72350007",
      "bigType": "outbound",
      "encoding": "UTF-8",
      "isRef": "false",
      "id": "8aaae0c55d102b6f015d104b7320000b"
    }
  ]
}