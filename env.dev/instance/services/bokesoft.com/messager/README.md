# README

## 需求来源

### 四达"平台聊天功能"需求概要
 * PC 端
    1. 店铺要有子账号；
    2. 消息提醒功能（闪烁提醒）；
    3. 未读消息/已读消息；
    4. 发送链接可跳转；
    5. 店铺客服和平台客服沟通渠道（投诉模块相关联）；
    6. 隐身、在线、离开、繁忙；
    7. 黑名单（与平台黑名单一致）；
    8. 客户分类。
    9. 支持文字聊天、表情(只支持自带表情包) 和 图片;
    10. **PC端支持文件传输和图片文件上传;**
    11. 不支持与产品或订单等业务数据的关联显示;
    12. 操作界面方面如甲方有规定要求，须有甲方提供界面放置地点，如不提供的话，则按照项目组项目模板格式进行放置。
 * APP 端
    1. 店铺要有子账号；
    2. 消息提醒功能（闪烁提醒）；
    3. 未读消息/已读消息；
    4. 发送链接可跳转；
    5. 店铺客服和平台客服沟通渠道（投诉模块相关联）；
    6. 隐身、在线、离开、繁忙；
    7. 黑名单（与平台黑名单一致）；
    8. 客户分类。
    9. 支持文字聊天、表情(只支持自带表情包) 和 图片;
    10. **APP端支持拍照和图片上传;**
    11. 不支持与产品或订单等业务数据的关联显示;
    12. 操作界面方面如甲方有规定要求，须有甲方提供界面放置地点，如不提供的话，则按照项目组项目模板格式进行放置

## 基本框架
 1. 将 IM 作为一个独立的服务运行(不再是 ecomm-store 或者其他应用内置的一个部分);
 2. 以 `WebSocket` 作为 IM 消息传输的基本技术支持 ---- 支持服务器端向 IM 客户端的消息推送;
 3. 区分为客户端和服务器端两个部分:
  * 客户端:
      - Web(html/js/css): 基于 Webpack 模块化构建
      - 手机(iOS、Android); *<待完善>*
  * 服务器端: 基于 Java Web 技术体系, 采用 Jetty 作为服务器框架的可独立运行的 Java Application;

## 集成方式设计
IM 负责提供基本的客户端、消息传递机制, 以及消息数据的存储, 在实际使用时, 需要在多个层次与 "主系统" 进行集成.

### 客户端引入
"客户端引入" 指的是将 IM 的客户端界面加入到"主系统"中, 与主系统的消息提醒、消息发送等几个操作节点集成在一起.

#### Web 客户端
- 引入 `/client-browser/project/main/dist/bundle.bokesoft-messager.js`:
   * 注意: 此 js 文件必须部署在 **固定的 Web 路径** `/bokesoft-messager/dist/` 下; 如果需要改变这个路径, 需要修改 `/client-browser/project/main/webpack.config.js` 中的配置项 `publicPath` 并重新使用 webpack 打包;

#### iOS 客户端
*<待完善>*
#### Android 客户端
*<待完善>*

### 服务端集成


## 开发指南
### 构建和运行
