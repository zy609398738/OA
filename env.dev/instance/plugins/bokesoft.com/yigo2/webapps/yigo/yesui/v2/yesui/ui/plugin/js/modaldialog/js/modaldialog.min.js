(function(a){a.fn.extend({modalDialog:function(c,l){if(a(".dialog.error").length>0){return}if(a(".dialog").length>0){a("#"+a(".dialog").attr("id")+"_mask").remove();a(".dialog").remove()}if(typeof(l)=="undefined"){l={}}var f={width:525,height:100};var e=a.extend(f,l);var h=this.get(0);a(h).addClass("dialog").html("<div class='dialog-header'><div class='dialog-title'></div><div class='dialog-close'></div></div><div class='dialog-content'><div class='dialog-content-inner' /><div class='dialog-button-container'><input type='button' class='dialog-button close' value='Close'/></div></div>");var k=document.createElement("div");a(k).addClass("dialog-mask").appendTo(a(document.body));var g=a(".dialog-mask").length;a(k).css("z-index",g*100).attr("id",h.id+"_mask");a(k).hide();a(h).hide();a(document.body).append(h);a(".dialog-close",h).click(this.close);a(".dialog-button.close",h).click(this.close);a(".dialog-title",h).html(e.title);a(h).css("width",e.width);a(h).css("height",e.height);a(".dialog-content-inner",h).html(c);a(h).fadeIn("slow");a(k).fadeIn("normal");var j=a(".dialog-button-container",h),b;if(e.showClose&&e.type=="error"){a(h).addClass("error");a(".dialog-content-inner",h).after(a("<div class='dialog-detail'></div>"));a(".close",j).before(a("<input type='button' class='dialog-button detail' value='Detail'/>"));a(".detail",j).click(function(){a(".dialog-detail",h).toggleClass("open").html(c);if(a(".dialog-detail",h).hasClass("open")){a(h).css("height",e.height+a(".dialog-detail",h).outerHeight())}else{a(h).css("height",e.height)}b=a(h).height()-a(".dialog-header",h).outerHeight();a(".dialog-content",h).css("height",b)});j.show()}else{j.remove()}b=a(h).height()-a(".dialog-header",h).outerHeight();a(".dialog-content",h).css("height",b);b-=j.height();a(".dialog-content-inner",h).css("height",b);var d=(a(window).width()/2-a(h).width()/2)+"px";var i=(a(window).height()/2-a(h).height()/2)+"px";a(h).css({left:d,top:i})},close:function(){var b=a(this);if(!b.hasClass("dialog")){b=a(this).parents(".dialog")}a("#"+b.attr("id")+"_mask").remove();b.remove()},dialogContent:function(){return a(".dialog-content-inner",this)}})})(jQuery);