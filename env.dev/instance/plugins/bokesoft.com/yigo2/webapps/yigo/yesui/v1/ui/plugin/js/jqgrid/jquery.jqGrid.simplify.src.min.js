(function(a){a.jgrid=a.jgrid||{};a.extend(a.jgrid,{version:"4.6.0",guid:1,uidPref:"jqg.sp_",msie:navigator.appName==="Microsoft Internet Explorer",msiever:function(){var d=-1;var b=navigator.userAgent;var c=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");if(c.exec(b)!=null){d=parseFloat(RegExp.$1)}return d},randId:function(b){return(b||a.jgrid.uidPref)+(a.jgrid.guid++)},jqID:function(b){return String(b).replace(/[!"#$%&'()*+,.\/:; <=>?@\[\\\]\^`{|}~]/g,"\\$&")},htmlDecode:function(b){if(b&&(b==="&nbsp;"||b==="&#160;"||(b.length===1&&b.charCodeAt(0)===160))){return""}return !b?b:String(b).replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&quot;/g,'"').replace(/&amp;/g,"&")},htmlEncode:function(b){return !b?b:String(b).replace(/&/g,"&amp;").replace(/\"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},format:function(c){var b=a.makeArray(arguments).slice(1);if(c==null){c=""}return c.replace(/\{(\d+)\}/g,function(d,e){return b[e]})},stripPref:function(b,d){var c=a.type(b);if(c==="string"||c==="number"){b=String(b);d=b!==""?String(d).replace(String(b),""):d}return d},stripHtml:function(b){b=String(b);var c=/<("[^"]*"|'[^']*'|[^'">])*>/gi;if(b){b=b.replace(c,"");return(b&&b!=="&nbsp;"&&b!=="&#160;")?b.replace(/\"/g,"'"):""}return b},getCellIndex:function(b){var d=a(b);if(d.is("tr")){return -1}d=(!d.is("td")&&!d.is("th")?d.closest("td,th"):d)[0];if(a.jgrid.msie){return a.inArray(d,d.parentNode.cells)}return d.cellIndex},getMethod:function(b){return this.getAccessor(a.fn.jqGrid,b)},extend:function(b){a.extend(a.fn.jqGrid,b);if(!this.no_legacy_api){a.fn.extend(b)}},getAccessor:function(j,h){var c,g,b=[],d;if(typeof h==="function"){return h(j)}c=j[h];if(c===undefined){try{if(typeof h==="string"){b=h.split(".")}d=b.length;if(d){c=j;while(c&&d--){g=b.shift();c=c[g]}}}catch(f){}}return c}});a.fn.jqGrid=function(c){if(typeof c==="string"){var d=a.jgrid.getMethod(c);if(!d){throw ("jqGrid - No such method: "+c)}var b=a.makeArray(arguments).slice(1);return d.apply(this,b)}return this.each(function(){if(this.grid){return}var P=a.extend(true,{height:150,page:1,rowNum:20,rowTotal:null,records:0,pager:"",pgbuttons:true,pginput:true,colModel:[],colNames:[],savedRow:[],selarrrow:[],reccount:0,lastpage:0,lastsort:0,selrow:null,beforeSelectRow:null,onSelectRow:null,ondblClickRow:null,onPaging:null,onInitGrid:null,loadComplete:null,gridComplete:null,afterInsertRow:null,onHeaderClick:null,onColumnHeaderClick:null,viewrecords:false,caption:"",hidegrid:true,hiddengrid:false,userData:{},gridstate:"visible",cellEdit:false,cellsubmit:"clientArray",nv:0,toolbar:[false,""],scroll:false,deselectAfterSort:true,scrollOffset:18,cellLayout:5,gridview:false,rownumWidth:40,rownumbers:false,pagerpos:"center",recordpos:"right",footerrow:false,userDataOnFooter:false,hoverrows:true,viewsortcols:[false,"vertical",true],resizeclass:"",remapColumns:[],direction:"ltr",toppager:false,headertitles:false,scrollTimeout:40,data:[],_index:{},cmTemplate:{},prmNames:{page:"page",rows:"rows",sort:"sidx",order:"sord",search:"_search",nd:"nd",id:"id",oper:"oper",editoper:"edit",addoper:"add",deloper:"del",subgridid:"id",npage:null,totalrows:"totalrows"},idPrefix:""},a.jgrid.defaults,c||{});var ac=this,O={headers:[],cols:[],footers:[],dragStart:function(w,p,ak){var aj=a(this.bDiv).offset().left;this.resizing={idx:w,startX:p.clientX,sOL:p.clientX-aj};this.hDiv.style.cursor="col-resize";this.curGbox=a("#rs_m"+a.jgrid.jqID(P.id),"#gbox_"+a.jgrid.jqID(P.id));this.curGbox.css({display:"block",left:p.clientX-aj,top:ak[1],height:ak[2]});a(ac).triggerHandler("jqGridResizeStart",[p,w]);if(a.isFunction(P.resizeStart)){P.resizeStart.call(ac,p,w)}document.onselectstart=function(){return false}},dragMove:function(i){if(this.resizing){var ak=i.clientX-this.resizing.startX,p=this.headers[this.resizing.idx],w=P.direction==="ltr"?p.width+ak:p.width-ak,al,aj;if(w>33){this.curGbox.css({left:this.resizing.sOL+ak});if(P.forceFit===true){al=this.headers[this.resizing.idx+P.nv];aj=P.direction==="ltr"?al.width-ak:al.width+ak;if(aj>33){p.newWidth=w;al.newWidth=aj}}else{this.newWidth=P.direction==="ltr"?P.tblwidth+ak:P.tblwidth-ak;p.newWidth=w}}}},dragEnd:function(){this.hDiv.style.cursor="default";if(this.resizing){var i=this.resizing.idx,p=this.headers[i].newWidth||this.headers[i].width;p=parseInt(p,10);this.resizing=false;a("#rs_m"+a.jgrid.jqID(P.id)).css("display","none");P.colModel[i].width=p;if(P.isHasGroupCols){this.headers[i].width=p}else{this.headers[i].width=p-5}this.headers[i].el.style.width=p+"px";this.cols[i].style.width=p+"px";if(this.footers.length>0){this.footers[i].style.width=p+"px"}if(P.forceFit===true){p=this.headers[i+P.nv].newWidth||this.headers[i+P.nv].width;this.headers[i+P.nv].width=p;this.headers[i+P.nv].el.style.width=p+"px";this.cols[i+P.nv].style.width=p+"px";if(this.footers.length>0){this.footers[i+P.nv].style.width=p+"px"}P.colModel[i+P.nv].width=p}else{P.tblwidth=this.newWidth||P.tblwidth;a("table:first",this.bDiv).css("width",P.tblwidth+"px");a("table:first",this.hDiv).css("width",P.tblwidth+"px");this.hDiv.scrollLeft=this.bDiv.scrollLeft;if(P.footerrow){a("table:first",this.sDiv).css("width",P.tblwidth+"px");this.sDiv.scrollLeft=this.bDiv.scrollLeft}}a(ac).triggerHandler("jqGridResizeStop",[p,i]);if(a.isFunction(P.resizeStop)){P.resizeStop.call(ac,p,i)}}this.curGbox=null;document.onselectstart=function(){return true}},populateVisible:function(){if(O.timer){clearTimeout(O.timer)}O.timer=null;var ao=a(O.bDiv).height();if(!ao){return}var ar=a("table:first",O.bDiv);var at,ap;if(ar[0].rows.length){try{at=ar[0].rows[1];ap=at?a(at).outerHeight()||O.prevRowHeight:O.prevRowHeight}catch(aq){ap=O.prevRowHeight}}if(!ap){return}O.prevRowHeight=ap;var am=P.rowNum;var w=O.scrollTop=O.bDiv.scrollTop;var ak=Math.round(ar.position().top)-w;var aj=ak+ar.height();var p=ap*am;var an,i,al;if(aj<ao&&ak<=0&&(P.lastpage===undefined||parseInt((aj+w+p-1)/p,10)<=P.lastpage)){i=parseInt((ao-aj+p-1)/p,10);if(aj>=0||i<2||P.scroll===true){an=Math.round((aj+w)/p)+1;ak=-1}else{ak=1}}if(ak>0){an=parseInt(w/p,10)+1;i=parseInt((w+ao)/p,10)+2-an;al=true}if(i){if(P.lastpage&&(an>P.lastpage||P.lastpage===1||(an===P.page&&an===P.lastpage))){return}if(O.hDiv.loading){O.timer=setTimeout(O.populateVisible,P.scrollTimeout)}else{P.page=an;if(al){O.selectionPreserver(ar[0]);O.emptyRows.call(ar[0],false,false)}O.populate(i)}}},scrollGrid:function(p){if(P.scroll){var i=O.bDiv.scrollTop;if(O.scrollTop===undefined){O.scrollTop=0}if(i!==O.scrollTop){O.scrollTop=i;if(O.timer){clearTimeout(O.timer)}O.timer=setTimeout(O.populateVisible,P.scrollTimeout)}}O.hDiv.scrollLeft=O.bDiv.scrollLeft;if(P.footerrow){O.sDiv.scrollLeft=O.bDiv.scrollLeft}if(p){p.stopPropagation()}},selectionPreserver:function(aj){var am=aj.p,w=am.selrow,i=am.selarrrow?a.makeArray(am.selarrrow):null,al=aj.grid.bDiv.scrollLeft,ak=function(){var p;am.selrow=null;am.selarrrow=[];if(w){a(aj).jqGrid("setSelection",w,false,null)}aj.grid.bDiv.scrollLeft=al;a(aj).unbind(".selectionPreserver",ak)};a(aj).bind("jqGridGridComplete.selectionPreserver",ak)}};if(this.tagName.toUpperCase()!=="TABLE"){alert("Element is not a table");return}if(document.documentMode!==undefined){if(document.documentMode<5){alert("Grid can not be used in this ('quirks') mode!");return}}a(this).empty().attr("tabindex","0");this.p=P;this.p.useProp=!!a.fn.prop;var V,af;if(this.p.colNames.length===0){for(V=0;V<this.p.colModel.length;V++){this.p.colNames[V]=this.p.colModel[V].label||this.p.colModel[V].name}}if(this.p.colNames.length!==this.p.colModel.length){alert(a.jgrid.errors.model);return}var l=a("<div class='ui-jqgrid-view'></div>"),o=a.jgrid.msie;ac.p.direction=a.trim(ac.p.direction.toLowerCase());if(a.inArray(ac.p.direction,["ltr","rtl"])===-1){ac.p.direction="ltr"}af=ac.p.direction;a(l).insertBefore(this);a(this).removeClass("scroll").appendTo(l);var ag=a("<div class='ui-jqgrid ui-widget ui-widget-content ui-corner-all'></div>");a(ag).attr({id:"gbox_"+this.id,dir:af}).insertBefore(l);a(l).attr("id","gview_"+this.id).appendTo(ag);a("<div class='ui-widget-overlay jqgrid-overlay' id='lui_"+this.id+"'></div>").insertBefore(l);a("<div class='loading ui-state-default ui-state-active' id='load_"+this.id+"'>"+this.p.loadtext+"</div>").insertBefore(l);a(this).attr({cellspacing:"0",cellpadding:"0",border:"0",role:"grid","aria-labelledby":"gbox_"+this.id});var v=function(p,i){p=parseInt(p,10);if(isNaN(p)){return i||0}return p},C=function(){var ak=ac.p.data.length,w,p,aj,w=ac.p.localReader.id;for(p=0;p<ak;p++){aj=a.jgrid.getAccessor(ac.p.data[p],w);if(aj===undefined){aj=String(p+1)}ac.p._index[aj]=p}},H=function(){var w=0,aj=v(ac.p.cellLayout,0),an=0,p,ak=v(ac.p.scrollOffset,0),al,ao=false,i,ap=0,am;a.each(ac.p.colModel,function(){if(this.hidden===undefined){this.hidden=false}this.widthOrg=al=v(this.width,0);if(this.hidden===false){w+=al+aj;if(this.fixed){ap+=al+aj}else{an++}}});if(isNaN(ac.p.width)){ac.p.width=w+(!isNaN(ac.p.height)?ak:0)}O.width=ac.p.width;ac.p.tblwidth=w},s=function(p){var w=a(ac.grid.headers[p].el),i=[w.position().left+w.outerWidth()];if(ac.p.direction==="rtl"){i[0]=ac.p.width-i[0]}i[0]-=ac.grid.bDiv.scrollLeft;i.push(a(ac.grid.hDiv).position().top);i.push(a(ac.grid.bDiv).offset().top-a(ac.grid.hDiv).offset().top+a(ac.grid.bDiv).height());return i},q=function(aj){var w,ak=ac.grid.headers,p=a.jgrid.getCellIndex(aj);for(w=0;w<ak.length;w++){if(aj===ak[w].el){p=w;break}}return p},G=function(an,al,ak,i,p,aj){var ap=ac.p.colModel[an],w=ap.align,at='style="',aq=ap.classes,ar=ap.name,am,ao=[];if(w){at+="text-align:"+w+";"}if(ap.hidden===true){at+="display:none;"}if(al===0){at+="width: "+O.headers[an].width+"px;"}else{if(ap.cellattr&&a.isFunction(ap.cellattr)){am=ap.cellattr.call(ac,p,ak,i,ap,aj);if(am&&typeof am==="string"){am=am.replace(/style/i,"style").replace(/title/i,"title");if(am.indexOf("title")>-1){ap.title=false}if(am.indexOf("class")>-1){aq=undefined}ao=am.replace("-style","-sti").split(/style/);if(ao.length===2){ao[1]=a.trim(ao[1].replace("-sti","-style").replace("=",""));if(ao[1].indexOf("'")===0||ao[1].indexOf('"')===0){ao[1]=ao[1].substring(1)}at+=ao[1].replace(/'/gi,'"')}else{at+='"'}}}}if(!ao.length){ao[0]="";at+='"'}at+=(aq!==undefined?(' class="'+aq+'"'):"")+((ap.title&&ak)?(' title="'+a.jgrid.stripHtml(ak)+'"'):"");at+=' aria-describedby="'+ac.p.id+"_"+ar+'"';return at+ao[0]},z=function(i){return i==null||i===""?"&#160;":String(i)},m=function(an,am,aj,ak,w){var i=ac.p.colModel[aj],p;if(i.formatter!==undefined){an=String(ac.p.idPrefix)!==""?a.jgrid.stripPref(ac.p.idPrefix,an):an;var al={rowId:an,colModel:i,gid:ac.p.id,pos:aj};if(a.isFunction(i.formatter)){p=i.formatter.call(ac,am,al,ak,w)}else{if(a.fmatter){p=a.fn.fmatter.call(ac,i.formatter,am,al,ak,w)}else{p=z(am)}}}else{p=z(am)}return p},aa=function(al,i,an,aj,w,am){var p,ak;p=m(al,i,an,w,"add");ak=G(an,aj,p,w,al,am);return'<td role="gridcell" '+ak+">"+p+"</td>"},Q=function(al,p,ak,w){var i=(parseInt(ak,10)-1)*parseInt(w,10)+1+p,aj=G(al,p,i,null,p,true);return'<td role="gridcell" class="ui-state-default jqgrid-rownum" '+aj+">"+i+"</td>"},r=function(aj){var al,ak=[],p=0,w;for(w=0;w<ac.p.colModel.length;w++){al=ac.p.colModel[w];if(al.name!=="rn"){ak[p]=al.name;if(ac.p.keyIndex!==false&&al.key===true){ac.p.keyName=ak[p]}p++}}return ak},U=function(p){var i=ac.p.remapColumns;if(!i||!i.length){i=a.map(ac.p.colModel,function(w,aj){return aj})}if(p){i=a.map(i,function(w){return w<p?null:w-p})}return i},x=function(i,w){var p;p=this.rows.length>0?this.rows[0]:null;a(this.firstChild).empty().append(p);if(i&&this.p.scroll){a(this.grid.bDiv.firstChild).css({height:"auto"});a(this.grid.bDiv.firstChild.firstChild).css({height:0,display:"none"});if(this.grid.bDiv.scrollTop!==0){this.grid.bDiv.scrollTop=0}}if(w===true&&this.p.treeGrid){this.p.data=[];this.p._index={}}},T=function(aj,ao,aq,at,ar,am){var an="-1",al="",ap,p=ao?"display:none;":"",ak="ui-widget-content jqgrow ui-row-"+ac.p.direction+(aq?" "+aq:"")+(am?" ui-state-highlight":""),i=a(ac).triggerHandler("jqGridRowAttr",[at,ar,aj]);if(typeof i!=="object"){i=a.isFunction(ac.p.rowattr)?ac.p.rowattr.call(ac,at,ar,aj):{}}if(!a.isEmptyObject(i)){if(i.hasOwnProperty("id")){aj=i.id;delete i.id}if(i.hasOwnProperty("tabindex")){an=i.tabindex;delete i.tabindex}if(i.hasOwnProperty("style")){p+=i.style;delete i.style}if(i.hasOwnProperty("class")){ak+=" "+i["class"];delete i["class"]}try{delete i.role}catch(w){}for(ap in i){if(i.hasOwnProperty(ap)){al+=" "+ap+"="+i[ap]}}}return'<tr role="row" id="'+aj+'" tabindex="'+an+'" class="'+ak+'"'+(p===""?"":' style="'+p+'"')+al+">"},g=function(ak,p){var an,au,i,ar,at,al,w,ap="",aw,aj=ac.p.pager?"_"+a.jgrid.jqID(ac.p.pager.substr(1)):"",am=ac.p.toppager?"_"+ac.p.toppager.substr(1):"";i=parseInt(ac.p.page,10)-1;if(i<0){i=0}i=i*parseInt(ac.p.rowNum,10);at=i+ac.p.reccount;if(ac.p.scroll){var ax=a("tbody:first > tr:gt(0)",ac.grid.bDiv);i=at-ax.length;ac.p.reccount=ax.length;var aq=ax.outerHeight()||ac.grid.prevRowHeight;if(aq){var ao=i*aq;var av=parseInt(ac.p.records,10)*aq;a(">div:first",ac.grid.bDiv).css({height:av}).children("div:first").css({height:ao,display:ao?"":"none"});if(ac.grid.bDiv.scrollTop==0&&ac.p.page>1){ac.grid.bDiv.scrollTop=ac.p.rowNum*(ac.p.page-1)*aq}}ac.grid.bDiv.scrollLeft=ac.grid.hDiv.scrollLeft}ap=ac.p.pager||"";ap+=ac.p.toppager?(ap?","+ac.p.toppager:ac.p.toppager):"";if(ap){w=a.jgrid.formatter.integer||{};an=v(ac.p.page);au=v(ac.p.lastpage);a(".selbox",ap)[ac.p.useProp?"prop":"attr"]("disabled",false);if(ac.p.pginput===true){a(".ui-pg-input",ap).val(ac.p.page);a("#sp_1_"+ap.substr(1)).html(ac.p.lastpage)}if(ac.p.viewrecords){if(ac.p.reccount===0){a(".ui-paging-info",ap).html(ac.p.emptyrecords)}else{ar=i+1;al=ac.p.records;a(".ui-paging-info",ap).html(a.jgrid.format(ac.p.recordtext,ar,at,al))}}if(ac.p.pgbuttons===true){if(an<=0){an=au=0}if(an===1||an===0){a("#first"+aj+", #prev"+aj).addClass("ui-state-disabled").removeClass("ui-state-hover");if(ac.p.toppager){a("#first_t"+am+", #prev_t"+am).addClass("ui-state-disabled").removeClass("ui-state-hover")}}else{a("#first"+aj+", #prev"+aj).removeClass("ui-state-disabled");if(ac.p.toppager){a("#first_t"+am+", #prev_t"+am).removeClass("ui-state-disabled")}}if(an===au||an===0){a("#next"+aj+", #last"+aj).addClass("ui-state-disabled").removeClass("ui-state-hover");if(ac.p.toppager){a("#next_t"+am+", #last_t"+am).addClass("ui-state-disabled").removeClass("ui-state-hover")}}else{a("#next"+aj+", #last"+aj).removeClass("ui-state-disabled");if(ac.p.toppager){a("#next_t"+am+", #last_t"+am).removeClass("ui-state-disabled")}}}}if(ak===true&&ac.p.rownumbers===true){a(">td.jqgrid-rownum",ac.rows).each(function(ay){a(this).html(i+1+ay)})}if(p&&ac.p.jqgdnd){a(ac).jqGrid("gridDnD","updateDnD")}a(ac).triggerHandler("jqGridGridComplete");if(a.isFunction(ac.p.gridComplete)){ac.p.gridComplete.call(ac)}a(ac).triggerHandler("jqGridAfterGridComplete")},ad=function(aX,aL,ap,aG,aS){var al=new Date();if(aX){if(ac.p.treeANode===-1&&!ac.p.scroll){x.call(ac,false,true);ap=1}else{ap=ap>1?ap:1}}else{return}var w,aq="_id_",aV,aJ=ac.p.datatype!=="local"&&ac.p.loadonce;if(aJ){ac.p.data=[];ac.p._index={};ac.p.localReader.id=aq}ac.p.reccount=0;w=ac.p.localReader;aV="local";var ao=a(ac),aC=0,aK,aR,aQ,aT=[],an,aY=ac.p.rownumbers===true?1:0,ar=U(aY),ay=r(aV),av,aw,aD,aj,aI={},az,p,aN=[],aB="",am;ac.p.page=v(a.jgrid.getAccessor(aX,w.page),ac.p.page);ac.p.lastpage=v(a.jgrid.getAccessor(aX,w.total),1);ac.p.records=v(a.jgrid.getAccessor(aX,w.records));ac.p.userData=a.jgrid.getAccessor(aX,w.userdata)||{};if(ac.p.keyIndex===false){aj=a.isFunction(w.id)?w.id.call(ac,aX):w.id}else{aj=ac.p.keyIndex}if(!w.repeatitems){aT=ay;if(aT.length>0&&!isNaN(aj)){aj=ac.p.keyName}}aD=a.jgrid.getAccessor(aX,w.root);if(aD==null&&a.isArray(aX)){aD=aX}if(!aD){aD=[]}aw=aD.length;aR=0;if(aw>0&&ac.p.page<=0){ac.p.page=1}var aH=parseInt(ac.p.rowNum,10),aO=ac.p.scroll?a.jgrid.randId():1,at,aE=false,ak;if(aS){aH*=aS+1}if(ac.p.datatype==="local"&&!ac.p.deselectAfterSort){aE=true}var aW=a.isFunction(ac.p.afterInsertRow),ax=[],aP=false,aA;while(aR<aw){an=aD[aR];p=a.jgrid.getAccessor(an,aj);if(p===undefined){if(typeof aj==="number"&&ac.p.colModel[aj+aY]!=null){p=a.jgrid.getAccessor(an,ac.p.colModel[aj+aY].name)}if(p===undefined){p=aO+aR;if(aT.length===0){if(w.cell){var aM=a.jgrid.getAccessor(an,w.cell)||an;p=aM!=null&&aM[aj]!==undefined?aM[aj]:p;aM=null}}}}p=ac.p.idPrefix+p;at=ap===1?0:ap;am=(at+aR)%2===1?aB:"";if(aE){ak=(p===ac.p.selrow)}var aF=aN.length;aN.push("");if(aY){aN.push(Q(0,aR,ac.p.page,ac.p.rowNum))}av=ay;if(w.repeatitems){if(w.cell){an=a.jgrid.getAccessor(an,w.cell)||an}if(a.isArray(an)){av=ar}}for(aQ=0;aQ<av.length;aQ++){aK=a.jgrid.getAccessor(an,av[aQ]);aI[ac.p.colModel[aQ+aY].name]=aK;aN.push(aa(p,aK,aQ+aY,aR+ap,an,aI))}aN[aF]=T(p,aP,am,aI,an,ak);aN.push("</tr>");if(ac.p.grouping){ax.push(aN);if(!ac.p.groupingView._locgr){aA.call(ao,aI,aR)}aN=[]}aI[aq]=a.jgrid.stripPref(ac.p.idPrefix,p);if(aJ){ac.p.data.push(aI);ac.p._index[aI[aq]]=ac.p.data.length-1}if(ac.p.gridview===false){a("#"+a.jgrid.jqID(ac.p.id)+" tbody:first").append(aN.join(""));ao.triggerHandler("jqGridAfterInsertRow",[p,aI,an]);if(aW){ac.p.afterInsertRow.call(ac,p,aI,an)}aN=[]}aI={};aC++;aR++;if(aC===aH){break}}if(ac.p.gridview===true){az=ac.p.treeANode>-1?ac.p.treeANode:0;a("#"+a.jgrid.jqID(ac.p.id)+" tbody:first").append(aN.join(""))}ac.p.totaltime=new Date()-al;if(aC>0){if(ac.p.records===0){ac.p.records=aw}}aN=null;if(ac.p.treeGrid===true){try{ao.jqGrid("setTreeNode",az+1,aC+az+1)}catch(aU){}}if(!ac.p.treeGrid&&!ac.p.scroll){ac.grid.bDiv.scrollTop=0}ac.p.reccount=aC;ac.p.treeANode=-1;if(ac.p.userDataOnFooter){ao.jqGrid("footerData","set",ac.p.userData,true)}if(!aG){ac.updatepager(false,true)}while(aC<aw&&aD[aC]){an=aD[aC];p=a.jgrid.getAccessor(an,aj);if(p===undefined){if(typeof aj==="number"&&ac.p.colModel[aj+aY]!=null){p=a.jgrid.getAccessor(an,ac.p.colModel[aj+aY].name)}if(p===undefined){p=aO+aC;if(aT.length===0){if(w.cell){var au=a.jgrid.getAccessor(an,w.cell)||an;p=au!=null&&au[aj]!==undefined?au[aj]:p;au=null}}}}if(an){p=ac.p.idPrefix+p;av=ay;if(w.repeatitems){if(w.cell){an=a.jgrid.getAccessor(an,w.cell)||an}if(a.isArray(an)){av=ar}}for(aQ=0;aQ<av.length;aQ++){aI[ac.p.colModel[aQ+aY].name]=a.jgrid.getAccessor(an,av[aQ])}aI[aq]=a.jgrid.stripPref(ac.p.idPrefix,p);if(ac.p.grouping){aA.call(ao,aI,aC)}ac.p.data.push(aI);ac.p._index[aI[aq]]=ac.p.data.length-1;aI={}}aC++}},t=function(){if(!a.isArray(ac.p.data)){return}var p=ac.p.data,aj=parseInt(ac.p.rowNum,10),ak=p.length,al=parseInt(ac.p.page,10),i=Math.ceil(ak/aj),w={};p=p.slice((al-1)*aj,al*aj);w[ac.p.localReader.total]=i;w[ac.p.localReader.page]=al;w[ac.p.localReader.records]=ak;w[ac.p.localReader.root]=p;w[ac.p.localReader.userdata]=ac.p.userData;p=null;return w},e=function(i){if(!ac.grid.hDiv.loading){var ap=ac.p.scroll&&i===false,aq={},w,ak,am=ac.p.prmNames;if(ac.p.page<=0){ac.p.page=Math.min(1,ac.p.lastpage)}if(am.search!==null){aq[am.search]=ac.p.search}if(am.nd!==null){aq[am.nd]=new Date().getTime()}if(am.rows!==null){aq[am.rows]=ac.p.rowNum}if(am.page!==null){aq[am.page]=ac.p.page}if(am.sort!==null){aq[am.sort]=ac.p.sortname}if(am.order!==null){aq[am.order]=ac.p.sortorder}if(ac.p.rowTotal!==null&&am.totalrows!==null){aq[am.totalrows]=ac.p.rowTotal}var al=a.isFunction(ac.p.loadComplete),p=al?ac.p.loadComplete:null;var ao=0;i=i||1;if(i>1){if(am.npage!==null){aq[am.npage]=i;ao=i-1;i=1}else{p=function(ar){ac.p.page++;ac.grid.hDiv.loading=false;if(al){ac.p.loadComplete.call(ac,ar)}e(i-1)}}}var aj=!ac.p.scroll?1:ac.rows.length-1;ac.p.datatype="local";var an=t();ad(an,ac.grid.bDiv,aj,i>1,ao);a(ac).triggerHandler("jqGridLoadComplete",[an]);if(p){p.call(ac,an)}a(ac).triggerHandler("jqGridAfterLoadComplete",[an]);if(ap){ac.grid.populateVisible()}}},ae=function(al,aq){var aw="<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='ui-separator'></span></td>",p="",at="<table cellspacing='0' cellpadding='0' border='0' style='table-layout:auto;' class='ui-pg-table'><tbody><tr>",ap="",ao,av,ar,au,an,ak,am,w=function(ax){var i;if(a.isFunction(ac.p.onPaging)){i=ac.p.onPaging.call(ac,ax)}if(i==="stop"){return false}ac.p.selrow=null;ac.p.savedRow=[];return true};al=al.substr(1);aq+="_"+al;ao="pg_"+al;av=al+"_left";ar=al+"_center";au=al+"_right";a("#"+a.jgrid.jqID(al)).append("<div id='"+ao+"' class='ui-pager-control' role='group'><table cellspacing='0' cellpadding='0' border='0' class='ui-pg-table' style='width:100%;table-layout:fixed;height:100%;' role='row'><tbody><tr><td id='"+av+"' align='left'></td><td id='"+ar+"' align='center' style='white-space:pre;'></td><td id='"+au+"' align='right'></td></tr></tbody></table></div>").attr("dir","ltr");if(af==="rtl"){at+=ap}if(ac.p.pginput===true){p="<td dir='"+af+"'>"+a.jgrid.format(ac.p.pgtext||"","<input class='ui-pg-input' type='text' size='2' maxlength='7' value='0' role='textbox'/>","<span id='sp_1_"+a.jgrid.jqID(al)+"'></span>")+"</td>"}if(ac.p.pgbuttons===true){var aj=["first"+aq,"prev"+aq,"next"+aq,"last"+aq];if(af==="rtl"){aj.reverse()}at+="<td id='"+aj[0]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-first'></span></td>";at+="<td id='"+aj[1]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-prev'></span></td>";at+=p!==""?aw+p+aw:"";at+="<td id='"+aj[2]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-next'></span></td>";at+="<td id='"+aj[3]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-end'></span></td>"}else{if(p!==""){at+=p}}if(af==="ltr"){at+=ap}at+="</tr></tbody></table>";if(ac.p.viewrecords===true){a("td#"+al+"_"+ac.p.recordpos,"#"+ao).append("<div dir='"+af+"' style='text-align:"+ac.p.recordpos+"' class='ui-paging-info'></div>")}a("td#"+al+"_"+ac.p.pagerpos,"#"+ao).append(at);ak=a(".ui-jqgrid").css("font-size")||"11px";a(document.body).append("<div id='testpg' class='ui-jqgrid ui-widget ui-widget-content' style='font-size:"+ak+";visibility:hidden;' ></div>");an=a(at).clone().appendTo("#testpg").width();a("#testpg").remove();if(an>0){if(p!==""){an+=50}a("td#"+al+"_"+ac.p.pagerpos,"#"+ao).width(an)}ac.p._nvtd=[];ac.p._nvtd[0]=an?Math.floor((ac.p.width-an)/2):Math.floor(ac.p.width/3);ac.p._nvtd[1]=0;at=null;a(".ui-pg-selbox","#"+ao).bind("change",function(){if(!w("records")){return false}ac.p.page=Math.round(ac.p.rowNum*(ac.p.page-1)/this.value-0.5)+1;ac.p.rowNum=this.value;if(ac.p.pager){a(".ui-pg-selbox",ac.p.pager).val(this.value)}if(ac.p.toppager){a(".ui-pg-selbox",ac.p.toppager).val(this.value)}e();return false});if(ac.p.pgbuttons===true){a(".ui-pg-button","#"+ao).hover(function(){if(a(this).hasClass("ui-state-disabled")){this.style.cursor="default"}else{a(this).addClass("ui-state-hover");this.style.cursor="pointer"}},function(){if(!a(this).hasClass("ui-state-disabled")){a(this).removeClass("ui-state-hover");this.style.cursor="default"}});a("#first"+a.jgrid.jqID(aq)+", #prev"+a.jgrid.jqID(aq)+", #next"+a.jgrid.jqID(aq)+", #last"+a.jgrid.jqID(aq)).click(function(){if(a(this).hasClass("ui-state-disabled")){return false}var aB=v(ac.p.page,1),az=v(ac.p.lastpage,1),aC=false,ax=true,i=true,aA=true,ay=true;if(az===0||az===1){ax=false;i=false;aA=false;ay=false}else{if(az>1&&aB>=1){if(aB===1){ax=false;i=false}else{if(aB===az){aA=false;ay=false}}}else{if(az>1&&aB===0){aA=false;ay=false;aB=az-1}}}if(!w(this.id)){return false}if(this.id==="first"+aq&&ax){ac.p.page=1;aC=true}if(this.id==="prev"+aq&&i){ac.p.page=(aB-1);aC=true}if(this.id==="next"+aq&&aA){ac.p.page=(aB+1);aC=true}if(this.id==="last"+aq&&ay){ac.p.page=az;aC=true}if(aC){e()}return false})}if(ac.p.pginput===true){a("input.ui-pg-input","#"+ao).keypress(function(ax){var i=ax.charCode||ax.keyCode||0;if(i===13){if(!w("user")){return false}a(this).val(v(a(this).val(),1));ac.p.page=(a(this).val()>0)?a(this).val():ac.p.page;e();return false}return this})}};this.p.id=this.id;ac.p.keyIndex=false;ac.p.keyName=false;for(V=0;V<ac.p.colModel.length;V++){ac.p.colModel[V]=a.extend(true,{},ac.p.cmTemplate,ac.p.colModel[V].template||{},ac.p.colModel[V]);if(ac.p.keyIndex===false&&ac.p.colModel[V].key===true){ac.p.keyIndex=V}}ac.p.sortorder=ac.p.sortorder.toLowerCase();if(this.p.rownumbers){this.p.colNames.unshift("序号");this.p.colModel.unshift({label:"序号",name:"rn",width:ac.p.rownumWidth,sortable:false,resizable:true,hidedlg:true,search:false,align:"center",fixed:true})}ac.p.localReader=a.extend(true,{root:"rows",page:"page",total:"total",records:"records",repeatitems:false,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:true,cell:"cell"}},ac.p.localReader);if(ac.p.scroll){ac.p.pgbuttons=false;ac.p.pginput=false}if(ac.p.data.length){C()}var D="<thead><tr class='ui-jqgrid-labels' role='rowheader'>",W,h,N,F,ab,j,ai,M,J,k="",n="",y=[],X=[],Z=[];if(ac.p.viewsortcols[1]==="horizontal"){k=" ui-i-asc";n=" ui-i-desc"}W=o?"class='ui-th-div-ie'":"";J="<span class='s-ico' style='display:none'><span sort='asc' class='ui-grid-ico-sort ui-icon-asc"+k+" ui-state-disabled ui-icon ui-icon-triangle-1-n ui-sort-"+af+"'></span><span sort='desc' class='ui-grid-ico-sort ui-icon-desc"+n+" ui-state-disabled ui-icon ui-icon-triangle-1-s ui-sort-"+af+"'></span></span>";for(V=0;V<this.p.colNames.length;V++){var I=ac.p.headertitles?(' title="'+a.jgrid.stripHtml(ac.p.colNames[V])+'"'):"";D+="<th id='"+ac.p.id+"_"+ac.p.colModel[V].name+"' role='columnheader' class='ui-state-default ui-th-column ui-th-"+af+"'"+I+">";h=ac.p.colModel[V].index||ac.p.colModel[V].name;D+="<div id='jqgh_"+ac.p.id+"_"+ac.p.colModel[V].name+"' "+W+">"+ac.p.colNames[V];if(!ac.p.colModel[V].width){ac.p.colModel[V].width=150}else{ac.p.colModel[V].width=parseInt(ac.p.colModel[V].width,10)}if(typeof ac.p.colModel[V].title!=="boolean"){ac.p.colModel[V].title=true}D+=J+"</div></th>"}D+="</tr></thead>";J=null;a(this).append(D);a("thead tr:first th",this).hover(function(){a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")});H();a(ag).css("width",O.width+"px").append("<div class='ui-jqgrid-resize-mark' id='rs_m"+ac.p.id+"'>&#160;</div>");a(l).css("width",(O.width-2)+"px");D=a("thead:first",ac).get(0);var R="";if(ac.p.footerrow){R+="<table role='grid' style='width:"+ac.p.tblwidth+"px' class='ui-jqgrid-ftable' cellspacing='0' cellpadding='0' border='0'><tbody><tr role='row' class='ui-widget-content footrow footrow-"+af+"'>"}var A=a("tr:first",D),u="<tr class='jqgfirstrow' role='row' style='height:auto'>";ac.p.disableClick=false;a("th",A).each(function(p){N=ac.p.colModel[p].width;if(ac.p.colModel[p].resizable===undefined){ac.p.colModel[p].resizable=true}if(ac.p.colModel[p].resizable){F=document.createElement("span");a(F).html("&#160;").addClass("ui-jqgrid-resize ui-jqgrid-resize-"+af).css("cursor","col-resize");a(this).addClass(ac.p.resizeclass)}else{F=""}a(this).css("width",N+"px").prepend(F);F=null;var w="";if(ac.p.colModel[p].hidden){a(this).css("display","none");w="display:none;"}u+="<td role='gridcell' style='height:0px;width:"+N+"px;"+w+"'></td>";if(!ac.p.isHasGroupCols){N=N-5}O.headers[p]={width:N,el:this};ab=ac.p.colModel[p].sortable;if(typeof ab!=="boolean"){ac.p.colModel[p].sortable=true;ab=true}var i=ac.p.colModel[p].name;if(ac.p.viewsortcols[2]){a(">div",this).addClass("ui-jqgrid-sortable")}if(ab){if(ac.p.viewsortcols[0]){a("div span.s-ico",this).show();if(p===ac.p.lastsort){a("div span.ui-icon-"+ac.p.sortorder,this).removeClass("ui-state-disabled")}}else{if(p===ac.p.lastsort){a("div span.s-ico",this).show();a("div span.ui-icon-"+ac.p.sortorder,this).removeClass("ui-state-disabled")}}}if(ac.p.footerrow){R+="<td role='gridcell' "+G(p,0,"",null,"",false)+">&#160;</td>"}}).mousedown(function(p){if(a(p.target).closest("th>span.ui-jqgrid-resize").length!==1){return}var i=q(this);O.dragStart(i,p,s(i));return false}).click(function(aj){var w=q(this);var p=ac.p.colModel[w].sortable;if(!ac.p.lastsort){ac.p.sortorder="asc"}else{if(ac.p.lastsort===w){ac.p.sortorder=(ac.p.sortorder=="asc"?"desc":"asc")}else{var i=ac.grid.headers[ac.p.lastsort].el;a("div span.s-ico",i).hide();a("span.ui-grid-ico-sort",i).addClass("ui-state-disabled");ac.p.sortorder="asc"}}if(p){a("div span.s-ico",this).show();a("span.ui-grid-ico-sort",this).addClass("ui-state-disabled");a("div span.ui-icon-"+ac.p.sortorder,this).removeClass("ui-state-disabled");if(a.isFunction(ac.p.onColumnHeaderClick)){ac.p.onColumnHeaderClick.call(ac,q(this))}ac.p.lastsort=w}else{ac.p.lastsort=null}});if(ac.p.footerrow){R+="</tr></tbody></table>"}u+="</tr>";M=document.createElement("tbody");this.appendChild(M);a(this).addClass("ui-jqgrid-btable").append(u);u=null;var S=a("<table class='ui-jqgrid-htable' style='width:"+ac.p.tblwidth+"px' role='grid' aria-labelledby='gbox_"+this.id+"' cellspacing='0' cellpadding='0' border='0'></table>").append(D),ah=(ac.p.caption&&ac.p.hiddengrid===true)?true:false,f=a("<div class='ui-jqgrid-hbox"+(af==="rtl"?"-rtl":"")+"'></div>");D=null;O.hDiv=document.createElement("div");a(O.hDiv).css({width:(O.width-2)+"px"}).addClass("ui-state-default ui-jqgrid-hdiv").append(f);a(f).append(S);S=null;if(ah){a(O.hDiv).hide()}if(ac.p.pager){if(typeof ac.p.pager==="string"){if(ac.p.pager.substr(0,1)!=="#"){ac.p.pager="#"+ac.p.pager}}else{ac.p.pager="#"+a(ac.p.pager).attr("id")}a(ac.p.pager).css({width:O.width+"px"}).addClass("ui-state-default ui-jqgrid-pager").appendTo(ag);if(ah){a(ac.p.pager).hide()}ae(ac.p.pager,"")}if(ac.p.cellEdit===false&&ac.p.hoverrows===true){a(ac).bind("mouseover",function(i){ai=a(i.target).closest("tr.jqgrow");if(a(ai).attr("class")!=="ui-subgrid"){a(ai).addClass("ui-state-hover")}}).bind("mouseout",function(i){ai=a(i.target).closest("tr.jqgrow");a(ai).removeClass("ui-state-hover")})}var K,E,Y;a(ac).before(O.hDiv).click(function(aj){j=aj.target;ai=a(j,ac.rows).closest("tr.jqgrow");if(a(ai).length===0||ai[0].className.indexOf("ui-state-disabled")>-1||(a(j,ac).closest("table.ui-jqgrid-btable").attr("id")||"").replace("_frozen","")!==ac.id){return this}var i=a(j).hasClass("cbox"),w=a(ac).triggerHandler("jqGridBeforeSelectRow",[ai[0].id,aj]);w=(w===false||w==="stop")?false:true;if(w&&a.isFunction(ac.p.beforeSelectRow)){w=ac.p.beforeSelectRow.call(ac,ai[0].id,aj)}if(j.tagName==="BUTTON"||j.tagName==="A"||((j.tagName==="INPUT"||j.tagName==="TEXTAREA"||j.tagName==="OPTION"||j.tagName==="SELECT")&&!i)){ac.p.CellClickEvent(ai[0].id,a.jgrid.getCellIndex(j));return}if(w===true){K=ai[0].id;E=a.jgrid.getCellIndex(j);Y=a(j).closest("td,th").html();a(ac).triggerHandler("jqGridCellSelect",[K,E,Y,aj]);if(a.isFunction(ac.p.onCellSelect)){ac.p.onCellSelect.call(ac,K,E,Y,aj)}if(ac.p.cellEdit===true){K=ai[0].rowIndex;try{a(ac).jqGrid("editCell",K,E,true)}catch(p){}}else{a(ac).jqGrid("setSelection",K,true,aj)}}}).bind("reloadGrid",function(w,i){if(i&&i.current){ac.grid.selectionPreserver(ac)}if(ac.p.datatype==="local"){if(ac.p.data.length){C()}}else{if(!ac.p.treeGrid){ac.p.selrow=null;ac.p.savedRow=[]}}if(ac.p.scroll){x.call(ac,true,false)}if(i&&i.page){var p=i.page;if(p>ac.p.lastpage){p=ac.p.lastpage}if(p<1){p=1}ac.p.page=p;if(ac.grid.prevRowHeight){ac.grid.bDiv.scrollTop=(p-1)*ac.grid.prevRowHeight*ac.p.rowNum}else{ac.grid.bDiv.scrollTop=0}}if(ac.grid.prevRowHeight&&ac.p.scroll){delete ac.p.lastpage;ac.grid.populateVisible()}else{ac.grid.populate()}return false}).dblclick(function(i){j=i.target;ai=a(j,ac.rows).closest("tr.jqgrow");if(a(ai).length===0){return}K=ai[0].rowIndex;E=a.jgrid.getCellIndex(j);a(ac).triggerHandler("jqGridDblClickRow",[a(ai).attr("id"),K,E,i]);if(a.isFunction(ac.p.ondblClickRow)){ac.p.ondblClickRow.call(ac,a(ai).attr("id"),K,E,i)}});O.bDiv=document.createElement("div");if(o){if(String(ac.p.height).toLowerCase()==="auto"){ac.p.height="100%"}}a(O.bDiv).append(a('<div style="position:relative;'+(o&&a.jgrid.msiever()<8?"height:0.01%;":"")+'"></div>').append("<div></div>").append(this)).addClass("ui-jqgrid-bdiv").css({height:ac.p.height+(isNaN(ac.p.height)?"":"px"),width:(O.width-2)+"px"}).scroll(O.scrollGrid);a("table:first",O.bDiv).css({width:ac.p.tblwidth+"px"});if(!a.support.tbody){if(a("tbody",this).length===2){a("tbody:gt(0)",this).remove()}}if(ah){a(O.bDiv).hide()}O.cDiv=document.createElement("div");var B=ac.p.hidegrid===true?a("<a role='link' class='ui-jqgrid-titlebar-close ui-corner-all HeaderButton' />").hover(function(){B.addClass("ui-state-hover")},function(){B.removeClass("ui-state-hover")}).append("<span class='ui-icon ui-icon-circle-triangle-n'></span>").css((af==="rtl"?"left":"right"),"0px"):"";a(O.cDiv).append(B).append("<span class='ui-jqgrid-title'>"+ac.p.caption+"</span>").addClass("ui-jqgrid-titlebar ui-jqgrid-caption"+(af==="rtl"?"-rtl":"")+" ui-widget-header ui-corner-top ui-helper-clearfix");a(O.cDiv).insertBefore(O.hDiv);if(ac.p.toolbar[0]){O.uDiv=document.createElement("div");if(ac.p.toolbar[1]==="top"){a(O.uDiv).insertBefore(O.hDiv)}else{if(ac.p.toolbar[1]==="bottom"){a(O.uDiv).insertAfter(O.hDiv)}}if(ac.p.toolbar[1]==="both"){O.ubDiv=document.createElement("div");a(O.uDiv).addClass("ui-userdata ui-state-default").attr("id","t_"+this.id).insertBefore(O.hDiv);a(O.ubDiv).addClass("ui-userdata ui-state-default").attr("id","tb_"+this.id).insertAfter(O.hDiv);if(ah){a(O.ubDiv).hide()}}else{a(O.uDiv).width(O.width).addClass("ui-userdata ui-state-default").attr("id","t_"+this.id)}if(ah){a(O.uDiv).hide()}}if(ac.p.toppager){ac.p.toppager=a.jgrid.jqID(ac.p.id)+"_toppager";O.topDiv=a("<div id='"+ac.p.toppager+"'></div>")[0];ac.p.toppager="#"+ac.p.toppager;a(O.topDiv).addClass("ui-state-default ui-jqgrid-toppager").width(O.width).insertBefore(O.hDiv);ae(ac.p.toppager,"_t")}if(ac.p.footerrow){O.sDiv=a("<div class='ui-jqgrid-sdiv'></div>")[0];f=a("<div class='ui-jqgrid-hbox"+(af==="rtl"?"-rtl":"")+"'></div>");a(O.sDiv).append(f).width(O.width).insertAfter(O.hDiv);a(f).append(R);O.footers=a(".ui-jqgrid-ftable",O.sDiv)[0].rows[0].cells;if(ac.p.rownumbers){O.footers[0].className="ui-state-default jqgrid-rownum"}if(ah){a(O.sDiv).hide()}}f=null;if(ac.p.caption){var L=ac.p.datatype;if(ac.p.hidegrid===true){a(".ui-jqgrid-titlebar-close",O.cDiv).click(function(ak){var aj=a.isFunction(ac.p.onHeaderClick),w=".ui-jqgrid-bdiv, .ui-jqgrid-hdiv, .ui-jqgrid-pager, .ui-jqgrid-sdiv",i,p=this;if(ac.p.toolbar[0]===true){if(ac.p.toolbar[1]==="both"){w+=", #"+a(O.ubDiv).attr("id")}w+=", #"+a(O.uDiv).attr("id")}i=a(w,"#gview_"+a.jgrid.jqID(ac.p.id)).length;if(ac.p.gridstate==="visible"){a(w,"#gbox_"+a.jgrid.jqID(ac.p.id)).slideUp("fast",function(){i--;if(i===0){a("span",p).removeClass("ui-icon-circle-triangle-n").addClass("ui-icon-circle-triangle-s");ac.p.gridstate="hidden";if(a("#gbox_"+a.jgrid.jqID(ac.p.id)).hasClass("ui-resizable")){a(".ui-resizable-handle","#gbox_"+a.jgrid.jqID(ac.p.id)).hide()}a(ac).triggerHandler("jqGridHeaderClick",[ac.p.gridstate,ak]);if(aj){if(!ah){ac.p.onHeaderClick.call(ac,ac.p.gridstate,ak)}}}})}else{if(ac.p.gridstate==="hidden"){a(w,"#gbox_"+a.jgrid.jqID(ac.p.id)).slideDown("fast",function(){i--;if(i===0){a("span",p).removeClass("ui-icon-circle-triangle-s").addClass("ui-icon-circle-triangle-n");if(ah){ac.p.datatype=L;e();ah=false}ac.p.gridstate="visible";if(a("#gbox_"+a.jgrid.jqID(ac.p.id)).hasClass("ui-resizable")){a(".ui-resizable-handle","#gbox_"+a.jgrid.jqID(ac.p.id)).show()}a(ac).triggerHandler("jqGridHeaderClick",[ac.p.gridstate,ak]);if(aj){if(!ah){ac.p.onHeaderClick.call(ac,ac.p.gridstate,ak)}}}})}}return false});if(ah){ac.p.datatype="local";a(".ui-jqgrid-titlebar-close",O.cDiv).trigger("click")}}}else{a(O.cDiv).hide()}a(O.hDiv).after(O.bDiv).mousemove(function(i){if(O.resizing){O.dragMove(i);return false}});a(".ui-jqgrid-labels",O.hDiv).bind("selectstart",function(){return false});a(document).bind("mouseup.jqGrid"+ac.p.id,function(){if(O.resizing){O.dragEnd();return false}return true});ac.formatCol=G;ac.refreshIndex=C;ac.constructTr=T;ac.updatepager=g;ac.formatter=function(ak,aj,p,w,i){return m(ak,aj,p,w,i)};a.extend(O,{populate:e,emptyRows:x});this.grid=O;this.grid.cols=this.rows[0].cells;a(ac).triggerHandler("jqGridInitGrid");if(a.isFunction(ac.p.onInitGrid)){ac.p.onInitGrid.call(ac)}e();ac.p.hiddengrid=false})}})(jQuery);(function(a){a.jgrid.extend({getGridParam:function(b){var c=this[0];if(!c||!c.grid){return}if(!b){return c.p}return c.p[b]!==undefined?c.p[b]:null},setGridParam:function(b){return this.each(function(){if(this.grid&&typeof b==="object"){a.extend(true,this.p,b)}})},setSelection:function(c,b,d){return this.each(function(){var k=this,g,h,j,f,e,i;if(c===undefined){return}b=b===false?false:true;h=a(k).jqGrid("getGridRowById",c);if(!h||!h.className||h.className.indexOf("ui-state-disabled")>-1){return}k.p.selrow=h.id;f=a.inArray(k.p.selrow,k.p.selarrrow);if(f===-1){if(h.className!=="ui-subgrid"){a(h).addClass("ui-state-highlight").attr("aria-selected","true")}g=true;k.p.selarrrow.push(k.p.selrow)}else{if(h.className!=="ui-subgrid"){a(h).removeClass("ui-state-highlight").attr("aria-selected","false")}g=false;k.p.selarrrow.splice(f,1);e=k.p.selarrrow[0];k.p.selrow=(e===undefined)?null:e}a("#jqg_"+a.jgrid.jqID(k.p.id)+"_"+a.jgrid.jqID(h.id))[k.p.useProp?"prop":"attr"]("checked",g);if(i){if(f===-1){a("#"+a.jgrid.jqID(c),"#"+a.jgrid.jqID(i)).addClass("ui-state-highlight")}else{a("#"+a.jgrid.jqID(c),"#"+a.jgrid.jqID(i)).removeClass("ui-state-highlight")}a("#jqg_"+a.jgrid.jqID(k.p.id)+"_"+a.jgrid.jqID(c),"#"+a.jgrid.jqID(i))[k.p.useProp?"prop":"attr"]("checked",g)}if(b){a(k).triggerHandler("jqGridSelectRow",[h.id,g,d]);if(k.p.onSelectRow){k.p.onSelectRow.call(k,h.id,g,d)}}})},getGridRowById:function(b){var c;this.each(function(){try{var d=this.rows.length;while(d--){if(b.toString()===this.rows[d].id){c=this.rows[d];break}}}catch(f){c=a(this.grid.bDiv).find("#"+a.jgrid.jqID(b))}});return c},clearGridData:function(b){return this.each(function(){var d=this;if(!d.grid){return}if(typeof b!=="boolean"){b=false}if(d.p.deepempty){a("#"+a.jgrid.jqID(d.p.id)+" tbody:first tr:gt(0)").remove()}else{var c=a("#"+a.jgrid.jqID(d.p.id)+" tbody:first tr:first")[0];a("#"+a.jgrid.jqID(d.p.id)+" tbody:first").empty().append(c)}if(d.p.footerrow&&b){a(".ui-jqgrid-ftable td",d.grid.sDiv).html("&#160;")}d.p.selrow=null;d.p.selarrrow=[];d.p.savedRow=[];d.p.records=0;d.p.page=1;d.p.lastpage=0;d.p.reccount=0;d.p.data=[];d.p._index={};d.updatepager(true,false)})},setGridWidth:function(c,b){return this.each(function(){if(!this.grid){return}var j=this,i,f=0,g=a.jgrid.cell_width?0:j.p.cellLayout,e,m=0,n=false,h=j.p.scrollOffset,d,p=0,l;if(typeof b!=="boolean"){b=j.p.shrinkToFit}if(isNaN(c)){return}c=parseInt(c,10);j.grid.width=j.p.width=c;a("#gbox_"+a.jgrid.jqID(j.p.id)).css("width",c+"px");a("#gview_"+a.jgrid.jqID(j.p.id)).css("width",c+"px");a(j.grid.bDiv).css("width",c+"px");a(j.grid.hDiv).css("width",c+"px");if(j.p.pager){a(j.p.pager).css("width",c+"px")}if(j.p.toppager){a(j.p.toppager).css("width",c+"px")}if(j.p.toolbar[0]===true){a(j.grid.uDiv).css("width",c+"px");if(j.p.toolbar[1]==="both"){a(j.grid.ubDiv).css("width",c+"px")}}if(j.p.footerrow){a(j.grid.sDiv).css("width",c+"px")}if(b===false&&j.p.forceFit===true){j.p.forceFit=false}if(b===true){a.each(j.p.colModel,function(){if(this.hidden===false){i=this.widthOrg;f+=i+g;if(this.fixed){p+=i+g}else{m++}}});if(m===0){return}j.p.tblwidth=f;d=c-g*m-p;if(!isNaN(j.p.height)){if(a(j.grid.bDiv)[0].clientHeight<a(j.grid.bDiv)[0].scrollHeight||j.rows.length===1){n=true;d-=h}}f=0;var k=j.grid.cols.length>0;a.each(j.p.colModel,function(q){if(this.hidden===false&&!this.fixed){i=this.widthOrg;i=Math.round(d*i/(j.p.tblwidth-g*m-p));if(i<0){return}this.width=i;f+=i;j.grid.headers[q].width=i;j.grid.headers[q].el.style.width=i+"px";if(j.p.footerrow){j.grid.footers[q].style.width=i+"px"}if(k){j.grid.cols[q].style.width=i+"px"}e=q}});if(!e){return}l=0;if(n){if(c-p-(f+g*m)!==h){l=c-p-(f+g*m)-h}}else{if(Math.abs(c-p-(f+g*m))!==1){l=c-p-(f+g*m)}}j.p.colModel[e].width+=l;j.p.tblwidth=f+l+g*m+p;if(j.p.tblwidth>c){var o=j.p.tblwidth-parseInt(c,10);j.p.tblwidth=c;i=j.p.colModel[e].width=j.p.colModel[e].width-o}else{i=j.p.colModel[e].width}j.grid.headers[e].width=i;j.grid.headers[e].el.style.width=i+"px";if(k){j.grid.cols[e].style.width=i+"px"}if(j.p.footerrow){j.grid.footers[e].style.width=i+"px"}}if(j.p.tblwidth){a("table:first",j.grid.bDiv).css("width",j.p.tblwidth+"px");a("table:first",j.grid.hDiv).css("width",j.p.tblwidth+"px");j.grid.hDiv.scrollLeft=j.grid.bDiv.scrollLeft;if(j.p.footerrow){a("table:first",j.grid.sDiv).css("width",j.p.tblwidth+"px")}}})},setGridHeight:function(b){return this.each(function(){var d=this;if(!d.grid){return}var c=a(d.grid.bDiv);c.css({height:b+(isNaN(b)?"":"px")});if(d.p.frozenColumns===true){a("#"+a.jgrid.jqID(d.p.id)+"_frozen").parent().height(c.height()-16)}d.p.height=b;if(d.p.scroll){d.grid.populateVisible()}})},setCell:function(e,f,c,g,d,b){return this.each(function(){var o=this,n=-1,i,m;if(!o.grid){return}if(isNaN(f)){a(o.p.colModel).each(function(p){if(this.name===f){n=p;return false}})}else{n=parseInt(f,10)}if(n>=0){var l=a(o).jqGrid("getGridRowById",e);if(l){var k=a("td:eq("+n+")",l);if(c!==""||b===true){i=o.formatter(e,c,n,l,"edit");m=o.p.colModel[n].title?{title:a.jgrid.stripHtml(i)}:{};if(o.p.treeGrid&&a(".tree-wrap",a(k)).length>0){a("span",a(k)).html(i).attr(m)}else{a(k).html(i).attr(m)}if(o.p.datatype==="local"){var h=o.p.colModel[n],j;c=h.formatter&&typeof h.formatter==="string"&&h.formatter==="date"?a.unformat.date.call(o,c,h):c;j=o.p._index[a.jgrid.stripPref(o.p.idPrefix,e)];if(j!==undefined){o.p.data[j][h.name]=c}}}if(typeof g==="string"){a(k).addClass(g)}else{if(g){a(k).css(g)}}if(typeof d==="object"){a(k).attr(d)}}}})},GridDestroy:function(){return this.each(function(){if(this.grid){if(this.p.pager){a(this.p.pager).remove()}try{a(this).jqGrid("clearBeforeUnload");a("#gbox_"+a.jgrid.jqID(this.id)).remove()}catch(b){}}})},destroyGroupHeader:function(b){if(b===undefined){b=true}return this.each(function(){var h=this,m,j,f,d,p,e,c=h.grid,n=a("table.ui-jqgrid-htable thead",c.hDiv),o=h.p.colModel,k;if(!c){return}a(this).unbind(".setGroupHeaders");m=a("<tr>",{role:"rowheader"}).addClass("ui-jqgrid-labels");d=c.headers;for(j=0,f=d.length;j<f;j++){k=o[j].hidden?"none":"";p=a(d[j].el).width(d[j].width).css("display",k);try{p.removeAttr("rowSpan")}catch(g){p.attr("rowSpan",1)}m.append(p);e=p.children("span.ui-jqgrid-resize");if(e.length>0){e[0].style.height=""}p.children("div")[0].style.top=""}a(n).children("tr.ui-jqgrid-labels").remove();a(n).prepend(m);if(b===true){a(h).jqGrid("setGridParam",{groupHeader:null})}})},setGroupHeaders:function(b){b=a.extend({useColSpanStyle:false,groupHeaders:[]},b||{});return this.each(function(){this.p.groupHeader=b;var c=this,z,v,w=0,B,o,j,f,h,g,A,r,q,u,n=c.p.colModel,s=n.length,d=c.grid.headers,y=a("table.ui-jqgrid-htable",c.grid.hDiv),e=y.children("thead").children("tr.ui-jqgrid-labels:last").addClass("jqg-second-row-header"),m=y.children("thead"),t,l=y.find(".jqg-first-row-header");if(l[0]===undefined){l=a("<tr>",{role:"row","aria-hidden":"true"}).addClass("jqg-first-row-header").css("height","auto")}else{l.empty()}var k,x=function(F,D){var E=D.length,C;for(C=0;C<E;C++){if(D[C].startColumnName===F){return C}}return -1};a(c).prepend(m);B=a("<tr>",{role:"rowheader"}).addClass("ui-jqgrid-labels jqg-third-row-header");var p=a(c).find("tr.jqgfirstrow");for(z=0;z<s;z++){j=d[z].el;f=a(j);v=n[z];h={height:"0px",width:d[z].width+"px",display:(v.hidden?"none":"")};a("<th>",{role:"gridcell"}).css(h).addClass("ui-first-th-"+c.p.direction).appendTo(l);p.find("td").eq(z).css({display:v.hidden?"none":""});j.style.width="";g=x(v.name,b.groupHeaders);if(g>=0){A=b.groupHeaders[g];r=A.numberOfColumns;q=A.titleText;for(u=0,g=0;g<r&&(z+g<s);g++){if(!n[z+g].hidden){u++}}o=a("<th>").attr({role:"columnheader"}).addClass("ui-state-default ui-th-column-header ui-th-"+c.p.direction).css({height:"30px","border-top":"0 none"}).html(q);if(u>0){o.attr("colspan",String(u))}if(c.p.headertitles){o.attr("title",o.text())}if(u===0){o.hide()}f.before(o);B.append(j);w=r-1}else{if(w===0){if(b.useColSpanStyle){f.attr("rowspan","2")}else{a("<th>",{role:"columnheader"}).addClass("ui-state-default ui-th-column-header ui-th-"+c.p.direction).css({display:v.hidden?"none":"","border-top":"0 none"}).insertBefore(f);B.append(j)}}else{B.append(j);w--}}}t=a(c).children("thead");t.prepend(l);B.insertAfter(e);y.append(t);if(b.useColSpanStyle){y.find("span.ui-jqgrid-resize").each(function(){var i=a(this).parent();if(i.is(":visible")){this.style.cssText="height: "+i.height()+"px !important; cursor: col-resize;"}});y.find("div.ui-jqgrid-sortable").each(function(){var i=a(this),C=i.parent();if(C.is(":visible")&&C.is(":has(span.ui-jqgrid-resize)")){i.css("top",(C.height()-i.outerHeight())/2+"px")}})}k=t.find("tr.jqg-first-row-header");a(c).bind("jqGridResizeStop.setGroupHeaders",function(D,C,i){k.find("th").eq(i).width(C-5)})})},navGrid:function(c,e,d,b){e=a.extend({add:true,addicon:"ui-icon-plus",del:true,delicon:"ui-icon-trash",position:"left",closeOnEscape:true,beforeRefresh:null,afterRefresh:null,cloneToTop:false,alertwidth:200,alertheight:"auto",alerttop:null,alertleft:null,alertzIndex:null},a.jgrid.nav,e||{});return this.each(function(){if(this.nav){return}var f={themodal:"alertmod_"+this.p.id,modalhead:"alerthd_"+this.p.id,modalcontent:"alertcnt_"+this.p.id},j=this,m,g;if(!j.grid||typeof c!=="string"){return}if(a("#"+f.themodal)[0]===undefined){if(!e.alerttop&&!e.alertleft){if(window.innerWidth!==undefined){e.alertleft=window.innerWidth;e.alerttop=window.innerHeight}else{if(document.documentElement!==undefined&&document.documentElement.clientWidth!==undefined&&document.documentElement.clientWidth!==0){e.alertleft=document.documentElement.clientWidth;e.alerttop=document.documentElement.clientHeight}else{e.alertleft=1024;e.alerttop=768}}e.alertleft=e.alertleft/2-parseInt(e.alertwidth,10)/2;e.alerttop=e.alerttop/2-25}}var n=1,k,l=function(){if(!a(this).hasClass("ui-state-disabled")){a(this).addClass("ui-state-hover")}},o=function(){a(this).removeClass("ui-state-hover")};if(e.cloneToTop&&j.p.toppager){n=2}for(k=0;k<n;k++){var p,r=a("<table cellspacing='0' cellpadding='0' border='0' class='ui-pg-table navtable' style='float:left;table-layout:auto;'><tbody><tr></tr></tbody></table>"),s="<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='ui-separator'></span></td>",h,q;if(k===0){h=c;q=j.p.id;if(h===j.p.toppager){q+="_top";n=1}}else{h=j.p.toppager;q=j.p.id+"_top"}if(j.p.direction==="rtl"){a(r).attr("dir","rtl").css("float","right")}if(e.add){d=d||{};p=a("<td class='ui-pg-button ui-corner-all'></td>");a(p).append("<div class='ui-pg-div'><span class='ui-icon "+e.addicon+"'></span>"+e.addtext+"</div>");a("tr",r).append(p);a(p,r).attr({title:e.addtitle||"",id:d.id||"add_"+q}).click(function(){if(!a(this).hasClass("ui-state-disabled")){if(a.isFunction(e.addfunc)){e.addfunc.call(j)}else{a(j).jqGrid("editGridRow","new",d)}}return false}).hover(l,o);p=null}if(e.del){p=a("<td class='ui-pg-button ui-corner-all'></td>");b=b||{};a(p).append("<div class='ui-pg-div'><span class='ui-icon "+e.delicon+"'></span>"+e.deltext+"</div>");a("tr",r).append(p);a(p,r).attr({title:e.deltitle||"",id:b.id||"del_"+q}).click(function(){if(!a(this).hasClass("ui-state-disabled")){var i;if(j.p.multiselect){i=j.p.selarrrow;if(i.length===0){i=null}}else{i=j.p.selrow}if(i){if(a.isFunction(e.delfunc)){e.delfunc.call(j,i)}else{a(j).jqGrid("delGridRow",i,b)}}else{}}return false}).hover(l,o);p=null}if(e.add||e.del){a("tr",r).append(s)}g=a(".ui-jqgrid").css("font-size")||"11px";a("body").append("<div id='testpg2' class='ui-jqgrid ui-widget ui-widget-content' style='font-size:"+g+";visibility:hidden;' ></div>");m=a(r).clone().appendTo("#testpg2").width();a("#testpg2").remove();a(h+"_"+e.position,h).append(r);if(j.p._nvtd){if(m>j.p._nvtd[0]){a(h+"_"+e.position,h).width(m);j.p._nvtd[0]=m}j.p._nvtd[1]=m}g=null;m=null;r=null;this.nav=true}})},GridNav:function(b){return this.each(function(){var h=this;if(!h.grid||(h.p.cellEdit!==true&&!b)){return}h.p.knv=h.p.id+"_kn";var g=a("<div style='position:fixed;top:0px;width:1px;height:1px;' tabindex='0'><div tabindex='-1' style='width:1px;height:1px;' id='"+h.p.knv+"'></div></div>"),e,d;function f(q,o,p){if(p.substr(0,1)==="v"){var i=a(h.grid.bDiv)[0].clientHeight,r=a(h.grid.bDiv)[0].scrollTop,s=h.rows[q].offsetTop+h.rows[q].clientHeight,m=h.rows[q].offsetTop;if(p==="vd"){if(s>=i){a(h.grid.bDiv)[0].scrollTop=a(h.grid.bDiv)[0].scrollTop+h.rows[q].clientHeight}}if(p==="vu"){if(m<r){a(h.grid.bDiv)[0].scrollTop=a(h.grid.bDiv)[0].scrollTop-h.rows[q].clientHeight}}}if(p==="h"){var l=a(h.grid.bDiv)[0].clientWidth,k=a(h.grid.bDiv)[0].scrollLeft,j=h.rows[q].cells[o].offsetLeft+h.rows[q].cells[o].clientWidth,n=h.rows[q].cells[o].offsetLeft;if(j>=l+parseInt(k,10)){a(h.grid.bDiv)[0].scrollLeft=a(h.grid.bDiv)[0].scrollLeft+h.rows[q].cells[o].clientWidth}else{if(n<k){a(h.grid.bDiv)[0].scrollLeft=a(h.grid.bDiv)[0].scrollLeft-h.rows[q].cells[o].clientWidth}}}}function c(m,j){var l,k;if(j==="lft"){l=m+1;for(k=m;k>=0;k--){if(h.p.colModel[k].hidden!==true){l=k;break}}}if(j==="rgt"){l=m-1;for(k=m;k<h.p.colModel.length;k++){if(h.p.colModel[k].hidden!==true){l=k;break}}}return l}a(g).insertBefore(h.grid.cDiv);a("#"+h.p.knv).focus().keydown(function(i){d=i.keyCode;if(h.p.direction==="rtl"){if(d===37){d=39}else{if(d===39){d=37}}}switch(d){case 38:if(h.p.iRow-1>0){f(h.p.iRow-1,h.p.iCol,"vu");a(h).jqGrid("editCell",h.p.iRow-1,h.p.iCol,false)}break;case 40:if(h.p.iRow+1<=h.rows.length-1){f(h.p.iRow+1,h.p.iCol,"vd");a(h).jqGrid("editCell",h.p.iRow+1,h.p.iCol,false)}break;case 37:if(h.p.iCol-1>=0){e=c(h.p.iCol-1,"lft");f(h.p.iRow,e,"h");a(h).jqGrid("editCell",h.p.iRow,e,false)}break;case 39:if(h.p.iCol+1<=h.p.colModel.length-1){e=c(h.p.iCol+1,"rgt");f(h.p.iRow,e,"h");a(h).jqGrid("editCell",h.p.iRow,e,false)}break;case 13:if(parseInt(h.p.iCol,10)>=0&&parseInt(h.p.iRow,10)>=0){a(h).jqGrid("editCell",h.p.iRow,h.p.iCol,true)}break;default:return true}return false})})},editCell:function(d,c,b){return this.each(function(){var i=this,m,j,g,k;if(!i.grid||i.p.cellEdit!==true){return}c=parseInt(c,10);i.p.selrow=i.rows[d].id;if(!i.p.knv){a(i).jqGrid("GridNav")}if(i.p.savedRow.length>0){if(b===true){if(d==i.p.iRow&&c==i.p.iCol){return}}a(i).jqGrid("saveCell",i.p.savedRow[0].id,i.p.savedRow[0].ic)}else{window.setTimeout(function(){a("#"+a.jgrid.jqID(i.p.knv)).attr("tabindex","-1").focus()},0)}k=i.p.colModel[c];m=k.name;if(m==="subgrid"||m==="cb"||m==="rn"){return}g=a("td:eq("+c+")",i.rows[d]);if(k.editable===true&&b===true&&!g.hasClass("not-editable-cell")){if(parseInt(i.p.iCol,10)>=0&&parseInt(i.p.iRow,10)>=0){a("td:eq("+i.p.iCol+")",i.rows[i.p.iRow]).removeClass("edit-cell ui-state-highlight");a(i.rows[i.p.iRow]).removeClass("selected-row ui-state-hover")}a(g).addClass("edit-cell ui-state-highlight");a(i.rows[d]).addClass("selected-row ui-state-hover");try{j=a.unformat.call(i,g,{rowId:i.rows[d].id,colModel:k},c)}catch(l){j=(k.edittype&&k.edittype==="textarea")?a(g).text():a(g).html()}if(i.p.autoencode){j=a.jgrid.htmlDecode(j)}if(!k.edittype){k.edittype="text"}i.p.savedRow.push({id:d,ic:c,name:m,v:j});if(j==="&nbsp;"||j==="&#160;"||(j.length===1&&j.charCodeAt(0)===160)){j=""}if(a.isFunction(i.p.formatCell)){var h=i.p.formatCell.call(i,i.rows[d].id,m,j,d,c);if(h!==undefined){j=h}}a(i).triggerHandler("jqGridBeforeEditCell",[i.rows[d].id,m,j,d,c]);if(a.isFunction(i.p.beforeEditCell)){i.p.beforeEditCell.call(i,i.rows[d].id,m,j,d,c)}var f=a.extend({},k.editoptions||{},{id:d+"_"+m,name:m});var e=a.jgrid.createEl.call(i,g,k.edittype,f,j,true,a.extend({},a.jgrid.ajaxOptions,i.p.ajaxSelectOptions||{}));a(g).html("").append(e).attr("tabindex","0");a.jgrid.bindEv.call(i,e,f);window.setTimeout(function(){a(e).focus()},0);a("input, select, textarea",g).bind("keydown",function(n){if(n.keyCode===27){if(a("input.hasDatepicker",g).length>0){if(a(".ui-datepicker").is(":hidden")){a(i).jqGrid("restoreCell",d,c)}else{a("input.hasDatepicker",g).datepicker("hide")}}else{a(i).jqGrid("restoreCell",d,c)}}if(n.keyCode===13){a(i).jqGrid("saveCell",d,c);return false}if(n.keyCode===9){if(!i.grid.hDiv.loading){if(n.shiftKey){a(i).jqGrid("prevCell",d,c)}else{a(i).jqGrid("nextCell",d,c)}}else{return false}}n.stopPropagation()});a(i).triggerHandler("jqGridAfterEditCell",[i.rows[d].id,m,j,d,c]);if(a.isFunction(i.p.afterEditCell)){i.p.afterEditCell.call(i,i.rows[d].id,m,j,d,c)}}else{if(parseInt(i.p.iCol,10)>=0&&parseInt(i.p.iRow,10)>=0){a("td:eq("+i.p.iCol+")",i.rows[i.p.iRow]).removeClass("edit-cell ui-state-highlight");a(i.rows[i.p.iRow]).removeClass("selected-row ui-state-hover")}g.addClass("edit-cell ui-state-highlight");a(i.rows[d]).addClass("selected-row ui-state-hover");j=g.html().replace(/\&#160\;/ig,"");a(i).triggerHandler("jqGridSelectCell",[i.rows[d].id,m,j,d,c]);if(a.isFunction(i.p.onSelectCell)){i.p.onSelectCell.call(i,i.rows[d].id,m,j,d,c)}}i.p.iCol=c;i.p.iRow=d})},saveCell:function(c,b){return this.each(function(){var k=this,n;if(!k.grid||k.p.cellEdit!==true){return}if(k.p.savedRow.length>=1){n=0}else{n=null}if(n!==null){var h=a("td:eq("+b+")",k.rows[c]),s,p,r=k.p.colModel[b],t=r.name,g=a.jgrid.jqID(t);switch(r.edittype){case"select":if(!r.editoptions.multiple){s=a("#"+c+"_"+g+" option:selected",k.rows[c]).val();p=a("#"+c+"_"+g+" option:selected",k.rows[c]).text()}else{var d=a("#"+c+"_"+g,k.rows[c]),f=[];s=a(d).val();if(s){s.join(",")}else{s=""}a("option:selected",d).each(function(e,u){f[e]=a(u).text()});p=f.join(",")}if(r.formatter){p=s}break;case"checkbox":var i=["Yes","No"];if(r.editoptions){i=r.editoptions.value.split(":")}s=a("#"+c+"_"+g,k.rows[c]).is(":checked")?i[0]:i[1];p=s;break;case"password":case"text":case"textarea":case"button":s=a("#"+c+"_"+g,k.rows[c]).val();p=s;break;case"textEditor":case"numberEditor":case"comboBox":case"checkListBox":case"dict":case"datePicker":s=h.val();p=s;break;case"custom":try{if(r.editoptions&&a.isFunction(r.editoptions.custom_value)){s=r.editoptions.custom_value.call(k,a(".customelement",h),"get");if(s===undefined){throw"e2"}else{p=s}}else{throw"e1"}}catch(o){if(o==="e1"){a.jgrid.info_dialog(a.jgrid.errors.errcap,"function 'custom_value' "+a.jgrid.edit.msg.nodefined,a.jgrid.edit.bClose)}if(o==="e2"){a.jgrid.info_dialog(a.jgrid.errors.errcap,"function 'custom_value' "+a.jgrid.edit.msg.novalue,a.jgrid.edit.bClose)}else{a.jgrid.info_dialog(a.jgrid.errors.errcap,o.message,a.jgrid.edit.bClose)}}break}if(p!==k.p.savedRow[n].v){var m=a(k).triggerHandler("jqGridBeforeSaveCell",[k.rows[c].id,t,s,c,b]);if(m){s=m;p=m}if(a.isFunction(k.p.beforeSaveCell)){var q=k.p.beforeSaveCell.call(k,k.rows[c].id,t,s,c,b);if(q){s=q;p=q}}var j=a.jgrid.checkValues.call(k,s,b);if(j[0]===true){var l=a(k).triggerHandler("jqGridBeforeSubmitCell",[k.rows[c].id,t,s,c,b])||{};if(a.isFunction(k.p.beforeSubmitCell)){l=k.p.beforeSubmitCell.call(k,k.rows[c].id,t,s,c,b);if(!l){l={}}}if(k.p.cellsubmit==="clientArray"){a(h).empty();a(k).jqGrid("setCell",k.rows[c].id,b,p,false,false,true);a(h).addClass("dirty-cell");a(k.rows[c]).addClass("edited");a(k).triggerHandler("jqGridAfterSaveCell",[k.rows[c].id,t,s,c,b]);if(a.isFunction(k.p.afterSaveCell)){k.p.afterSaveCell.call(k,k.rows[c].id,t,s,c,b)}k.p.savedRow.splice(0,1)}}else{try{window.setTimeout(function(){a.jgrid.info_dialog(a.jgrid.errors.errcap,s+" "+j[1],a.jgrid.edit.bClose)},100);a(k).jqGrid("restoreCell",c,b)}catch(o){}}}else{a(k).jqGrid("restoreCell",c,b)}}window.setTimeout(function(){a("#"+a.jgrid.jqID(k.p.knv)).attr("tabindex","-1").focus()},0)})},restoreCell:function(c,b){return this.each(function(){var f=this,d;if(!f.grid||f.p.cellEdit!==true){return}if(f.p.savedRow.length>=1){d=0}else{d=null}if(d!==null){var e=a("td:eq("+b+")",f.rows[c]);a(e).empty().attr("tabindex","-1");a(f).jqGrid("setCell",f.rows[c].id,b,f.p.savedRow[d].v,false,false,true);a(f).triggerHandler("jqGridAfterRestoreCell",[f.rows[c].id,f.p.savedRow[d].v,c,b]);if(a.isFunction(f.p.afterRestoreCell)){f.p.afterRestoreCell.call(f,f.rows[c].id,f.p.savedRow[d].v,c,b)}f.p.savedRow.splice(0,1)}window.setTimeout(function(){a("#"+f.p.knv).attr("tabindex","-1").focus()},0)})},getRowData:function(f){var e={},c,g=false,b,d=0;this.each(function(){var j=this,h,i;if(f===undefined){g=true;c=[];b=j.rows.length}else{i=a(j).jqGrid("getGridRowById",f);if(!i){return e}b=2}while(d<b){if(g){i=j.rows[d]}if(a(i).hasClass("jqgrow")){a('td[role="gridcell"]',i).each(function(k){h=j.p.colModel[k].name;if(h!=="cb"&&h!=="subgrid"&&h!=="rn"){if(j.p.treeGrid===true&&h===j.p.ExpandColumn){e[h]=a.jgrid.htmlDecode(a("span:first",this).html())}else{try{e[h]=a.unformat.call(j,this,{rowId:i.id,colModel:j.p.colModel[k]},k)}catch(l){e[h]=a.jgrid.htmlDecode(a(this).html())}}}});if(g){c.push(e);e={}}}d++}});return c||e}})})(jQuery);(function(a){a.extend(a.jgrid,{checkValues:function(c,n,p,h){var f,j,q,d,l,k=this,o=k.p.colModel;if(p===undefined){if(typeof n==="string"){for(j=0,l=o.length;j<l;j++){if(o[j].name===n){f=o[j].editrules;n=j;if(o[j].formoptions!=null){q=o[j].formoptions.label}break}}}else{if(n>=0){f=o[n].editrules}}}else{f=p;q=h===undefined?"_":h}if(f){if(!q){q=k.p.colNames!=null?k.p.colNames[n]:o[n].label}if(f.required===true){if(a.jgrid.isEmpty(c)){return[false,q+": "+a.jgrid.edit.msg.required,""]}}var e=f.required===false?false:true;if(f.number===true){if(!(e===false&&a.jgrid.isEmpty(c))){if(isNaN(c)){return[false,q+": "+a.jgrid.edit.msg.number,""]}}}if(f.minValue!==undefined&&!isNaN(f.minValue)){if(parseFloat(c)<parseFloat(f.minValue)){return[false,q+": "+a.jgrid.edit.msg.minValue+" "+f.minValue,""]}}if(f.maxValue!==undefined&&!isNaN(f.maxValue)){if(parseFloat(c)>parseFloat(f.maxValue)){return[false,q+": "+a.jgrid.edit.msg.maxValue+" "+f.maxValue,""]}}var b;if(f.email===true){if(!(e===false&&a.jgrid.isEmpty(c))){b=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i;if(!b.test(c)){return[false,q+": "+a.jgrid.edit.msg.email,""]}}}if(f.integer===true){if(!(e===false&&a.jgrid.isEmpty(c))){if(isNaN(c)){return[false,q+": "+a.jgrid.edit.msg.integer,""]}if((c%1!==0)||(c.indexOf(".")!==-1)){return[false,q+": "+a.jgrid.edit.msg.integer,""]}}}if(f.date===true){if(!(e===false&&a.jgrid.isEmpty(c))){if(o[n].formatoptions&&o[n].formatoptions.newformat){d=o[n].formatoptions.newformat;if(a.jgrid.formatter.date.masks.hasOwnProperty(d)){d=a.jgrid.formatter.date.masks[d]}}else{d=o[n].datefmt||"Y-m-d"}if(!a.jgrid.checkDate(d,c)){return[false,q+": "+a.jgrid.edit.msg.date+" - "+d,""]}}}if(f.time===true){if(!(e===false&&a.jgrid.isEmpty(c))){if(!a.jgrid.checkTime(c)){return[false,q+": "+a.jgrid.edit.msg.date+" - hh:mm (am/pm)",""]}}}if(f.url===true){if(!(e===false&&a.jgrid.isEmpty(c))){b=/^(((https?)|(ftp)):\/\/([\-\w]+\.)+\w{2,3}(\/[%\-\w]+(\.\w{2,})?)*(([\w\-\.\?\\\/+@&#;`~=%!]*)(\.\w{2,})?)*\/?)/i;if(!b.test(c)){return[false,q+": "+a.jgrid.edit.msg.url,""]}}}if(f.custom===true){if(!(e===false&&a.jgrid.isEmpty(c))){if(a.isFunction(f.custom_func)){var m=f.custom_func.call(k,c,q,n);return a.isArray(m)?m:[false,a.jgrid.edit.msg.customarray,""]}return[false,a.jgrid.edit.msg.customfcheck,""]}}}return[true,"",""]},bindEv:function(c,b){var d=this;if(a.isFunction(b.dataInit)){b.dataInit.call(d,c,b)}if(b.dataEvents){a.each(b.dataEvents,function(){if(this.data!==undefined){a(c).bind(this.type,this.data,this.fn)}else{a(c).bind(this.type,this.fn)}})}},createEl:function(j,f,h,z,n,x){var y="",t=this;function v(F,E,i){var e=["dataInit","dataEvents","dataUrl","buildSelect","sopt","searchhidden","defaultValue","attr","custom_element","custom_value"];if(i!==undefined&&a.isArray(i)){a.merge(e,i)}a.each(E,function(G,H){if(a.inArray(G,e)===-1){a(F).attr(G,H)}});if(!E.hasOwnProperty("id")){a(F).attr("id",a.jgrid.randId())}}switch(f){case"textarea":y=document.createElement("textarea");if(n){if(!h.cols){a(y).css({width:"100%",height:"100%"})}}else{if(!h.cols){h.cols=20}}if(!h.rows){h.rows=2}if(z==="&nbsp;"||z==="&#160;"||(z.length===1&&z.charCodeAt(0)===160)){z=""}y.value=z;v(y,h);a(y).attr({role:"textbox",multiline:"true"});break;case"checkbox":y=document.createElement("input");y.type="checkbox";if(!h.value){var D=(z+"").toLowerCase();if(D.search(/(false|f|0|no|n|off|undefined)/i)<0&&D!==""){y.checked=true;y.defaultChecked=true;y.value=z}else{y.value="on"}a(y).attr("offval","off")}else{var r=h.value.split(":");if(z===r[0]){y.checked=true;y.defaultChecked=true}y.value=r[0];a(y).attr("offval",r[1])}v(y,h,["value"]);a(y).attr("role","checkbox");break;case"select":y=document.createElement("select");y.setAttribute("role","select");var d,k=[];if(h.multiple===true){d=true;y.multiple="multiple";a(y).attr("aria-multiselectable","true")}else{d=false}if(h.dataUrl!==undefined){var m=h.name?String(h.id).substring(0,String(h.id).length-String(h.name).length-1):String(h.id),g=h.postData||x.postData;if(t.p&&t.p.idPrefix){m=a.jgrid.stripPref(t.p.idPrefix,m)}a.ajax(a.extend({url:a.isFunction(h.dataUrl)?h.dataUrl.call(t,m,z,String(h.name)):h.dataUrl,type:"GET",dataType:"html",data:a.isFunction(g)?g.call(t,m,z,String(h.name)):g,context:{elem:y,options:h,vl:z},success:function(I){var i=[],H=this.elem,G=this.vl,E=a.extend({},this.options),F=E.multiple===true,e=a.isFunction(E.buildSelect)?E.buildSelect.call(t,I):I;if(typeof e==="string"){e=a(a.trim(e)).html()}if(e){a(H).append(e);v(H,E,g?["postData"]:undefined);if(E.size===undefined){E.size=F?3:1}if(F){i=G.split(",");i=a.map(i,function(J){return a.trim(J)})}else{i[0]=a.trim(G)}setTimeout(function(){a("option",H).each(function(J){if(J===0&&H.multiple){this.selected=false}a(this).attr("role","option");if(a.inArray(a.trim(a(this).text()),i)>-1||a.inArray(a.trim(a(this).val()),i)>-1){this.selected="selected"}})},0)}}},x||{}))}else{if(h.value){var s;if(h.size===undefined){h.size=d?3:1}if(d){k=z.split(",");k=a.map(k,function(e){return a.trim(e)})}if(typeof h.value==="function"){h.value=h.value()}var u,q,l,o=h.separator===undefined?":":h.separator,A=h.delimiter===undefined?";":h.delimiter;if(typeof h.value==="string"){u=h.value.split(A);for(s=0;s<u.length;s++){q=u[s].split(o);if(q.length>2){q[1]=a.map(q,function(i,e){if(e>0){return i}}).join(o)}l=document.createElement("option");l.setAttribute("role","option");l.value=q[0];l.innerHTML=q[1];y.appendChild(l);if(!d&&(a.trim(q[0])===a.trim(z)||a.trim(q[1])===a.trim(z))){l.selected="selected"}if(d&&(a.inArray(a.trim(q[1]),k)>-1||a.inArray(a.trim(q[0]),k)>-1)){l.selected="selected"}}}else{if(typeof h.value==="object"){var c=h.value,C;for(C in c){if(c.hasOwnProperty(C)){l=document.createElement("option");l.setAttribute("role","option");l.value=C;l.innerHTML=c[C];y.appendChild(l);if(!d&&(a.trim(C)===a.trim(z)||a.trim(c[C])===a.trim(z))){l.selected="selected"}if(d&&(a.inArray(a.trim(c[C]),k)>-1||a.inArray(a.trim(C),k)>-1)){l.selected="selected"}}}}}v(y,h,["value"])}}break;case"text":var p=new YIUI.Control.TextEditor(h);p.render(j);p.setValue(z);y=a(p.el).find("input")[0];y.type=f;a(y).select();v(y,h);if(n){if(!h.size){a(y).css({width:"100%",height:"100%"})}}a(y).attr("role","textbox");break;case"password":case"button":var B;if(f==="button"){B="button"}else{B="textbox"}y=document.createElement("input");y.type=f;y.value=z;v(y,h);if(f!=="button"){if(n){if(!h.size){a(y).css({width:"100%",height:"100%"})}}else{if(!h.size){h.size=20}}}a(y).attr("role",B);break;case"image":case"file":y=document.createElement("input");y.type=f;v(y,h);break;case"custom":y=document.createElement("span");try{if(a.isFunction(h.custom_element)){var b=h.custom_element.call(t,z,h);if(b){b=a(b).addClass("customelement").attr({id:h.id,name:h.name});a(y).empty().append(b)}else{throw"e2"}}else{throw"e1"}}catch(w){if(w==="e1"){a.jgrid.info_dialog(a.jgrid.errors.errcap,"function 'custom_element' "+a.jgrid.edit.msg.nodefined,a.jgrid.edit.bClose)}if(w==="e2"){a.jgrid.info_dialog(a.jgrid.errors.errcap,"function 'custom_element' "+a.jgrid.edit.msg.novalue,a.jgrid.edit.bClose)}else{a.jgrid.info_dialog(a.jgrid.errors.errcap,typeof w==="string"?w:w.message,a.jgrid.edit.bClose)}}break}return y}})})(jQuery);(function(a){a.fmatter={};a.extend(a.fmatter,{isBoolean:function(b){return typeof b==="boolean"},isObject:function(b){return(b&&(typeof b==="object"||a.isFunction(b)))||false},isString:function(b){return typeof b==="string"},isNumber:function(b){return typeof b==="number"&&isFinite(b)},isValue:function(b){return(this.isObject(b)||this.isString(b)||this.isNumber(b)||this.isBoolean(b))},isEmpty:function(b){if(!this.isString(b)&&this.isValue(b)){return false}if(!this.isValue(b)){return true}b=a.trim(b).replace(/\&nbsp\;/ig,"").replace(/\&#160\;/ig,"");return b===""}});a.fn.fmatter=function(g,h,f,b,c){var d=h;f=a.extend({},a.jgrid.formatter,f);try{d=a.fn.fmatter[g].call(this,h,f,b,c)}catch(e){}return d}})(jQuery);