(function(a){a.fn.extend({spinit:function(b){var c=a.extend({min:0,max:100,initValue:0,callback:null,stepInc:1,pageInc:10,width:100,height:30,btnWidth:10,mask:""},b);return this.each(function(){var t=38;var p=40;var j=33;var i=34;var l=false;var q=false;var f;var o="none";var s=false;var r=Math.max(c.initValue,c.min);var e=a(this).val(r).css("width",(c.width)+"px").css("height",c.height+"px").addClass("smartspinner");k(r);if(c.mask!=""){e.val(c.mask)}a.fn.reset=function(u){if(isNaN(u)){u=0}r=Math.max(u,c.min);a(this).val(r);k(r)};function d(u){o=u;s=false;switch(u){case"up":n("up");break;case"down":n("down");break;case"pup":s=true;n("up");break;case"pdown":s=true;n("down");break;case"none":n("");break}}e.click(function(u){l=true;s=false;clearInterval(f)});e.mousemove(function(u){if(u.pageX>(e.offset().left+c.width)-c.btnWidth-4){if(u.pageY<e.offset().top+c.height/2){d("up")}else{d("down")}}else{d("none")}});e.mousedown(function(u){s=false;clearInterval(f);f=setInterval(g,100)});e.mouseup(function(u){l=false;s=false;clearInterval(f)});e.mouseleave(function(u){d("none");if(c.mask!=""){e.val(c.mask)}});e.keydown(function(u){switch(u.which){case t:d("up");g();break;case p:d("down");g();break;case j:d("pup");g();break;case i:d("pdown");g();break;default:d("none");break}});e.keyup(function(u){d("none")});e.keypress(function(w){var v=m();if(v!=""){v=e.val().replace(v,"");e.val(v)}if(w.which>=48&&w.which<=57){var u=parseFloat(e.val()+(w.which-48));if(u>=c.min&&u<=c.max){r=u;k(r)}else{w.preventDefault()}}});e.blur(function(){if(c.mask==""){if(e.val()==""){e.val(c.min)}}else{e.val(c.mask)}});e.bind("mousewheel",function(u){if(u.wheelDelta>=120){d("down");g()}else{if(u.wheelDelta<=-120){d("up");g()}}u.preventDefault()});if(this.addEventListener){this.addEventListener("DOMMouseScroll",function(u){if(u.detail>0){d("down");g()}else{if(u.detail<0){d("up");g()}}u.preventDefault()},false)}function k(u){if(c.callback!=null){c.callback(u)}}function m(){var v=e.get(0).selectionStart;var u=e.get(0).selectionEnd;var w=document.selection;if(w&&w.createRange().text.length!=0){return w.createRange().text}else{if(!w&&e.val().substring(v,u).length!=0){return e.val().substring(v,u)}}return""}function h(v,u){if(v>=c.min&&v<=c.max){r=u}e.val(r)}function g(){r=parseInt(e.val());if(o=="up"){r+=c.stepInc;if(r>c.max){r=c.max}h(parseFloat(e.val()),r)}if(o=="down"){r-=c.stepInc;if(r<c.min){r=c.min}h(parseFloat(e.val()),r)}if(o=="pup"){r+=c.pageInc;if(r>c.max){r=c.max}h(parseFloat(e.val()),r)}if(o=="pdown"){r-=c.pageInc;if(r<c.min){r=c.min}h(parseFloat(e.val()),r)}k(r)}function n(u){e.removeClass("up").removeClass("down");if(u!=""){e.addClass(u)}}})}})})(jQuery);