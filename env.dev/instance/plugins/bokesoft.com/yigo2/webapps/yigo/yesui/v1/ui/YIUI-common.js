var Lang=(function(){var a=new Object();a.impl=function(b,d){for(var c in d){b.prototype[c]=d[c];}};a.assign=function(d,b){for(var c in b){d[c]=b[c];}};return a;})();function HashMap(){this.size=0;this.table=new Object();}Lang.impl(HashMap,{put:function(a,c){var b=false;if(!this.containsKey(a)){++this.size;b=true;}this.table[a]=c;return b;},get:function(a){return this.containsKey(a)?this.table[a]:null;},remove:function(a){if(this.containsKey(a)&&(delete this.table[a])){--this.size;}},containsKey:function(a){return a in this.table;},keys:function(){var a=new Array();for(var b in this.table){a.push(b);}return a;},empty:function(){return this.size==0;},clear:function(){this.table=new Object();}});function HashMapIgnoreCase(){this.size=0;this.table=new Object();}Lang.impl(HashMapIgnoreCase,{put:function(a,c){a=a.toLowerCase();var b=false;if(!this.containsKey(a)){++this.size;b=true;}this.table[a]=c;return b;},get:function(a){a=a.toLowerCase();return this.containsKey(a)?this.table[a]:null;},remove:function(a){a=a.toLowerCase();if(this.containsKey(a)&&(delete this.table[a])){--this.size;}},containsKey:function(a){a=a.toLowerCase();return a in this.table;},keys:function(){var a=new Array();for(var b in this.table){a.push(b);}return a;},empty:function(){return this.size==0;},clear:function(){this.table=new Object();}});function Stack(){this.table=new Array();}Lang.impl(Stack,{push:function(a){this.table.push(a);},pop:function(){return this.table.pop();},peek:function(){return this.table[this.table.length-1];},empty:function(){return this.table.length==0;},values:function(){return this.table;},size:function(){return this.table.length;}});var DataType=(function(){var a={INT:1001,STRING:1002,DATE:1003,DATETIME:1004,NUMERIC:1005,DOUBLE:1006,FLOAT:1007,BINARY:1008,BOOLEAN:1009,LONG:1010};return a;})();var DynamicCell=(function(){var a={getCellTypeTable:function(){if(a.CellTypeTable==null){var b={cmd:"GetCellTypeTable",service:"PureMeta"};a.CellTypeTable=Svr.Request.getSyncData(Svr.SvrMgr.ServletURL,b);}return a.CellTypeTable;}};a.CellTypeTable=null;return a;})();var DataDef=DataDef||{};(function(){Lang.assign(DataDef,{R_Normal:0,R_New:1,R_Modified:2,R_Deleted:3,D_Normal:0,D_New:1,D_Modified:2,D_Deleted:3,D_Obj:1,D_ObjDtl:2});DataDef.BkmkMap=function(){this.tbs=new Array();};Lang.impl(DataDef.BkmkMap,{put:function(b,a){if(b>=this.tbs.length){this.tbs.length=b+1;}this.tbs[b]=a;},get:function(a){if(a<this.tbs.length){return this.tbs[a];}return undefined;},remove:function(a){this.tbs[a]=undefined;},clear:function(){this.tbs=new Array();}});DataDef.ColInfo=function(c,d,f,b,a,e){this.key=c;this.type=d;this.userType=f;this.accessControl=b;this.defaultValue=a;this.isPrimary=e;};Lang.impl(DataDef.ColInfo,{setKey:function(a){this.key=a;},getKey:function(){return this.key;},setType:function(a){this.type=a;},getType:function(){return this.type;},setUserType:function(a){this.userType=a;},getUserType:function(){return this.userType;},setAccessControl:function(a){this.accessControl=a;},getAccessControl:function(){return this.accessControl;},setDefaultValue:function(a){this.defaultValue=a;},getDefaultValue:function(){return this.defaultValue;},setPrimary:function(a){this.isPrimary=a;},isPrimary:function(){return this.isPrimary;}});DataDef.Row=function(a){this.bkmk=-1;this.state=0;this.orgVals=null;this.vals=new Array(a);};DataDef.DataTable=function(){this.key="";this.allRows=new Array();this.rows=new Array();this.cols=new Array();this.bkmks=new DataDef.BkmkMap();this.pos=-1;this.bkmkSeed=0;this.tableMode=-1;};Lang.impl(DataDef.DataTable,{clone:function(){var a=new DataDef.DataTable();a.key=this.key;a.pos=this.pos;a.bkmkSeed=this.bkmkSeed;a.bkmks=$.extend(true,{},this.bkmks);a.allRows=$.extend(true,[],this.allRows);a.rows=$.extend(true,[],this.rows);a.cols=$.extend(true,[],this.cols);return a;},addCol:function(d,e,g,b,a,f){var h=new DataDef.ColInfo(d,e,g,b,a,f);this.cols.push(h);},getCol:function(a){return this.cols[a];},getColByKey:function(a){return this.getCol(this.indexByKey(a));},addRow:function(b){var a=new DataDef.Row(this.cols.length);if(b){setDefaultValue=function(k,m){for(var f=0,e=k.length;f<e;++f){var d=k[f];var j=d.getDefaultValue();var h=d.getType();var g=d.getKey();if($.isDefined(j)&&j!=null){var c=YIUI.TypeConvertor.toDataType(h,j);m.vals[f]=c;}else{if((h==YIUI.DataType.INT||h==YIUI.DataType.LONG||h==YIUI.DataType.NUMERIC)&&(YIUI.SystemField.OID_SYS_KEY!=g&&YIUI.SystemField.SOID_SYS_KEY!=g&&YIUI.SystemField.POID_SYS_KEY!=g&&YIUI.SystemField.VERID_SYS_KEY!=g&&YIUI.SystemField.DVERID_SYS_KEY!=g)){m.vals[f]=0;}}}};setDefaultValue(this.cols,a);}a.bkmk=this.bkmkSeed++;a.state=DataDef.R_New;this.rows.push(a);this.allRows.push(a);this.bkmks.put(a.bkmk,this.rows.length-1);this.pos=this.rows.length-1;},size:function(){return this.rows.length;},setPos:function(a){this.pos=a;},pos:function(){return this.pos;},setByBkmk:function(b){var a=this.bkmks.get(b);if(a!=undefined){this.pos=a;}else{this.pos=-1;}},getBkmk:function(){return this.rows[this.pos].bkmk;},getParentBkmk:function(){return this.rows[this.pos].parentBkmk;},setParentBkmk:function(a){this.rows[this.pos].parentBkmk=a;},beforeFirst:function(){this.pos=-1;},afterLast:function(){this.pos=this.rows.length;},next:function(){if(this.pos==this.rows.length){return false;}++this.pos;return this.pos!=this.rows.length;},previous:function(){if(this.pos==-1){return false;}--this.pos;return this.pos!=-1;},first:function(){if(this.rows.length==0){return false;}this.pos=0;return true;},last:function(){if(this.rows.length==0){return false;}this.pos=this.rows.length-1;return true;},getRowCount:function(){return this.rows.length;},isBeforeFirst:function(){return this.pos==-1;},isAfterLast:function(){return this.pos==this.rows.length;},isFirst:function(){return this.rows.length!=0&&this.pos==0;},isLast:function(){return this.rows.length!=0&&this.pos==this.rows.length-1;},isValid:function(){return this.rows.length!=0&this.pos>=0&&this.pos<this.rows.length;},get:function(a){return this.rows[this.pos].vals[a];},set:function(a,d){var c=this.rows[this.pos];var b=c.state;if(b==DataDef.R_Normal){c.orgVals=$.extend([],c.vals);c.state=DataDef.R_Modified;}c.vals[a]=d;},setState:function(a){var b=this.rows[this.pos];b.state=a;},indexByKey:function(d){var e=-1;for(var c=0,a=this.cols.length;c<a;++c){var b=this.cols[c];if(b.key.toLowerCase()==d.toLowerCase()){e=c;break;}}return e;},getByKey:function(b){var a=this.indexByKey(b);if(a==-1){return null;}return this.get(a);},setByKey:function(b,c){var a=this.indexByKey(b);if(a==-1){return;}this.set(a,c);},setNew:function(){this.rows=[];this.bkmks.clear();this.pos=-1;this.rows=this.allRows;for(var b=0,a=this.rows.length;b<a;b++){var c=this.rows[b];this.bkmks.put(c.bkmk,b);c.state=DataDef.R_New;c.orgVals=[];}},delRow:function(b){if(b==null){b=this.pos;}var f=this.rows[b],e=this.rows.length;this.rows.splice(b,1);if(f.state==DataDef.R_New){for(var d=0;d<this.allRows.length;d++){if(f==this.allRows[d]){this.allRows.splice(d,1);break;}}this.bkmks.remove(f.bkmk);if(this.pos>b){this.pos--;}}else{f.state=DataDef.R_Deleted;this.bkmks.remove(f.bkmk);if(this.pos>b){this.pos--;}}var c=this.rows.length;if(c!=e){for(var d=0,a=this.rows.length;d<a;d++){f=this.rows[d];this.bkmks.put(f.bkmk,d);}}},batchUpdate:function(){var a=this.allRows.length;for(var b=a-1;b>=0;--b){var c=this.allRows[b];if(c.state==DataDef.R_Deleted){this.allRows.splice(b,1);}else{c.state=DataDef.R_Normal;c.orgVals=null;}}}});DataDef.Document=function(){this.tbls=new Array();this.maps=new HashMap();this.oid=-1;this.poid=-1;this.verid=-1;this.dverid=-1;this.state=0;this.docType=DataDef.D_Obj;this.expData=new HashMap();this.expDataType=new HashMap();this.expDataClass=new HashMap();this.mainTableKey="";};Lang.impl(DataDef.Document,{isNew:function(){return this.state==YIUI.DocType.NEW;},getExpDataInfo:function(a){return{data:this.expData[a],dataType:this.expDataType[a],dataClass:this.expDataClass[a]};},getExpData:function(a){return this.expData[a];},putExpandData:function(a,b){this.expData[a]=b;},add:function(a,b){this.tbls.push(b);this.maps.put(a,b);},remove:function(b){var c=this.maps.get(b);this.maps.remove(b);for(var a=this.tbls.length-1;a>=0;--a){if(this.tbls[a]==c){this.tbls.splice(a,1);break;}}},get:function(a){return this.tbls[a];},setByKey:function(b,c){this.maps.put(b,c);for(var a=this.tbls.length-1;a>=0;--a){if(this.tbls[a].key==b){this.tbls.splice(a,1,c);break;}}},getByParentKey:function(c){var b=[],e;for(var d=0,a=this.tbls.length;d<a;d++){e=this.tbls[d];if(e.parentKey==c){b.push(e);}}return b;},getByKey:function(a){return this.maps.get(a);},clear:function(){this.tbls.length=0;this.maps.clear();},setDocType:function(a){this.docType=a;},setModified:function(){this.state=DataDef.D_Modified;},batchUpdate:function(){for(var c=0,a=this.tbls.length;c<a;++c){var b=this.tbls[c];b.batchUpdate();}},clone:function(){var b=new DataDef.Document();b.oid=this.oid;b.poid=this.poid;b.verid=this.verid;b.dverid=this.dverid;b.state=this.state;b.docType=this.docType;b.mainTableKey=this.mainTableKey;b.tbls=[];b.maps=new HashMap();for(var c=0,d,a=this.tbls.length;c<a;c++){d=this.tbls[c].clone();b.tbls.push(d);b.maps.put(d.key,d);}b.expData=$.extend(true,{},this.expData);b.expDataType=$.extend(true,{},this.expDataType);b.expDataClass=$.extend(true,{},this.expDataClass);return b;}});DataDef.Item=function(){this.itemKey=null;this.oid=0;this.nodeType=0;this.enable=0;this.caption=null;this.mainTableKey=null;this.itemTables={};};Lang.impl(DataDef.Item,{toItemData:function(){var a={};a.itemKey=this.itemKey;a.oid=this.oid;return a;},getValue:function(b,e){if(!e){e=this.mainTableKey;}var d=this.itemTables[e];var f=null;if(d&&d.itemRows.length>0){if(d.tableMode==0){f=d.itemRows[0][b];}else{var a=d.itemRows.length;f=new Array(a);for(var c=0;c<a;c++){f.push(d.itemRows[c][b]);}}}return f;}});})();var YIUI=YIUI||{};YIUI.CONTROLTYPE={PANEL:0,COLUMNLAYOUTPANEL:1,GRIDLAYOUTPANEL:2,SPLITPANEL:3,PAGEPANEL:4,TABPANEL:5,HTMLPANEL:6,FLOWLAYOUTPANEL:7,BORDERLAYOUTPANEL:8,FLEXFLOWLAYOUTPANEL:9,TABLELAYOUTPANEL:10,FLUIDTABLELAYOUTPANEL:12,BUTTON:200,CHECKBOX:201,CHECKLISTBOX:202,COLORPICKER:203,COMBOBOX:204,DATEPICKER:205,DICT:206,FONTPICKER:207,HYPERLINK:208,LABEL:209,NUMBEREDITOR:210,IMAGE:211,PROGRESSBAR:212,RADIOBUTTON:213,TEXTBUTTON:214,TEXTEDITOR:215,LISTVIEW:216,GRID:217,IMAGELIST:218,MASKEDITOR:219,TREEVIEW:220,MENUBAR:221,TREEMENUBAR:222,TOOLBAR:223,CALENDAR:224,RICHEDITOR:225,CHART:226,MAP:227,CONTAINER:228,STATUSBAR:229,BUTTON_GROUP:230,SEPARATOR:231,TOGGLEBUTTON:232,WEBBROWSER:233,PASSWORDEDITOR:234,TREEMENU:235,SPLITBUTTON:236,DROPDOWNBUTTON:237,EMBEDSUB:238,BPM_GRAPH:239,UPLOADBUTTON:240,DYNAMICDICT:241,COMPDICT:242,STATELIST:243,DICTVIEW:244,ATTACHMENT:245,TEXTAREA:246,UTCDATEPICKER:254,DYNAMIC:20001};YIUI.SECONDARYTYPE={NORMAL:2,DICT:3,COMPDICT:4,CHAINDICT:5};YIUI.COMBOBOX_SOURCETYPE={ITEMS:0,FORMULA:1,QUERY:2,STATUS:3,PARAGROUP:4};YIUI.COMBOBOX_PARAMETERSOURCETYPE={CONST:0,FORMULA:1,FIELD:2};YIUI.IMAGE_SOURCETYPE={DATA:1,RESOURCE:2};YIUI.NUMBEREDITOR_ROUNDINGMODE={HALF_UP:4,ROUND_UP:0,ROUND_DOWN:1,parseStr:function(a){var b=this.HALF_UP;if(a=="HALF_UP"){b=this.HALF_UP;}else{if(a=="ROUND_UP"){b=this.ROUND_UP;}else{if(a=="ROUND_DOWN"){b=this.ROUND_DOWN;}}}return b;}};YIUI.TEXTEDITOR_CASE={DEFAULT:0,LOWER:1,UPPER:2};YIUI.TREEMENU_TYPE={TREE:0,LISTTREE:1,GROUPTREE:2};YIUI.Hyperlink_target={New:"_blank",NewTab:"_blank",Current:"_self"};YIUI.Hyperlink_TargetType={New:0,NewTab:1,Current:2,Str_New:"New",Str_NewTab:"NewTab",Str_Current:"Current"};YIUI.Image={VirtualDir:"/path",EmptyImg:"yesui/ui/res/images/empty.PNG"};YIUI.Form_OperationState={Default:0,New:1,Edit:2,Delete:3};YIUI.FormUIStatusMask={ENABLE:1,VISIBLE:2,OPERATION:4};YIUI.FormTarget={SELF:0,STR_SELF:"self",NEWTAB:1,STR_NEWTAB:"newtab",MODAL:2,STR_MODAL:"modal",STACK:3,STR_STACK:"stack",parse:function(b){var a=-1;if(YIUI.FormTarget.STR_SELF==b.toLowerCase()){a=YIUI.FormTarget.SELF;}else{if(YIUI.FormTarget.STR_NEWTAB==b.toLowerCase()){a=YIUI.FormTarget.NEWTAB;}else{if(YIUI.FormTarget.STR_MODAL==b.toLowerCase()){a=YIUI.FormTarget.MODAL;}else{if(YIUI.FormTarget.STR_STACK==b.toLowerCase()){a=YIUI.FormTarget.STACK;}}}}return a;}};YIUI.Form_Type={Normal:0,Entity:1,Dict:2,View:3,Condition:4,Detail:5};YIUI.FILTERVALUETYPE={FIELD:0,FORMULA:1,CONST:2};YIUI.ParameterSourceType={CONST:0,FORMULA:1,FIELD:2};YIUI.DocumentType={DATAOBJECT:1,DETAIL:2};YIUI.Dialog_MsgType={DEFAULT:0,YES_NO:1,YES_NO_CANCEL:2};YIUI.Dialog_Btn={OK_OPTION:0,STR_OK:"OK",YES_OPTION:0,STR_NO:"NO",NO_OPTION:1,STR_YES:"YES",CANCEL_OPTION:2,STR_CANCEL:"Cancel",parseOption:function(a){if(a==this.STR_OK){return this.OK_OPTION;}else{if(a==this.STR_YES){return this.YES_OPTION;}else{if(a==this.STR_NO){return this.NO_OPTION;}else{if(a==this.STR_CANCEL){return this.CANCEL_OPTION;}}}}}};YIUI.Rights_type={TYPE_ENTRY:0,TYPE_DICT:1,TYPE_FORM:2};YIUI.Rights_objType={OperatorRights:0,RoleRights:1};YIUI.HAlignment={LEFT:0,CENTER:1,RIGHT:2,STR_LEFT:"left",STR_CENTER:"center",STR_RIGHT:"right",parse:function(b){var a=this.STR_LEFT;if(b==this.CENTER){a=this.STR_CENTER;}else{if(b==this.RIGHT){a=this.STR_RIGHT;}}return a;}};YIUI.VAlignment={TOP:0,CENTER:1,BOTTOM:2,STR_TOP:"top",STR_CENTER:"middle",STR_BOTTOM:"bottom",parse:function(b){var a=this.STR_CENTER;if(b==this.TOP){a=this.STR_TOP;}else{if(b==this.BOTTOM){a=this.STR_BOTTOM;}}return a;}};YIUI.Custom_tag={UserInfoPane:"UserInfoPane",RoleRights:"RoleRights",OperatorRights:"OperatorRights"};YIUI.OptScript={SAVE:1,LOAD:2};YIUI.ExpandDataType={INT:1,LONG:2,STRING:3,JSON_OBJECT:7};YIUI.DictStateMask={Enable:1,STR_Enable:"Enable",Disable:2,STR_Disable:"Disable",Discard:4,STR_Discard:"Discard",All:7,Enable_Disable:3,Enable_Discard:5,Disable_Discard:6};YIUI.DictState={Enable:1,Disable:0,Discard:-1};YIUI.JavaDataType={USER_INT:1,STR_USER_INT:"Integer",USER_STRING:2,STR_USER_STRING:"String",USER_DATETIME:3,STR_USER_DATETIME:"Date",USER_NUMERIC:4,STR_USER_NEMERIC:"Numeric",USER_BINARY:5,STR_USER_BINARY:"Binary",USER_BOOLEAN:6,STR_USER_BOOLEAN:"Boolean",USER_LONG:7,STR_USER_LONG:"Long",USER_DOCUMENT:8,STR_USER_DOCUMENT:"Document",USER_DATATABLE:9,STR_USER_DATATABLE:"DataTable",USER_JSONOBJECT:10,STR_USER_JSONOBJECT:"JSONObject",USER_JSONARRAY:11,STR_USER_JSONARRAY:"JSONArray",USER_ITEMDATA:12,STR_USER_ITEMDATA:"ItemData"};YIUI.DataType={INT:1001,STR_INT:"Integer",STRING:1002,STR_STRING:"Varchar",DATE:1003,STR_DATE:"Date",DATETIME:1004,STR_DATETIME:"DateTime",NUMERIC:1005,STR_NUMERIC:"Numeric",DOUBLE:1006,STR_DOUBLE:"Double",FLOAT:1007,STR_FLOAT:"Float",BINARY:1008,STR_BINARY:"Binary",BOOLEAN:1009,STR_BOOLEAN:"Boolean",LONG:1010,STR_LONG:"Long",TEXT:1011,STR_TEXT:"Text",FIXED_STRING:1012,STR_FIXED_STRING:"Char"};YIUI.BPMConstants={WORKITEM_VIEW:"WorkitemView",WORKITEM_INFO:"WorkitemInfo"};YIUI.BPMKeys={SaveBPMMap_KEY:"SaveBPMMap",LoadBPM_KEY:"BPM",STATE_MACHINE:"StateMachine",WORKITEM_INFO:"WrokitemInfo"};YIUI.PPObject_Type={ColumnType:"Type",ColumnInfo:"Info",DicOperator:"Operator",DicRole:"Role"};YIUI.EnableItem={Head:0,List:1,Column:2,Operation:3};YIUI.FormShowFlag={Show:0,S_Show:"show",Close:1,S_Close:"close"};YIUI.FormEvent={Close:"Close",ShowDocument:"ShowDocument"};YIUI.SystemField={OID_SYS_KEY:"OID",SOID_SYS_KEY:"SOID",POID_SYS_KEY:"POID",VERID_SYS_KEY:"VERID",DVERID_SYS_KEY:"DVERID",MAPCOUNT_SYS_KEY:"MapCount"};YIUI.BatchBPM={BPM_PROCESS_KEY:"BPM_PROCESS_KEY",BPM_ACTION_NODE_KEY:"BPM_ACTION_NODE_KEY"};YIUI.DirectionType={TOP:0,STR_TOP:"top",BOTTOM:1,STR_BOTTOM:"bottom",LEFT:2,STR_LEFT:"left",RIGHT:3,STR_RIGHT:"right",CENTER:4,STR_CENTER:"center"};YIUI.DocType={NORMAL:0,NEW:1,MODIFIED:2,DELETE:3};YIUI.TableMode={UNKNOWN:-1,HEAD:0,DETAIL:1};YIUI.IRowBkmk={Fix:0,Detail:1,Group:2,Total:3,Expand:4};YIUI.ExprItem_Type={Item:0,Set:1};YIUI.Attachment_Data={PATH:"Path",NAME:"Name",OID:"OID",UPLOAD_TIME:"UploadTime",UPLOAD_NAME:"UploadName",UPLOAD_OPERATOR:"UploadOperator"};YIUI.Button_Type={DEFAULT:1,UPLOAD:2};YIUI.ExpandSourceType={DATA:0,CUSTOM:1,DICT:2};YIUI.ColumnExpandType={TITLE:0,DATA:1,NONE:-1};YIUI.MetaGridRowObjectType={ROW:0,GROUP:1,AREA:2};YIUI.CellMatrixColumnObject={Column:0,Group:1};YIUI.ShowType={Default:0,Dict:1,Map:2,Tree:3,WorkItem:4,Gantt:5};YIUI.RowExpandType={DICT:0,QUERY:1};YIUI.OptType={NEW:1,LOAD:2,CHECK:3};YIUI.SelectionMode={CELL:1,ROW:2,RANGE:3};YIUI.Dialog_Type={ERROR:0,WARN:1};YIUI.ViewException=(function(){var a={DATA_BINDING_ERROR:15,NO_COMPONENT_FOUND:21,NO_CELL_CANNOT_SET_VALUE:46,CANNNOT_GET_NO_CELL_VALUE:47,COMPDICT_CANNOT_SET_MULTIDICT:48,DYNAMICDICT_ITEMKEY_NULL:49,COMPDICT_ITEMKEY_NULL:50,NO_COMPONENT:51,NO_WIDTH_OR_HEIGHT:52,NO_KEY_TARGET_BILL:53,Exceed_Value_Max_Accuracy:54,Date_Diff_Param_Error:55,NO_COMPONENT_KEY:56,MAP_MISS_FORMKEY:30,NO_TABLE_DATA:1,NO_BINDING_TABLE_DATA:2,NO_PRINT_TEMPLATE_DEFINED:3,CIRCLE_DEPENDENCY:4,GRID_EXPAND_OR_GROUP_IN_GRID_GE:5,EXIST_GROUPROW_IN_GRIDPAGE:6,OUTER_COLUMN_MUSTBE_TITLE:8,UNDEFINED_COMPONENT_TYPE:9,UNDEFINED_PAGE_LOAD_TYPE:10,UNABLE_TO_GET_CELL_BEHAVIOR:11,CHECK_RULE_NOT_PASS:12,SUB_DETAIL_BINDING_ERROR:13,FORMULA_IDENTIFIER_ERROR:14,NO_ROW_SELECTED:16,SEQUENCE_NO_DEFINE:17,LAYER_OR_HIDDEN_NO_DEFINE:18,SHOW_LAYERDATA_NOTALLOW_GRID_EXPAND:19,REQUIRED_ERROR:20,NO_TABLE_FOUND:22,FOREIGN_FIELDS_INEQUALITY:23,NO_EMPTY_ROW_FOUND:24,GRID_TREE_COLUMN_DEFINE_ERROR:25,UNDEFINED_ROW_EXPAND_TYPE:26,REF_OPERATION_NOT_DEFINED:27,NO_DETAIL_ROW_DEFINE:28,COMPONENT_NOT_EXISTS:29,NO_REFDETAILTABLEKEY_DEFINE:30,NO_REFTABLEKEY_DEFINE:31,NO_EXPANDSOURCE_RESULT_GET:42,UNDEFINED_SUBDETAIL_LINKTYPE:43,NO_SUBDETAILS_IN_EMPTYROW:44,NO_GRID_OR_LISTVIEW_FOUND:45,CELL_MERGE_DEFINE_ERROR:57,SOURCETYPE_DEFINE_ERROR:64,PRIMARYKEYS_UNDEFINED:65,TYPE_FORMULA_NEEDED:66,TYPE_GROUP_UNDEFINED:67,TYPE_DEF_UNDEFINED:68,TYPE_DEF_KEYCOLUMN_UNDEFINED:69,TYPEDEFKEY_EMPTY:70,UNKNOWN_DETAIL_TYPE:71,EXPAND_SOURCE_UNDEFINED:72,EXPAND_COLUMNKEY_UNDEFIND:73,VIEW_FORM_ONLY:80,throwException:function(d,c){var b={};b.service="PureException";b.code=d;if(c!=null&&c!=undefined){b.args=c;}var e=function(f){throw new Error(f);};Svr.Request.getSyncData(Svr.SvrMgr.ServletURL,b,e);}};return a;})();YIUI.BPMException=(function(){var a={serialVersionUID:1,NO_DEFINE_NODE_TYPE:1,PARTICIPATOR_ERROR:2,DELEGATE_RIGHT_ERROR:3,INSTANCE_STARTED:4,WORKITEM_DATA_TIME_OUT:5,NO_ACTIVE_WORKITEM:6,NO_MAP_DATA:7,NO_PROCESS_DEFINATION:8,NO_BINDING_PROCESS:9,NO_DYNAMIC_BINDING_PROCESS:10,NO_PROCESS_DEFINATION_VERID:11,NO_INSTANCE_DATA:12,DELEGATE_MISS_SRC:13,DELEGATE_MISS_TGT:14,NO_NODE_EXIST:15,NO_BPM_CONTEXT:16,MISS_FORM:17,throwException:function(d,c){var b={};b.service="PureException";b.code=d;b.isBPMError=true;if(c!=null&&c!=undefined){b.args=c;}var e=function(f){throw new Error(f);};Svr.Request.getSyncData(Svr.SvrMgr.ServletURL,b,e);}};return a;})();
/* jstz - v1.0.4 - 2012-12-12 */
(function(b){var a=function(){var j="s",l=function(m){var i=-m.getTimezoneOffset();return i!==null?i:0;},h=function(o,i,p){var m=new Date;return o!==undefined&&m.setFullYear(o),m.setDate(p),m.setMonth(i),m;},f=function(i){return l(h(i,0,2));},g=function(i){return l(h(i,5,2));},k=function(n){var i=n.getMonth()>7?g(n.getFullYear()):f(n.getFullYear()),m=l(n);return i-m!==0;},d=function(){var e=f(),m=g(),i=f()-g();return i<0?e+",1":i>0?m+",1,"+j:e+",0";},c=function(){var i=d();return new a.TimeZone(a.olson.timezones[i]);};return{determine:c,date_is_dst:k};}();a.TimeZone=function(g){var h=null,f=function(){return h;},c=function(){var m=a.olson.ambiguity_list[h],l=m.length,j=0,k=m[0];for(;j<l;j+=1){k=m[j];if(a.date_is_dst(a.olson.dst_start_dates[k])){h=k;return;}}},d=function(){return typeof a.olson.ambiguity_list[h]!="undefined";};return h=g,d()&&c(),{name:f};},a.olson={},a.olson.timezones={"-720,0":"Etc/GMT+12","-660,0":"Pacific/Pago_Pago","-600,1":"America/Adak","-600,0":"Pacific/Honolulu","-570,0":"Pacific/Marquesas","-540,0":"Pacific/Gambier","-540,1":"America/Anchorage","-480,1":"America/Los_Angeles","-480,0":"Pacific/Pitcairn","-420,0":"America/Phoenix","-420,1":"America/Denver","-360,0":"America/Guatemala","-360,1":"America/Chicago","-360,1,s":"Pacific/Easter","-300,0":"America/Bogota","-300,1":"America/New_York","-270,0":"America/Caracas","-240,1":"America/Halifax","-240,0":"America/Santo_Domingo","-240,1,s":"America/Santiago","-210,1":"America/St_Johns","-180,1":"America/Godthab","-180,0":"America/Argentina/Buenos_Aires","-180,1,s":"America/Montevideo","-120,0":"Etc/GMT+2","-120,1":"Etc/GMT+2","-60,1":"Atlantic/Azores","-60,0":"Atlantic/Cape_Verde","0,0":"Etc/UTC","0,1":"Europe/London","60,1":"Europe/Berlin","60,0":"Africa/Lagos","60,1,s":"Africa/Windhoek","120,1":"Asia/Beirut","120,0":"Africa/Johannesburg","180,0":"Asia/Baghdad","180,1":"Europe/Moscow","210,1":"Asia/Tehran","240,0":"Asia/Dubai","240,1":"Asia/Baku","270,0":"Asia/Kabul","300,1":"Asia/Yekaterinburg","300,0":"Asia/Karachi","330,0":"Asia/Kolkata","345,0":"Asia/Kathmandu","360,0":"Asia/Dhaka","360,1":"Asia/Omsk","390,0":"Asia/Rangoon","420,1":"Asia/Krasnoyarsk","420,0":"Asia/Jakarta","480,0":"Asia/Shanghai","480,1":"Asia/Irkutsk","525,0":"Australia/Eucla","525,1,s":"Australia/Eucla","540,1":"Asia/Yakutsk","540,0":"Asia/Tokyo","570,0":"Australia/Darwin","570,1,s":"Australia/Adelaide","600,0":"Australia/Brisbane","600,1":"Asia/Vladivostok","600,1,s":"Australia/Sydney","630,1,s":"Australia/Lord_Howe","660,1":"Asia/Kamchatka","660,0":"Pacific/Noumea","690,0":"Pacific/Norfolk","720,1,s":"Pacific/Auckland","720,0":"Pacific/Tarawa","765,1,s":"Pacific/Chatham","780,0":"Pacific/Tongatapu","780,1,s":"Pacific/Apia","840,0":"Pacific/Kiritimati"},a.olson.dst_start_dates=function(){var c=new Date(2010,6,15,1,0,0,0);return{"America/Denver":new Date(2011,2,13,3,0,0,0),"America/Mazatlan":new Date(2011,3,3,3,0,0,0),"America/Chicago":new Date(2011,2,13,3,0,0,0),"America/Mexico_City":new Date(2011,3,3,3,0,0,0),"America/Asuncion":new Date(2012,9,7,3,0,0,0),"America/Santiago":new Date(2012,9,3,3,0,0,0),"America/Campo_Grande":new Date(2012,9,21,5,0,0,0),"America/Montevideo":new Date(2011,9,2,3,0,0,0),"America/Sao_Paulo":new Date(2011,9,16,5,0,0,0),"America/Los_Angeles":new Date(2011,2,13,8,0,0,0),"America/Santa_Isabel":new Date(2011,3,5,8,0,0,0),"America/Havana":new Date(2012,2,10,2,0,0,0),"America/New_York":new Date(2012,2,10,7,0,0,0),"Asia/Beirut":new Date(2011,2,27,1,0,0,0),"Europe/Helsinki":new Date(2011,2,27,4,0,0,0),"Europe/Istanbul":new Date(2011,2,28,5,0,0,0),"Asia/Damascus":new Date(2011,3,1,2,0,0,0),"Asia/Jerusalem":new Date(2011,3,1,6,0,0,0),"Asia/Gaza":new Date(2009,2,28,0,30,0,0),"Africa/Cairo":new Date(2009,3,25,0,30,0,0),"Pacific/Auckland":new Date(2011,8,26,7,0,0,0),"Pacific/Fiji":new Date(2010,11,29,23,0,0,0),"America/Halifax":new Date(2011,2,13,6,0,0,0),"America/Goose_Bay":new Date(2011,2,13,2,1,0,0),"America/Miquelon":new Date(2011,2,13,5,0,0,0),"America/Godthab":new Date(2011,2,27,1,0,0,0),"Europe/Moscow":c,"Asia/Yekaterinburg":c,"Asia/Omsk":c,"Asia/Krasnoyarsk":c,"Asia/Irkutsk":c,"Asia/Yakutsk":c,"Asia/Vladivostok":c,"Asia/Kamchatka":c,"Europe/Minsk":c,"Australia/Perth":new Date(2008,10,1,1,0,0,0)};}(),a.olson.ambiguity_list={"America/Denver":["America/Denver","America/Mazatlan"],"America/Chicago":["America/Chicago","America/Mexico_City"],"America/Santiago":["America/Santiago","America/Asuncion","America/Campo_Grande"],"America/Montevideo":["America/Montevideo","America/Sao_Paulo"],"Asia/Beirut":["Asia/Beirut","Europe/Helsinki","Europe/Istanbul","Asia/Damascus","Asia/Jerusalem","Asia/Gaza"],"Pacific/Auckland":["Pacific/Auckland","Pacific/Fiji"],"America/Los_Angeles":["America/Los_Angeles","America/Santa_Isabel"],"America/New_York":["America/Havana","America/New_York"],"America/Halifax":["America/Goose_Bay","America/Halifax"],"America/Godthab":["America/Miquelon","America/Godthab"],"Asia/Dubai":["Europe/Moscow"],"Asia/Dhaka":["Asia/Yekaterinburg"],"Asia/Jakarta":["Asia/Omsk"],"Asia/Shanghai":["Asia/Krasnoyarsk","Australia/Perth"],"Asia/Tokyo":["Asia/Irkutsk"],"Australia/Brisbane":["Asia/Yakutsk"],"Pacific/Noumea":["Asia/Vladivostok"],"Pacific/Tarawa":["Asia/Kamchatka"],"Africa/Johannesburg":["Asia/Gaza","Africa/Cairo"],"Asia/Baghdad":["Europe/Minsk"]},typeof exports!="undefined"?exports.jstz=a:b.jstz=a;})(this);YIUI.DataUtil=(function(){var a={dataType2JavaDataType:function(b){switch(b){case YIUI.DataType.LONG:return YIUI.JavaDataType.USER_LONG;case YIUI.DataType.BINARY:return YIUI.JavaDataType.USER_BINARY;case YIUI.DataType.BOOLEAN:return YIUI.JavaDataType.USER_BOOLEAN;case YIUI.DataType.DATE:case YIUI.DataType.DATETIME:return YIUI.JavaDataType.USER_DATETIME;case YIUI.DataType.DOUBLE:case YIUI.DataType.FLOAT:case YIUI.DataType.NUMERIC:return YIUI.JavaDataType.USER_NUMERIC;case YIUI.DataType.INT:return YIUI.JavaDataType.USER_INT;case YIUI.DataType.STRING:return YIUI.JavaDataType.USER_STRING;}return -1;},toJSONDoc:function(b){if(!b){return;}var g={},d=[],e;if(b.oid){g.oid=b.oid;}if(b.poid){g.poid=b.poid;}g.verid=b.verid||0;g.dverid=b.dverid||0;g.state=b.state||DataType.D_Normal;if(b.docType){g.document_type=b.docType;}var h=b.maps.table,f;for(var c in h){f=h[c];e=this.toJSONDataTable(f);d.push(e);}g.table_list=d;g.expand_data=b.expData;g.expand_data_type=b.expDataType;g.expand_data_class=b.expDataClass;return g;},toJSONDataTable:function(d){if(!d){return;}var p={};p.key=d.key;p.bookmark_seed=d.bkmkSeed;p.tableMode=d.tableMode;var n=d.allRows,q,m=[],b;for(var i=0,l=n.length;i<l;i++){q=n[i];b={};b.data=q.vals;b.row_bookmark=q.bkmk;b.row_parent_bookmark=q.parentBkmk;b.row_state=q.state;if(q.orgVals){b.originaldata=q.orgVals;}m.push(b);}p.all_data_rows=m;var o=d.cols,e,g=[],f;for(var h=0,c=o.length;h<c;h++){e=o[h];f={};f.data_type=e.type;f.key=e.key;f.index=h;f.user_type=e.userType;f.accesscontrol=e.accessControl;g.push(f);}p.columns=g;return p;},fromJSONDoc:function(b){if(!b){return;}var h=new DataDef.Document();if(b.oid){h.oid=b.oid;}if(b.poid){h.poid=b.poid;}h.verid=b.verid||0;h.dverid=b.dverid||0;h.state=b.state||0;if(b.document_type){h.docType=b.document_type;}if(b.table_list){var g,c=b.table_list,f,e;for(var d=0;d<c.length;d++){f=c[d];e=f.key;g=this.fromJSONDataTable(f);h.add(e,g);}}h.expData=b.expand_data;h.expDataType=b.expand_data_type;h.expDataClass=b.expand_data_class;return h;},fromJSONDataTable:function(s){if(!s){return null;}var b=new DataDef.DataTable();b.key=s.key;b.parentKey=s.parentKey;b.tableMode=s.tableMode;var l=s,q=l.all_data_rows,g=l.columns;for(var m=0;m<g.length;m++){var f=g[m];b.addCol(f.key,f.data_type,f.user_type,f.accesscontrol,f.defaultValue,f.isPrimary);}var p=[];for(var o=0;o<q.length;o++){var r=q[o];b.addRow();var t=b.rows[b.pos];var e=null,d;for(var h=0;h<r.data.length;h++){d=g[h];e=r.data[h];t.vals[h]=e;}t.state=r.row_state||DataDef.R_Normal;t.bkmk=r.row_bookmark;t.parentBkmk=r.row_parent_bookmark;if(t.state==DataDef.R_Deleted){p.push(b.pos);}}for(var c=0;c<p.length;c++){b.delRow(p[c]);}if(l.bookmark_seed){b.bkmkSeed=l.bookmark_seed;}return b;},fromJSONItem:function(b){var c=new DataDef.Item();if(!c){return;}c.itemKey=b.itemKey;c.oid=b.oid;c.nodeType=b.nodeType||0;c.enable=b.enable||0;c.caption=b.caption;c.mainTableKey=b.mainTableKey;c.itemTables=b.itemTables;return c;},getShadowTableKey:function(b){return b+"_shadow";},newShadowDataTable:function(f){var b=new DataDef.DataTable();b.key=this.getShadowTableKey(f.key);var d=f.cols;for(var c=0;c<d.length;c++){var e=d[c];b.addCol(e.key,e.type,e.userType,e.accessControl,e.defaultValue,e.isPrimary);}return b;},getPosByPrimaryKeys:function(c,d,l){if(l==undefined||l==null){YIUI.ViewException.throwException(YIUI.ViewException.PRIMARYKEYS_UNDEFINED);}d.beforeFirst();var m=-1;while(d.next()){var f=true;for(var e=0,j=l.length;e<j;e++){var g=c.cols[c.indexByKey(l[e])].type,n=c.getByKey(l[e]),h=d.getByKey(l[e]),b=YIUI.Handler.convertValue(n,g),i=YIUI.Handler.convertValue(h,g);if(b instanceof Decimal){if(!b.equals(i)){f=false;break;}}else{if(b!=i){f=false;break;}}}if(f){m=d.pos;break;}}return m;},posWithShadowRow:function(b,l,c){if(b.pageInfo.pageLoadType!="DB"){return;}var g=a.getShadowTableKey(b.tableKey),d=l.getByKey(g);if(d==null||d==undefined){d=YIUI.DataUtil.newShadowDataTable(c);l.add(g,d);}var e=c.getByKey(YIUI.DataUtil.System_OID_Key),i,k;if(e!=null&&e!=undefined){k=[YIUI.DataUtil.System_OID_Key];}else{k=b.primaryKeys;}i=a.getPosByPrimaryKeys(c,d,k);if(i!=-1){d.setPos(i);}else{d.addRow();for(var f=0,h=d.cols.length;f<h;f++){d.set(f,c.get(f));}d.allRows[d.pos].state=c.allRows[c.pos].state;}return d;},modifyDisplayValueByShadow:function(p,c,b,h){var d=p.getByKey(YIUI.DataUtil.getShadowTableKey(b.tableKey)),f;if(d){for(var k=0,l=h.length;k<l;k++){f=h[k];if(f.bookmark==undefined||f.bookmark==null){continue;}c.setByBkmk(f.bookmark);var e=c.getByKey(YIUI.DataUtil.System_OID_Key),o,n;if(e!=null&&e!=undefined){n=[YIUI.DataUtil.System_OID_Key];}else{n=b.primaryKeys;}o=a.getPosByPrimaryKeys(c,d,n);if(o!=-1){for(var g=0,m=c.cols.length;g<m;g++){c.set(g,d.get(g));}b.showDetailRow(k,true);}}}},deleteAllRow:function(d){for(var b=d.size(),c=b-1;c>=0;c--){d.delRow(c);}},append:function(c,f){var g=[],k=[];for(var e=0,h=c.cols.length;e<h;e++){var m=c.getCol(e);var b=f.indexByKey(m.key);if(b!=-1){g.push(e);k.push(b);}}c.beforeFirst();while(c.next()){f.addRow();for(var d=0,l=g.length;d<l;d++){f.set(k[d],c.get(g[d]));}}c.beforeFirst();f.beforeFirst();}};a.System_SelectField_Key="SelectField";a.System_OID_Key="OID";return a;})();YIUI.NumericUtil=(function(){var b=["零","壹","贰","叁","肆","伍","陆","柒","捌","玖"];var a={getAmountInWords:function(l){if(l.abs().comparedTo(new Decimal(1000000000000000))>0){alert("参数值超出允许范围 (-999999999999999.99 ～ 999999999999999.99)！");return;}var f=l.isNegative();l=l.abs();var n=parseFloat(l.toFixed(2,YIUI.NUMBEREDITOR_ROUNDINGMODE.HALF_UP))*100;var k=parseInt(n%10);n=n/10;var c=parseInt(n%10);n=n/10;var g=[],j=0,d;for(var p=0;;p++){if(n==0){break;}d=parseInt(n%10000);g[p]=d;j++;n=n/10000;}var e=true,m="",o="";for(var h=0;h<j;h++){o=this.partTranslate(g[h]);if(h%2==0){e=(o=="");}if(h!=0){if(h%2==0){if(g[h-1]==0||g[h-1]>=1000){m="亿"+m;}else{m="亿零"+m;}}else{if(o==""&&!e){m="零"+m;}else{if(g[h-1]>0&&g[h-1]<1000){m="零"+m;}else{if(g[h-1]<1000&&g[h-1]!=0){m="零"+m;}}if(o!==""){m="万"+m;}}}}m=o+m;}if(m.length>0){m=m+"圆";}else{m+="零圆";}if(k==0&&c==0){m=m+"整";}else{if(k==0){m=m+b[c]+"角整";}else{if(c==0){m=m+"零"+b[k]+"分";}else{m=m+b[c]+"角"+b[k]+"分";}}}if(f){m="负"+m;}return m;},partTranslate:function(e){if(e<0||e>10000){alert("NumericUtil：参数必须是大于等于 0，小于 10000 的整数！");return;}var g=["","拾","佰","仟"],l=parseInt(e),f=e.toString(),c=f.length,k=true,j="";for(var d=0;d<c;d++){if(l==0){break;}var h=parseInt(l%10);if(h==0){if(!k){j="零"+j;}k=true;}else{j=b[h]+g[d]+j;k=false;}l=l/10;}return j;}};return a;})();YIUI.SubDetailUtil=(function(){var Return={isSubDetail:function(form,comp,gridKey){if(comp.getMetaObj().parentGridKey!=null){if(comp.getMetaObj().parentGridKey!=gridKey){return Return.isSubDetail(form,Return.getBindingGrid(form,comp),gridKey);}else{return true;}}return false;},getBindingGrid:function(form,subDetailComp){var parentGridKey=subDetailComp.getMetaObj().parentGridKey,grid=form.getGridInfoByKey(parentGridKey);if(grid==null){return null;}return form.getComponent(grid.key);},getBindingCellData:function(form,subDetailComp){var bindingCellKey=subDetailComp.getMetaObj().bindingCellKey,parentGridKey=subDetailComp.getMetaObj().parentGridKey,grid=form.getGridInfoByKey(parentGridKey);if(grid==null){return null;}grid=form.getComponent(grid.key);var rowIndex=grid.getFocusRowIndex();if(rowIndex==-1||bindingCellKey==null||bindingCellKey==""){return null;}return grid.getCellDataByKey(rowIndex,bindingCellKey);},getBindingCellError:function(form,subDetailComp){var bindingCellKey=subDetailComp.getMetaObj().bindingCellKey,parentGridKey=subDetailComp.getMetaObj().parentGridKey,grid=form.getGridInfoByKey(parentGridKey);if(grid==null){return null;}grid=form.getComponent(grid.key);var rowIndex=grid.getFocusRowIndex();if(rowIndex==-1||bindingCellKey==null||bindingCellKey==""){return null;}for(var i=0,len=grid.errorInfoes.cells.length;i<len;i++){var cellInfo=grid.errorInfoes.cells[i];if(cellInfo.rowIndex==rowIndex&&cellInfo.colIndex==grid.getCellIndexByKey(bindingCellKey)){return cellInfo;}}},showSubDetailData:function(grid,rowIndex){var begin=new Date().getTime(),rowData=grid.getRowDataAt(rowIndex);var form=YIUI.FormStack.getForm(grid.ofFormID);this.clearSubDetailData(form,grid);if(rowData==null||(rowData.isDetail&&rowData.bookmark==null)){return;}var dataTable=form.getDocument().getByKey(grid.tableKey);var row=grid.dataModel.data[rowIndex],value,OID=-1,compList,comp,ubookmark,compTable;if(row.isDetail&&!grid.hasColExpand){if(row.bookmark!=null){dataTable.setByBkmk(row.bookmark);OID=dataTable.getByKey("oid");}else{dataTable.beforeFirst();}compList=form.subDetailInfo[grid.key].compList;for(var i=0,len=compList.length;i<len;i++){comp=form.getComponent(compList[i]);if(comp instanceof YIUI.Control.Grid){compTable=form.getDocument().getByKey(comp.tableKey);comp.dataModel.data=[];var info=form.subDetailInfo[grid.key].info,dtrIndex=comp.metaRowInfo.dtlRowIndex,metaRow;var addNewRow=function(isDetail,metaRow,bookmark,parentBkmk,cellKeys,data){var newRowIndex=data.length,rowTable,tableKey;var newRow={};newRow.isDetail=isDetail;newRow.isEditable=(metaRow.rowType=="Detail"||metaRow.rowType=="Fix");newRow.rowID=comp.randID();newRow.bookmark=bookmark;newRow.parentBkmk=parentBkmk;newRow.cellKeys=cellKeys;newRow.rowHeight=metaRow.rowHeight;newRow.metaRowIndex=comp.metaRowInfo.rows.indexOf(metaRow);newRow.rowType=metaRow.rowType;newRow.data=[];data.push(newRow);for(var j=0,clen=comp.dataModel.colModel.columns.length;j<clen;j++){var editOpt=comp.dataModel.colModel.cells[cellKeys[j]];if(editOpt!==undefined){if(bookmark==undefined){tableKey=(editOpt.tableKey==undefined?metaRow.tableKey:editOpt.tableKey);rowTable=form.getDocument().getByKey(tableKey);if(rowTable!==undefined&&rowTable!==null){rowTable.first();value=(editOpt.columnKey==undefined?null:rowTable.getByKey(editOpt.columnKey));}}else{value=(editOpt.columnKey==undefined?null:compTable.getByKey(editOpt.columnKey));}var defaultFV=metaRow.cells[j].defaultFormulaValue,defaultV=metaRow.cells[j].defaultValue;if(editOpt!==undefined&&value==null&&(editOpt.edittype=="label"||editOpt.edittype=="button"||editOpt.edittype=="hyperLink")){value=(metaRow.cells[j].caption==undefined?"":metaRow.cells[j].caption);}if(value==null&&defaultFV!==undefined&&defaultFV!==null&&defaultFV.length>0){value=form.eval(defaultFV,{form:form,rowIndex:newRowIndex},null);}if(value==null&&defaultV!==undefined&&defaultV!==null&&defaultV.length>0){value=defaultV;}}else{value=(metaRow.cells[j].caption==undefined?"":metaRow.cells[j].caption);}value=comp.getCellNeedValue(newRowIndex,j,value,true);newRow.data.push(value);value=null;}};for(var j=0;j<dtrIndex;j++){metaRow=comp.metaRowInfo.rows[j];addNewRow(false,metaRow,ubookmark,dataTable.getBkmk(),metaRow.cellKeys,comp.dataModel.data);}compTable.beforeFirst();while(compTable.next()){if(compTable.rows[compTable.pos].state==DataDef.R_Deleted){continue;}var inGrid=false;if(info.linkType===1){if((row.bookmark!=null&&compTable.getParentBkmk()===row.bookmark)||(compTable.getByKey("POID")===OID&&OID>0)){inGrid=true;}}else{if(info.linkType==2){inGrid=true;var sourceFields=info.sourceFields,targetFields=info.targetFields,srcField,tgtField;for(var k=0,slen=sourceFields.length;k<slen;k++){srcField=sourceFields[k];tgtField=targetFields[k];var dataType=dataTable.cols[dataTable.indexByKey(srcField)].type;var dV=YIUI.Handler.convertValue(dataTable.getByKey(srcField),dataType),compDV=YIUI.Handler.convertValue(compTable.getByKey(tgtField),dataType);if(dV instanceof Decimal&&compDV instanceof Decimal){if(!dV.equals(compDV)){inGrid=false;break;}}else{if(dV!==compDV){inGrid=false;break;}}}}}if(inGrid){metaRow=comp.metaRowInfo.rows[dtrIndex];addNewRow(true,metaRow,compTable.getBkmk(),dataTable.getBkmk(),metaRow.cellKeys,comp.dataModel.data);inGrid=false;}}for(var m=dtrIndex+1,length=comp.metaRowInfo.rows.length;m<length;m++){metaRow=comp.metaRowInfo.rows[m];addNewRow(false,metaRow,ubookmark,dataTable.getBkmk(),metaRow.cellKeys,comp.dataModel.data);}comp.refreshGrid();if(comp.isEnable()&&!comp.hasAutoRow()&&comp.treeType===-1&&!comp.hasRowExpand){if(comp.hasGroupRow){comp.appendAutoRowAndGroup();}else{comp.addGridRow();}}else{if(!comp.isEnable()&&comp.treeType===-1){comp.removeAutoRowAndGroup();}}}else{if(comp.metaObj.bindingCellKey&&comp.metaObj.bindingCellKey.length>0){var colInfoes=grid.getColInfoByKey(comp.metaObj.bindingCellKey);if(colInfoes!==null){for(var ci=0,clen=colInfoes.length;ci<clen;ci++){value=row.data[colInfoes[ci].colIndex][0];if(comp.type==YIUI.CONTROLTYPE.DICT&&value!=null&&typeof value=="string"){value=JSON.parse(value);}comp.setValue(value,false,false);}}}else{if(comp.tableKey&&comp.tableKey.length>0&&comp.columnKey&&comp.columnKey.length>0){if(comp.tableKey==grid.tableKey){if(dataTable.pos>=0){value=dataTable.getByKey(comp.columnKey);comp.setValue(value,false,false);}}else{compTable=form.getDocument().getByKey(comp.tableKey);compTable.first();value=compTable.getByKey(comp.columnKey);comp.setValue(value,false,false);}}}}}form.getUIProcess().calcSubDetail(grid.key);}var end=new Date().getTime();console.log("showSubDetail Cost: "+(end-begin)+" ms");},clearSubDetailData:function(form,parentGrid){var subDetailInfo=form.subDetailInfo[parentGrid.key];if(subDetailInfo==undefined){return;}var compList=subDetailInfo.compList,subComp;for(var i=0,len=compList.length;i<len;i++){subComp=form.getComponent(compList[i]);if(subComp instanceof YIUI.Control.Grid){subComp.dataModel.data=[];subComp.errorInfoes.cells=[];subComp.errorInfoes.rows=[];subComp.el.clearGridData();this.clearSubDetailData(form,subComp);}else{if(subComp.needClean()){subComp.setValue(null,false,false);subComp.setRequired(false);subComp.setError(false,"");}}}}};return Return;})();var YIUI=YIUI||{};YIUI.TypeConvertor=(function(){var a={toString:function(b){return b!=null?b.toString():"";},toInt:function(b){var c;if(b==null||b==""){c=0;}else{if($.isNumeric(b)){c=parseInt(b);}else{if(typeof b=="boolean"){c=b?1:0;}else{if(b instanceof Decimal){if(b.toString().length>9){c=b;}else{c=parseInt(b.toString());}}else{if(typeof b=="string"){if(b.toLowerCase()=="true"){c=1;}}}}}}return c;},toLong:function(c){var b=this.toInt(c);return b;},toDecimal:function(b){var c;if(b==null||b==""){c=new Decimal(0);}else{if($.isNumeric(b)){c=new Decimal(b);}else{if(typeof b=="boolean"){b=b?1:0;c=new Decimal(b);}else{if(b instanceof Decimal){c=b;}else{if(typeof b=="string"){c=b==""?new Decimal(0):new Decimal(b);}}}}}return c;},toBoolean:function(b){var c=false;if(b!=null){if(typeof(b)=="boolean"){c=b;}else{if(typeof(b)=="string"){if(b.toLowerCase()=="true"){c=true;}else{if(b.toLowerCase()=="false"||b=="0"){c=false;}else{c=b.length!=0;}}}else{if(b instanceof Decimal){c=Boolean(b.toNumber());}else{c=Boolean(b);}}}}return c;},toDate:function(b){var c=null;if(b!=null){if(b instanceof Date){c=b;}else{if($.isNumeric(b)){c=new Date(parseInt(value));}else{if(typeof b=="string"){b=b.replace(/-/g,"/");c=new Date(b);}}}}return c;},toDataType:function(b,c){switch(b){case YIUI.DataType.INT:return this.toInt(c);case YIUI.DataType.LONG:return this.toLong(c);case YIUI.DataType.STRING:return this.toString(c);case YIUI.DataType.DATE:case YIUI.DataType.DATETIME:return this.toDate(c);case YIUI.DataType.NUMERIC:return this.toDecimal(c);case YIUI.DataType.BOOLEAN:return this.toBoolean(c);}return c;}};return a;})();YIUI.Base64=(function(){var a={encode64:function(f,e){var d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var b="";var n,l,j,m,k,h,g;var c=0;while(c<f.length){n=f[c++];l=f[c++];j=f[c++];m=n>>2;k=((n&3)<<4)|(l>>4);h=((l&15)<<2)|(j>>6);g=j&63;if(isNaN(l)){h=g=64;}else{if(isNaN(j)){g=64;}}b=b+d.charAt(m)+d.charAt(k)+d.charAt(h)+d.charAt(g);}return b;}};return a;})();