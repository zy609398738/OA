(function(a){a.ygrid=a.ygrid||{};a.extend(a.ygrid,{version:"1.0.0",guid:1,uidPref:"ygd",msie:navigator.appName==="Microsoft Internet Explorer",msiever:function(){var d=-1;var b=navigator.userAgent;var c=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");if(c.exec(b)!=null){d=parseFloat(RegExp.$1)}return d},getCellIndex:function(b){var d=a(b);if(d.is("tr")){return -1}d=(!d.is("td")&&!d.is("th")?d.closest("td,th"):d)[0];if(a.ygrid.msie){return a.inArray(d,d.parentNode.cells)}return d.cellIndex},formatString:function(c){var b=a.makeArray(arguments).slice(1);if(c==null){c=""}return c.replace(/\{(\d+)\}/g,function(d,e){return b[e]})},stripPref:function(b,d){var c=a.type(b);if(c==="string"||c==="number"){b=String(b);d=b!==""?String(d).replace(String(b),""):d}return d},stripHtml:function(b){b=String(b);var c=/<("[^"]*"|'[^']*'|[^'">])*>/gi;if(b){b=b.replace(c,"");return(b&&b!=="&nbsp;"&&b!=="&#160;")?b.replace(/\"/g,"'"):""}return b},randId:function(b){return(b||a.ygrid.uidPref)+(a.ygrid.guid++)},intNum:function(c,b){c=parseInt(c,10);if(isNaN(c)){return b||0}return c},extend:function(b){a.extend(a.fn.yGrid,b);if(!this.no_legacy_api){a.fn.extend(b)}}});a.fn.yGrid=function(c){if(this.grid){return}if(typeof c==="string"){var d=a.fn.yGrid[c];if(!d){throw ("yGrid - No such method: "+c)}var b=a.makeArray(arguments).slice(1);return d.apply(this,b)}return this.each(function(){var T={enable:true,width:100,height:150,rowNum:50,showPager:true,showPageSet:true,navButtons:{},scrollPage:false,colModel:[],colNames:[],data:[],editCells:[],_indexMap:{},viewRecords:true,rowSequences:true,rowSeqWidth:40,scrollTimeout:40,lastpage:1,onSelectRow:null,ondblClickRow:null,onSortClick:null,specialCellClick:null,createCellEditor:null,alwaysShowCellEditor:null,endCellEditor:null,afterEndCellEditor:null,extKeyDownEvent:null,afterCopy:null,afterPaste:null,groupHeaders:[]};for(var A in c){var S=c[A];if(a.isArray(S)){T[A]=S.slice(0)}else{T[A]=S}}c=null;var ac=this,R={headers:[],cols:[],dragStart:function(w,p,ah){var ag=a(this.bDiv).offset().left;this.resizing={idx:w,startX:p.clientX,sOL:p.clientX-ag};this.hDiv.style.cursor="col-resize";this.curGbox=a("#rs_m"+T.id,"#gbox_"+T.id);this.curGbox.css({display:"block",left:p.clientX-ag,top:ah[1],height:ah[2]});document.onselectstart=function(){return false}},dragMove:function(i){if(this.resizing){var ag=i.clientX-this.resizing.startX,p=this.headers[this.resizing.idx],w=p.width+ag;if(w>33){this.curGbox.css({left:this.resizing.sOL+ag});this.newWidth=T.tblwidth+ag;p.newWidth=w}}},dragEnd:function(){this.hDiv.style.cursor="default";if(this.resizing){var i=this.resizing.idx,p=this.headers[i].newWidth||this.headers[i].width;p=parseInt(p,10);this.resizing=false;this.curGbox.css({display:"none"});T.colModel[i].width=p;this.headers[i].width=p;this.headers[i].el.style.width=p+"px";this.cols[i].style.width=p+"px";T.tblwidth=this.newWidth||T.tblwidth;a("table:first",this.bDiv).css("width",T.tblwidth+"px");a("table:first",this.hDiv).css("width",T.tblwidth+"px");this.hDiv.scrollLeft=this.bDiv.scrollLeft;a(ac).triggerHandler("yGridResizeStop",[p,i])}this.curGbox=null;document.onselectstart=function(){return true}},populateVisible:function(){if(R.timer){clearTimeout(R.timer)}R.timer=null;var al=a(R.bDiv).height();if(!al){return}var ao=a("table:first",R.bDiv);var ap,am;if(ao[0].rows.length){try{ap=ao[0].rows[1];am=ap?a(ap).outerHeight()||R.prevRowHeight:R.prevRowHeight}catch(an){am=R.prevRowHeight}}if(!am){return}R.prevRowHeight=am;var aj=T.rowNum;var w=R.scrollTop=R.bDiv.scrollTop;var ah=Math.round(ao.position().top)-w;var ag=ah+ao.height();var p=am*aj;var ak,i,ai;if(ag<al&&ah<=0&&(T.lastpage===undefined||parseInt((ag+w+p-1)/p,10)<=T.lastpage)){i=parseInt((al-ag+p-1)/p,10);if(ag>=0||i<2||T.scroll===true){ak=Math.round((ag+w)/p)+1;ah=-1}else{ah=1}}if(ah>0){ak=parseInt(w/p,10)+1;i=parseInt((w+al)/p,10)+2-ak;ai=true}if(i){if(T.lastpage&&(ak>T.lastpage||T.lastpage===1||(ak===T.page&&ak===T.lastpage))){return}T.page=ak;if(ai){R.emptyRows.call(ao[0],false)}R.populate(i);a(ac).setErrorCells();a(ac).setErrorRows()}},scrollGrid:function(p){if(T.scrollPage){var i=R.bDiv.scrollTop;if(R.scrollTop===undefined){R.scrollTop=0}if(i!==R.scrollTop){R.scrollTop=i;if(R.timer){clearTimeout(R.timer)}R.timer=setTimeout(R.populateVisible,T.scrollTimeout)}}R.hDiv.scrollLeft=R.bDiv.scrollLeft;if(p){p.stopPropagation()}}};var M=function(){var w=this;w.p.scrollOffset=18;var ag=0,p=a.ygrid.intNum(w.p.scrollOffset),i;a.each(w.p.colModel,function(ai,ah){if(this.hidden===undefined){this.hidden=false}this.widthOrg=i=a.ygrid.intNum(ah.width);if(this.hidden===false){ag+=i}});if(isNaN(w.p.width)){w.p.width=ag+(!isNaN(w.p.height)?p:0)}R.width=w.p.width;w.p.tblwidth=ag};var x=function(p){var ag=this,w=a(ag.grid.headers[p].el);var i=[w.position().left+w.outerWidth()];i[0]-=ag.grid.bDiv.scrollLeft;i.push(a(ag.grid.hDiv).position().top);i.push(a(ag.grid.bDiv).offset().top-a(ag.grid.hDiv).offset().top+a(ag.grid.bDiv).height());return i};var o=function(ah){var aj=this,ag,ai=aj.grid.headers,w,p=ai.length;for(ag=0;ag<p;ag++){if(ah===ai[ag].el){w=ag;break}}return w};ac.getCellEditOpt=function(w,p){if(w==undefined){return{}}var ag=w.cellKeys[p-(ac.p.rowSequences?1:0)],i=ac.p.cellLookup[ag];if(i==undefined){i={}}return i};var L=function(ak,aj,ai,ag,ah){var i=this,al=i.p.colModel[ak],w=i.getCellEditOpt(ah,ak),p=w.align==undefined?al.align:w.align,an=["style='"],am=al.name;if(p){an.push("text-align:");an.push(p);an.push(";")}if(w.backColor){an.push("background-color:");an.push(w.backColor);an.push(";")}if(w.foreColor){an.push("color:");an.push(w.foreColor);an.push(";")}if(am=="rn"){if(i.p.backColor){an.push("background-color:");an.push(i.p.backColor);an.push(";")}if(i.p.foreColor){an.push("color:");an.push(i.p.foreColor);an.push(";")}}if(al.hidden===true){an.push("display:none;")}if(w.edittype=="numberEditor"&&parseFloat(ag[0])<0){an.push("color:");an.push(w.editOptions.negtiveForeColor)}an.push("'");if(ag!==undefined&&ag[2]!==null&&ag[2]===false&&(ah.rowType=="Fix"||ah.rowType=="Detail")){an.push(" class='ui-cell-disabled'")}an.push(a.fmatter.isEmpty(ai)?"":[" title='",a.ygrid.stripHtml(ai),"' "].join(""));an.push(" aria-describedby='");an.push([i.p.id,"_",am,"'"].join(""));an=an.join("");return an};var aa=function(p,an,aj,ah,ak,ag){var am=an[1];var al=L.call(ac,aj,ah,am,an,ak);var i="";if(ag){var w=(16+ak.treeLevel*16)+"px",ai=ak.isExpand?"cell-expand":"cell-collapse";if(ak.isLeaf){i=["<span class='cell-treeIcon' style='padding-left: ",w,"'></span>"].join("")}else{i=["<span class='cell-treeIcon ",ai,"' style='padding-left: ",w,"'></span>"].join("")}}return['<td role="gridcell" ',al,">",i,am,"</td>"].join("")};var U=function(ai,p,ah,w){var i=p+1,ag=L.call(ac,ai,p,i);return['<td role="gridcell" class="ui-state-default ygrid-rownum" ',ag,">",i,"</td>"].join("")};var ad=function(ao,ak,aG,aH){var ar=[],am=this,aI=am.p.rowSequences===true?1:0,aB=[],aA="",at=a.ygrid.uidPref+(aH?-(aG+1):aG),ax=-1;if(ao.rowHeight){aA=ao.rowHeight+"px"}ar.push(['<tr style="height:',aA,'" role="row" id="',at,'" tabindex="-1" class="ui-widget-content ygrow ui-row-ltr">'].join(""));if(aI){ar.push(U(0,aG,am.p.page,am.p.rowNum))}for(var aC=0,aE=am.p.colModel.length;aC<aE-aI;aC++){var ap=am.p.colModel[aC+aI],av=ao.cellKeys[aC],az=am.p.cellLookup[av];(az&&az.isAlwaysShow)?aB.push(aC+aI):null;var aw=ao.data[ap.index],aq=(ap.name===am.p.treeColName);var w=aa(at,aw,aC+aI,ak,ao,aq);if(aq){ax=aC+aI}ar.push(w)}ar.push("</tr>");a("#"+am.p.id+" tbody:first").append(ar.join(""));var an=am.rows[am.rows.length-1],p,aF,aD=am.p.alwaysShowCellEditor,ah=(ao.rowHeight===undefined?an.offsetHeight:ao.rowHeight);for(var au=0,ay=aB.length;au<ay;au++){var aj=aB[au],al=am.p.colModel[aj],ai=al.name,ag=am.getCellEditOpt(ao,aj),aJ=ao.data[al.index],i=a.extend({},ag.editOptions||{},{ri:aG,key:ai,id:ak+"_"+ai,name:ai});if(ag.isAlwaysShow){if(aD&&a.isFunction(aD)){aD.call(am,a(an.cells[aj]),ak,aj,al,aJ,i,ah)}}}if(ax!==-1){p=an.cells[ax];aF=a("span.cell-treeIcon",p);aF.click(function(aK){var aM=aK.target.parentNode.parentNode,aL=parseInt(a.ygrid.stripPref(a.ygrid.uidPref,aM.id),10);if(am.p.treeIconClick&&a.isFunction(am.p.treeIconClick)&&!ao.isLeaf){am.p.treeIconClick.call(am,am.p.data[aL],(aL+1))}})}return a(an)};var W=function(aj,ai,ag){if(aj){if(!ac.p.scrollPage){R.emptyRows.call(ac,false);ag=1}else{ag=ag>1?ag:1}}else{return}ac.p.page=a.ygrid.intNum(aj[ac.p.localReader.page],ac.p.page);ac.p.lastpage=a.ygrid.intNum(aj[ac.p.localReader.total],1);ac.p.records=a.ygrid.intNum(aj[ac.p.localReader.records]);ac.p.reccount=aj.rows.length;for(var ah=0,p=aj.rows.length;ah<p;ah++){var w=ac.p.data.indexOf(aj.rows[ah]);ad.call(ac,aj.rows[ah],w+ag,w)}ac.refreshIndex();ac.updatePager.call(ac)};var g=function(w,ak){var ah,aj=this,ag,ai,p=aj.rows.length;for(ah=w;ah<p;ah++){if(aj.p.rowSequences){ag=parseInt(a(aj.rows[ah].cells[0]).html(),10);a(aj.rows[ah].cells[0]).html(ag+(ak?-1:+1))}ai=parseInt(a.ygrid.stripPref(a.ygrid.uidPref,aj.rows[ah].id),10);ai=ai+(ak?-1:+1);aj.rows[ah].id=a.ygrid.uidPref+ai}ac.refreshIndex()};ac.refreshIndex=function(){ac.p._indexMap={};for(var p=0,i=ac.rows.length;p<i;p++){ac.p._indexMap[a.ygrid.stripPref(a.ygrid.uidPref,ac.rows[p].id)]=p}};ac.deleteGridRow=function(i){var w=this,ag=a(w).getGridRowById(a.ygrid.uidPref+i),p;if(ag){p=ag.rowIndex;w.p.data.splice(i,1);a(ag).remove();g.call(w,p,true)}};ac.insertGridRow=function(ai,ag){var i=this,ah,al=a.ygrid.stripPref(a.ygrid.uidPref,i.rows[i.rows.length-1].id);var w=isNaN(parseInt(al,10))?0:parseInt(al,10);i.p.data.splice(ai,0,ag);if(ai<=w+1){ah=ad.call(i,ag,ai+1,ai,true);ah.insertBefore(a(i).getGridRowById(a.ygrid.uidPref+ai));var am,ak,aj=ah[0].rowIndex+1,p=ah[0].rowIndex-1;if(i.rows[aj]){if(i.p.rowSequences){am=a(i.rows[aj].cells[0]).html();a(ah[0].cells[0]).html(am)}ak=i.rows[aj].id;ah[0].id=ak}else{if(i.rows[p]!==a("tr.ygfirstrow",i.grid.bDiv)[0]){if(i.p.rowSequences){am=parseInt(a(i.rows[p].cells[0]).html(),10);a(ah[0].cells[0]).html(am+1)}ak=parseInt(a.ygrid.stripPref(a.ygrid.uidPref,i.rows[p].id),10);ah[0].id=a.ygrid.uidPref+(ak+1)}else{a(ah[0].cells[0]).html(1);ah[0].id=a.ygrid.uidPref+0}}g.call(i,ah[0].rowIndex+1,false)}};ac.modifyGridCell=function(ai,am,w){var i=this,ak=i.p.colModel[am],ag=i.getCellEditOpt(w,am),an=a(i).getGridRowById(a.ygrid.uidPref+ai),ah=ak.name;if(an==undefined){return}var p,al=an.cells[am],aj;if(ah=="rn"){return}p=w.data[ak.index][1];aj=w.data[ak.index][0];if(ag.isAlwaysShow){if(!w.isDetail){return}a(".cellEditor",al)[0].title=p;switch(ag.formatter){case"button":a(".cellEditor span.txt",al).html(aj);break;case"hyperlink":a(".cellEditor",al).html(aj);break;case"checkbox":a(".cellEditor input",al)[0].checked=(aj==1);a(".cellEditor",al)[0].title=(aj==1);break;case"image":al.editor.setValue(aj);break}}else{a(al).html(p);if(ag.edittype=="numberEditor"){if(aj.isNegative()){a(al).css({color:ag.editOptions.negtiveForeColor})}else{a(al).css({color:""})}}}};var s=function(){if(!a.isArray(ac.p.data)){return null}var p=ac.p.data,ag=parseInt(ac.p.rowNum,10),ah=p.length,ai=parseInt(ac.p.page,10),i=Math.ceil(ah/ag),w={};p=p.slice((ai-1)*ag,ai*ag);w[ac.p.localReader.total]=i==0?1:i;w[ac.p.localReader.page]=ai;w[ac.p.localReader.records]=ah;w[ac.p.localReader.root]=p;p=null;return w};R.emptyRows=function(i){var p=ac.rows.length>0?ac.rows[0]:null;a(this.firstChild).empty().append(p);if(i&&ac.p.scrollPage){a(ac.grid.bDiv.firstChild).css({height:"auto"});a(ac.grid.bDiv.firstChild.firstChild).css({height:0,display:"none"});if(ac.grid.bDiv.scrollTop!==0){ac.grid.bDiv.scrollTop=0}}};R.populate=function(ah){var i=ac.p.scrollPage&&ah===false,ag;if(ac.p.page===undefined||ac.p.page<=0){ac.p.page=Math.min(1,ac.p.lastpage)}ah=ah||1;if(ah>1){ag=function(){if(ac.p.page==1&&ac.grid.scrollTop==0){return}ac.p.page++;ac.grid.hDiv.loading=false;R.populate(ah-1)}}var p=!ac.p.scrollPage?1:ac.rows.length;var w=s();W(w,ac.grid.bDiv,p);if(ag){ag.call(ac)}if(i){R.populateVisible()}};ac.updatePager=function(){var p=this,ak,al,ai,i=parseInt(p.p.page,10)-1;if(i<0){i=0}i=i*parseInt(p.p.rowNum,10);al=i+p.p.reccount;al=al>p.p.data.length?p.p.data.length:al;if(p.p.scrollPage){var ap=a("tbody:first > tr:gt(0)",p.grid.bDiv);i=al-ap.length;p.p.reccount=ap.length;var am=ap.outerHeight()||p.grid.prevRowHeight;if(am){var ah=i*am;var ao=parseInt(p.p.records,10)*am;a(">div:first",p.grid.bDiv).css({height:ao}).children("div:first").css({height:ah,display:ah?"":"none"});if(p.grid.bDiv.scrollTop==0&&p.p.page>1){p.grid.bDiv.scrollTop=p.p.rowNum*(p.p.page-1)*am}}p.grid.bDiv.scrollLeft=p.grid.hDiv.scrollLeft}var aj=p.p.pager||"";if(aj){a(["#add_",p.id,",#del_",p.id].join("")).each(function(){(p.p.enable&&p.p.treeType===-1&&!p.p.hasRowExpand)?a(this).removeClass("ui-state-disabled"):a(this).addClass("ui-state-disabled")});if(p.p.viewRecords){if(p.p.reccount===0){a(".ui-paging-info",aj).html(a.ygrid.defaults.emptyrecords)}else{ak=i+1;ai=p.p.records;a(".ui-paging-info",aj).html(a.ygrid.formatString(a.ygrid.defaults.recordtext,ak,al,ai))}}if(p.p.showPageSet){a(".ui-pg-input",aj).val(p.p.page);var ag=a.ygrid.intNum(p.p.page,1),an=a.ygrid.intNum(p.p.lastpage,1);var w="_"+p.p.pager.substr(1);if(ag===1){a("#first"+w+", #prev"+w).addClass("ui-state-disabled").removeClass("ui-state-hover")}else{a("#first"+w+", #prev"+w).removeClass("ui-state-disabled")}if(ag===an){a("#next"+w+", #last"+w).addClass("ui-state-disabled").removeClass("ui-state-hover")}else{a("#next"+w+", #last"+w).removeClass("ui-state-disabled")}}}};if(ac.tagName.toUpperCase()!=="TABLE"){alert(a.ygrid.error.isNotTable);return}if(document.documentMode!==undefined){if(document.documentMode<5){alert(a.ygrid.error.isErrorMode);return}}a(this).empty().attr("tabindex","0");this.p=T;this.grid=R;this.p.useProp=!!a.fn.prop;if(this.p.colNames.length===0){for(var H=0,B=this.p.colModel.length;H<B;H++){this.p.colNames[H]=this.p.colModel[H].label||this.p.colModel[H].name}}if(this.p.colNames.length!==this.p.colModel.length){alert(a.ygrid.errors.model);return}if(this.p.rowSequences){this.p.colNames.unshift(a.ygrid.defaults.seqColText);this.p.colModel.unshift({label:a.ygrid.defaults.seqColText,name:"rn",width:ac.p.rowSeqWidth,sortable:false,resizable:true,align:"center"})}var m=a("<div class='ui-ygrid-view'></div>");a(m).insertBefore(this);a(this).removeClass("scroll").appendTo(m);var ae=a("<div class='ui-ygrid ui-widget ui-widget-content'></div>");a(ae).attr({id:"gbox_"+this.id,dir:"ltr"}).insertBefore(m);a(m).attr("id",this.id+"_view").appendTo(ae);a(this).attr({cellspacing:"0",cellpadding:"0",border:"0",role:"grid","aria-labelledby":"gbox_"+this.id});this.p.id=this.id;ac.p.localReader=a.extend(true,{root:"rows",page:"page",total:"total",records:"records",cell:"cell",id:"id"},ac.p.localReader);if(ac.p.scrollPage){ac.p.showPageSet=false}M.call(ac);a(ae).css("width",R.width+"px");a(m).css("width",R.width+"px").before("<div class='ui-ygrid-resize-mark' id='rs_m"+ac.p.id+"'>&#160;</div>");var V=a(["<table class='ui-ygrid-htable' style='width:",ac.p.tblwidth,"px' role='ygrid' aria-labelledby='gbox_",this.id,"' cellspacing='0' cellpadding='0' border='0'></table>"].join("")),f=a("<div class='ui-ygrid-hbox-ltr'></div>").append(V);R.hDiv=document.createElement("div");a(R.hDiv).addClass("ui-state-default ui-ygrid-hdiv").css({width:R.width+"px"}).append(f);R.hDiv.onselectstart=function(){return false};a(ac).before(R.hDiv);var F=["<thead><tr class='ui-ygrid-headers' role='rowheader'>"];var Y=a.ygrid.msie?"class='ui-th-div-ie'":"";var N=["<span class='s-ico' style='position: absolute;top:0;right:0;display:none;'>","<span class='ui-ygrid-ico-sort ui-icon-asc ui-state-disabled ui-icon ui-sort-ltr'/>","<span class='ui-ygrid-ico-sort ui-icon-desc ui-state-disabled ui-icon ui-sort-ltr'/>","</span>"].join("");for(var X=0,e=ac.p.colNames.length;X<e;X++){var O=[' title="',ac.p.colNames[X],'"'].join(""),G=ac.p.colModel[X],q=G.name;F.push("<th id='");F.push([ac.p.id,"_",q].join(""));F.push("' role='columnheader' class='ui-state-default ui-th-column ui-th-ltr'");F.push(O);F.push(">");F.push("<div id='");F.push([a.ygrid.uidPref,"_",ac.p.id,"_",q].join(""));F.push("' ");F.push(Y);F.push("><span style='overflow: hidden;position: absolute;left: 0;width: 100%;' class='colCaption'>");var l=(X+(ac.p.rowSequences?-1:0));if(ac.p.checkCols&&ac.p.checkCols.indexOf(l)>=0){var n=(ac.p.colNames[X]==""?"":"margin-bottom: 3px;margin-right: 3px;");F.push("<Input type='checkbox' style='");F.push(n);F.push(["vertical-align: middle' ofColIndex=",X,">"].join(""));F.push(ac.p.colNames[X]);F.push(" </span>")}else{F.push(ac.p.colNames[X]);F.push("</span>")}if(!G.width){G.width=150}else{G.width=parseInt(G.width,10)}F.push(N);F.push("</div></th>")}F.push("</tr></thead>");N=null;V.append(F.join(""));a("input",V).click(function(w){var i=parseInt(a(this).attr("ofColIndex"),10)-(ac.p.rowSequences?1:0),p=this.checked;ac.getControlGrid().gridHandler.doAllChecked(ac.getControlGrid(),i,p);w.stopPropagation()});F=a("thead:first",R.hDiv).get(0);var C=a("tr:first",F),Q,K,ab,Z;var t=["<tr class='ygfirstrow' role='row' style='height:auto'>"];a("th",C).each(function(i){Z=ac.p.colModel[i];Q=Z.width;if(Z.resizable===undefined){Z.resizable=true}if(Z.resizable){K=document.createElement("span");a(K).html("&#160;").addClass("ui-ygrid-resize ui-ygrid-resize-ltr").css("cursor","col-resize")}else{K=""}a(this).css("width",Q+"px").prepend(K);K=null;var p="";if(Z.hidden){a(this).css("display","none");p="display:none;"}t.push("<td role='gridcell' style='height:0px;width:");t.push(Q+"px;");t.push(p);t.push("'></td>");R.headers[i]={width:Q,el:this};if(typeof Z.sortable!=="boolean"){Z.sortable=true}a(">div",this).addClass("ui-ygrid-sortable")}).mousedown(function(p){if(a(p.target).closest("th>span.ui-ygrid-resize").length==1){var i=o.call(ac,this);R.dragStart(i,p,x.call(ac,i))}}).click(function(ah){var w=o.call(ac,this);var p=ac.p.colModel[w].sortable;if(!ac.p.lastsort){ac.p.sortorder="asc"}else{if(ac.p.lastsort===w){ac.p.sortorder=(ac.p.sortorder=="asc"?"desc":"asc")}else{var i=ac.grid.headers[ac.p.lastsort].el;a("div span.s-ico",i).hide();a("div span.colCaption",i).css({width:"100%"});a("span.ui-ygrid-ico-sort",i).addClass("ui-state-disabled");ac.p.sortorder="asc"}}if(p){a("div span.s-ico",this).show();var ag=this.clientWidth-a("div span.s-ico",this)[0].clientWidth;a("div span.colCaption",this).css({width:ag+"px"});a("span.ui-ygrid-ico-sort",this).addClass("ui-state-disabled");a("div span.ui-icon-"+ac.p.sortorder,this).removeClass("ui-state-disabled");if(a.isFunction(ac.p.onSortClick)){ac.p.onSortClick.call(ac,o.call(ac,this),ac.p.sortorder=="asc"?"desc":"asc")}else{}ac.p.lastsort=w}else{ac.p.lastsort=null}});t.push("</tr>");var P=document.createElement("tbody");this.appendChild(P);a(this).addClass("ui-ygrid-btable").append(t.join(""));t=null;if(a.ygrid.msie){if(String(ac.p.height).toLowerCase()==="auto"){ac.p.height="100%"}}R.bDiv=document.createElement("div");var j=ac.p.height+(isNaN(ac.p.height)?"":"px");a(R.bDiv).addClass("ui-ygrid-bdiv").css({height:j,width:R.width+"px"}).append(a('<div style="position:relative;'+(a.ygrid.msie&&a.ygrid.msiever()<8?"height:0.01%;":"")+'"></div>').append("<div></div>").append(this)).scroll(R.scrollGrid);a("table:first",R.bDiv).css({width:ac.p.tblwidth+"px"});if(!a.support.tbody){if(a("tbody",this).length===2){a("tbody:gt(0)",this).remove()}}a(R.hDiv).after(R.bDiv);a(m).mousemove(function(i){if(R.resizing){R.dragMove(i)}});a(".ui-ygrid-labels",R.hDiv).bind("selectstart",function(){return false});a(document).bind("mouseup.yGrid"+ac.p.id,function(){if(R.resizing){R.dragEnd();return false}return true});if(ac.p.populate){R.populate()}this.grid.cols=this.rows[0].cells;R.clearSelectCells=function(){if(ac.p.selectCells){for(var w=0,p=ac.p.selectCells.length;w<p;w++){a(ac.p.selectCells[w]).removeClass("ui-state-highlight").removeClass("ui-cell-multiselect")}}ac.p.selectCells=[]};a(R.bDiv).mousemove(function(ah){if(ac.selecting&&ah.target.tagName==="TD"){var w=ac.p.selectCells[0],p=ah.target;var i=Math.min(w.parentElement.rowIndex,p.parentElement.rowIndex),ai=Math.max(w.parentElement.rowIndex,p.parentElement.rowIndex),ag=Math.min(w.cellIndex,p.cellIndex),al=Math.max(w.cellIndex,p.cellIndex);R.clearSelectCells();ac.p.selectCells.push(w);a(w).addClass("ui-state-highlight");if(ah.target==w){return}ac.p.selectRow=w.parentElement.id;ac.p.selectCell=w.cellIndex;for(var aj=i;aj<=ai;aj++){var an=ac.rows[aj];if(!an){continue}for(var am=ag;am<=al;am++){var ak=an.cells[am];if(a.inArray(ac.p.selectCells,ak)===-1&&ak!==w){a(ak).addClass("ui-cell-multiselect");ac.p.selectCells.push(ak)}}}}});a(ac).mousedown(function(i){if(i.target.tagName==="TD"){document.onselectstart=function(){return false};var w=i.target;var p=a(w,ac.rows).closest("tr.ygrow");a("td.ui-state-highlight",ac.grid.bDiv).removeClass("ui-state-highlight");R.clearSelectCells();ac.p.selectCells.push(i.target);a(i.target).addClass("ui-state-highlight");ac.selecting=true}}).mouseup(function(i){if(i.target.tagName==="TD"){document.onselectstart=function(){return true}}ac.selecting=false;if(i.target.tagName==="INPUT"){return}window.setTimeout(function(){if(ac.grid){var w=ac.grid.bDiv.scrollLeft,p=ac.grid.bDiv.scrollTop;a("#"+ac.p.knv).attr("tabindex","-1").focus();ac.grid.bDiv.scrollTop=p;ac.grid.bDiv.scrollLeft=w}},0)}).click(function(ag){var aj=ag.target;var ai=a(aj,ac.rows).closest("tr.ygrow");if(a(ai).length===0||ai[0].className.indexOf("ui-state-disabled")>-1){return}var i=ai[0].id,p=a.ygrid.getCellIndex(aj);if(aj.tagName!=="TD"){return}if(ac.p.selectRow!=i||ac.p.selectCell!=p){if(ac.p.selectRow){var ah=a(ac).yGrid("getGridRowById",ac.p.selectRow);ah&&a(ah.cells[ac.p.selectCell]).removeClass("ui-state-highlight")}if(ac.p.editCells.length>0){a(ac).yGrid("saveCell",ac.p.editCells[0].ir,ac.p.editCells[0].ic)}if(a.isFunction(ac.p.onSelectRow)){window.setTimeout(function(){ac.p.onSelectRow.call(ac,ai[0].rowIndex);ac.p.selectRow=i;ac.p.selectCell=p;var am=ac.grid.bDiv.scrollLeft,al=ac.grid.bDiv.scrollTop,ak=a("#"+ac.p.knv);ak.css({left:ag.clientX+"px",top:ag.clientY+"px"});ak.attr("tabindex","-1").focus();ac.grid.bDiv.scrollTop=al;ac.grid.bDiv.scrollLeft=am},0)}var w=a(ac).yGrid("getGridRowById",i);w&&a(w.cells[p]).addClass("ui-state-highlight")}else{a(ac).yGrid("editCell",ai[0].rowIndex,p,true,ag)}}).dblclick(function(p){var ag=p.target;if(a.ygrid.msie){a(ag).click();a(ag).click()}var w=a(ag,ac.rows).closest("tr.ygrow");if(a(w).length===0){return}var i=w[0].rowIndex;if(a.isFunction(ac.p.ondblClickRow)){ac.p.ondblClickRow.call(ac,i)}}).bind("reloadGrid",function(ak,p){var ai=a("tr.ui-ygrid-headers",ac.grid.hDiv);var w=a("tr.ygfirstrow",R.bDiv);if(ac.p.colModel.isChange){ac.p.colModel.isChange=false;a(ac.grid.headers).each(function(i){var an=this.el;if(ac.p.colModel[i].hidden){a(an).css("display","none");w.find("td").eq(i).css("display","none")}else{a(an).css("display","");w.find("td").eq(i).css("display","")}});if(ac.p.groupHeaders.length>0){for(var ag=0,aj=ac.grid.headers.length;ag<aj;ag++){var ah=ac.grid.headers[ag].el,am=ai[0].cells;a("div",ah).attr("style","");if(a.inArray(am,ah)==-1){ai.append(ah)}else{ah.after(ac.grid.headers[ag-1].el)}}a(ac.grid.hDiv).find("tr.ui-ygrid-columnheader").remove();a(ac).initGroupHeaders(ac.p.groupHeaders)}}if(p&&p.page){var al=p.page;if(al>ac.p.lastpage){al=ac.p.lastpage}if(al<1){al=1}ac.p.page=al;if(ac.grid.prevRowHeight){ac.grid.bDiv.scrollTop=(al-1)*ac.grid.prevRowHeight*ac.p.rowNum}else{ac.grid.bDiv.scrollTop=0}}if(ac.grid.prevRowHeight&&ac.p.scrollPage){delete ac.p.lastpage;ac.grid.populateVisible()}else{ac.grid.populate()}});if(this.p.showPager){var I=a.extend(this.p.navButtons,a.ygrid.nav);var k=a("<div id='"+this.p.id+"_pager'></div>");var z=function(){if(!a(this).hasClass("ui-state-disabled")){a(this).addClass("ui-state-hover")}},y=function(){a(this).removeClass("ui-state-hover")};ac.p.pager="#"+k[0].id;k.css({width:R.width+"px"}).addClass("ui-state-default ui-ygrid-pager").attr("dir","ltr").appendTo(ae);k.append(["<div id='pg_",k[0].id,"' class='ui-pager-control' role='group' style='height:100%'>","<table cellpadding='0' border='0' class='ui-pg-table' style='width:100%;height:100%;' role='row'>","<tbody><tr><td id='",k[0].id,"_left' align='left' style='width:300px'></td>","<td id='",k[0].id,"_center' align='center' style='white-space:pre;'></td>","<td id='",k[0].id,"_right' align='right' style='width:300px'></td>","</tr></tbody></table></div>"].join(""));var D,J=a("<table cellpadding='0' border='0' class='ui-pg-table navtable' style='float:left;table-layout:auto;'><tbody><tr></tr></tbody></table>"),E="<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='ui-separator'></span></td>";if(I.add){D=a("<td class='ui-pg-button ui-corner-all'></td>");a(D).append(["<div class='ui-pg-div'><span class='ui-icon ",I.addIcon,"'></span>",I.addtext,"</div>"].join(""));a("tr",J).append(D);a(D,J).attr({title:I.addtitle||"",id:"add_"+ac.p.id}).click(function(){if(!a(this).hasClass("ui-state-disabled")){if(a.isFunction(I.addFunc)){I.addFunc.call(ac,"add")}else{}}return false}).hover(z,y);D=null}if(I.del){D=a("<td class='ui-pg-button ui-corner-all'></td>");a(D).append(["<div class='ui-pg-div'><span class='ui-icon ",I.delIcon,"'></span>",I.deltext,"</div>"].join(""));a("tr",J).append(D);a(D,J).attr({title:I.deltitle||"",id:"del_"+ac.p.id}).click(function(){if(!a(this).hasClass("ui-state-disabled")){if(a.isFunction(I.delFunc)){I.delFunc.call(ac,"del")}else{}}return false}).hover(z,y);D=null}if(I.add||I.del){a("tr",J).append(E)}a(ac.p.pager+"_left",ac.p.pager).append(J);D=null;J=null;if(ac.p.showPageSet){var h="pg_"+k[0].id;var v=["<table cellpadding='0' border='0' style='table-layout:auto;' class='ui-pg-table'><tbody><tr>"];var u=["first_"+k[0].id,"prev_"+k[0].id,"next_"+k[0].id,"last_"+k[0].id];var r="<td><div id='pagination_"+k[0].id+"' class='ui-pagination'><ul></ul></div></td>";v.push("<td id='");v.push(u[0]);v.push("' class='ui-pg-button'><span class='ui-icon ui-icon-seek-first'></span></td>");v.push("<td id='");v.push(u[1]);v.push("' class='ui-pg-button'><span class='ui-icon ui-icon-seek-prev'></span></td>");v.push(r);v.push("<td id='");v.push(u[2]);v.push("' class='ui-pg-button'><span class='ui-icon ui-icon-seek-next'></span></td>");v.push("<td id='");v.push(u[3]);v.push("' class='ui-pg-button'><span class='ui-icon ui-icon-seek-end'></span></td>");v.push("</tr></tbody></table>");a(ac.p.pager+"_center",ac.p.pager).append(v.join(""));var af="_"+ac.p.pager.substr(1);a("#first"+af+", #prev"+af+", #next"+af+", #last"+af).click(function(){if(a(this).hasClass("ui-state-disabled")){return false}var aj=a.ygrid.intNum(ac.p.page,1),ah=a.ygrid.intNum(ac.p.lastpage,1),ak=false,p=true,i=true,ai=true,w=true,ag=this;if(ah===1){p=false;i=false;ai=false;w=false}else{if(ah>1&&aj>=1){if(aj===1){p=false;i=false}else{if(aj===ah){ai=false;w=false}}}}if(ag.id==="first"+af&&p){ac.p.page=1;ak=true}if(ag.id==="prev"+af&&i){ac.p.page=(aj-1);ak=true}if(ag.id==="next"+af&&ai){ac.p.page=(aj+1);ak=true}if(ag.id==="last"+af&&w){ac.p.page=ah;ak=true}if(ak){R.populate()}return false});a("input.ui-pg-input","#"+h).keypress(function(p){var i=p.charCode||p.keyCode||0;if(i===13){a(this).val(a.ygrid.intNum(a(this).val(),1));ac.p.page=(a(this).val()>0)?a(this).val():ac.p.page;if(ac.p.page>ac.p.lastpage){ac.p.page=ac.p.lastpage}R.populate();return false}else{if(i>=48&&i<=57){return this}}return false})}if(ac.p.viewRecords===true){a(ac.p.pager+"_right",ac.p.pager).append("<div style='text-align:right' class='ui-paging-info'></div>")}ac.updatePager.call(ac);a(ac).bindKeys()}})}})(jQuery);(function(a){a.ygrid.extend({getGridParam:function(b){var c=this[0];if(!c||!c.grid){return null}if(!b){return c.p}return c.p[b]!==undefined?c.p[b]:null},setGridParam:function(b){return this.each(function(){if(this.grid&&typeof b==="object"){for(var c in b){var d=b[c];if(a.isArray(d)){this.p[c]=d.slice(0)}else{this.p[c]=d}}}})},refreshData:function(){return this.each(function(){var e=this,d=e.grid.bDiv.scrollTop,c=e.grid.bDiv.scrollLeft;if(!e.grid){return}var b=a("#"+e.p.id+" tbody:first tr:first")[0];a("#"+e.p.id+" tbody:first").empty().append(b);e.updatePager.call(e);e.grid.populate();a(e).setErrorCells();a(e).setErrorRows();e.grid.bDiv.scrollTop=d;e.grid.bDiv.scrollLeft=c})},clearGridData:function(){return this.each(function(){var c=this;if(!c.grid){return}var b=a("#"+c.p.id+" tbody:first tr:first")[0];a("#"+c.p.id+" tbody:first").empty().append(b);c.p.selectRow=null;c.p.selectCell=null;c.p.editCells=[];c.p.records=0;c.p.page=1;c.p.lastpage=1;c.p.reccount=0;c.p.data=[];c.updatePager.call(c)})},bindKeys:function(){return this.each(function(){var c=function(g,f,e){var h,d=g.length;if(e==="next"){for(h=f+1;h<d;h++){if(g[h].hidden!==true){return h}}}else{if(e==="pre"){for(h=f-1;h>=0;h--){if(g[h].hidden!==true){return h}}}}return -1};this.p.knv=this.p.id+"_kn";var b=a("#"+this.p.knv);if(b.length==0){b=a(["<div tabindex='-1' style='left:-1px;width:1px;height:0px;' id='",this.p.knv,"'></div>"].join("")).insertBefore(a(this.grid.bDiv).parents(".ui-ygrid-view")[0])}b.focus().keydown(function(u,e){var j=a(".ui-ygrid-btable",u.target.nextSibling)[0],o=j.p.colModel;j.keyEvent=true;var m=u.charCode||u.keyCode||0;if(m==0&&e!==undefined){m=e.charCode||e.keyCode||0}var r=j.p.selectRow,n=j.p.selectCell,f,k;if(a(j).getGridRowById(r)==undefined){k=false}else{if(m===13||m===108||m===9){r=a(j).getGridRowById(r).rowIndex;n=c(o,n,"next");if(n==-1){n=j.p.rowSequences?1:0;r=r+1}if(r==j.rows.length){var l=a(j).yGrid("getGridRowById",j.p.selectRow);l&&a(l.cells[j.p.selectCell]).removeClass("ui-state-highlight");if(j.p.editCells.length>0){a(j).yGrid("saveCell",j.p.editCells[0].ir,j.p.editCells[0].ic)}j.getControlGrid().requestNextFocus()}k=true}else{if(m===38){r=a(j).getGridRowById(r).rowIndex-1;if(r<0){return}k=true}else{if(m===40){r=a(j).getGridRowById(r).rowIndex+1;if(r>=j.rows.length){return}k=true}else{if(m===37){r=a(j).getGridRowById(r).rowIndex;n=c(o,n,"pre");if(n<(j.p.rowSequences?1:0)){return}k=true}else{if(m===39){r=a(j).getGridRowById(r).rowIndex;n=c(o,n,"next");if(n===-1||n>=o.length){return}k=true}}}}}}if(k&&j.p.selectRow&&j.p.selectCell){j.grid.clearSelectCells();a(a(j).getGridRowById(j.p.selectRow).cells[j.p.selectCell]).find(".celleditor").blur();f=j.rows[r];if(f){f.cells[n].click();a(j).scrollVisibleCell(r,n)}u.preventDefault();u.stopPropagation()}if(j.p.extKeyDownEvent&&a.isFunction(j.p.extKeyDownEvent)&&!u.ctrlKey){j.p.extKeyDownEvent.call(j,u)}j.keyEvent=false;if(u.ctrlKey){var w=a("#copyText"+j.p.id),s=j.grid.bDiv.scrollTop,h=j.grid.bDiv.scrollLeft;if(!w[0]){w=a("<textarea id='copyText"+j.p.id+"'></textarea>").appendTo(a(document.body));w.css({position:"fixed",top:"-10000px",left:h+"px",width:"1000px",height:"200px"})}var x=[],q=-1,g=(j.p.selectCells==undefined?0:j.p.selectCells.length);for(var v=0;v<g;v++){var d=j.p.selectCells[v],p=a.ygrid.stripHtml(a(d).html());r=d.parentElement.rowIndex-1;var t="";if(parseInt(q,10)>=0){if(r>q){t="\n";q=r}}else{q=r}if(t.length>0){x.pop()}x.push(t);x.push(p);x.push("\t")}x.pop();w.val(x.join(""));w.focus();w.select();w.keyup(function(i){var y=i.charCode||i.keyCode||0;j.grid.bDiv.scrollTop=s;j.grid.bDiv.scrollLeft=h;if(i.ctrlKey&&y==86&&j.p.enable){w.blur();if(j.p.afterPaste&&a.isFunction(j.p.afterPaste)){j.p.afterPaste.call(j,a("#copyText"+j.p.id).val())}}else{if(i.ctrlKey&&y==67){if(j.p.afterCopy&&a.isFunction(j.p.afterCopy)){j.p.afterCopy.call(j,a("#copyText"+j.p.id).val())}}}w.remove();window.setTimeout(function(){var z=j.grid.bDiv.scrollTop;a("#"+j.p.knv).attr("tabindex","-1").focus();j.grid.bDiv.scrollTop=z},0)});j.grid.bDiv.scrollTop=s;j.grid.bDiv.scrollLeft=h}})})},setGridWidth:function(b){return this.each(function(){if(!this.grid){return}var c=this;if(isNaN(b)){return}b=parseInt(b,10);c.grid.width=c.p.width=b;a("#gbox_"+c.p.id).css("width",b+"px");a(c.p.id+"_view").css("width",b+"px");a(c.grid.bDiv).css("width",(b-2)+"px");a(c.grid.hDiv).css("width",(b-2)+"px");if(c.p.showPager){a(c.p.pager).css("width",b+"px")}})},setGridHeight:function(b){return this.each(function(){var h=this;if(!h.grid){return}var f=a(h.grid.hDiv).height();if(f===0){var d=a("tr.ui-ygrid-headers",h.grid.hDiv);var e=a("tr.ui-ygrid-columnheader",h.grid.hDiv).length+d.length;var c=a("th",d).height();f=(c+2)*e}b=b-f-a(h.p.pager).height()-2;var g=a(h.grid.bDiv);g.css({height:(b)+(isNaN(b)?"":"px")});h.p.height=b;if(h.p.scroll){h.grid.populateVisible()}})},initGroupHeaders:function(b){return this.each(function(){var d=this,g=b.length;d.p.groupHeaders=[];if(g>0){for(var e=0;e<g;e++){var f=b[e];a(d).setGroupHeaders(f);d.p.groupHeaders.push(f)}}var n=a("tr.ui-ygrid-columnheader",d.grid.hDiv);for(var j=n.length-1;j>=0;j--){var m=n[j];for(var o=0,l=0,h=m.cells.length;o<h;o++){var k=a(m.cells[o]),c=a(d.grid.headers[l].el);if(k[0].colSpan>1){l+=k[0].colSpan}else{if(k[0].style.display!=="none"){c[0].rowSpan+=1;c.insertBefore(k);a("div",c).css({height:c.height()+"px",lineHeight:c.height()+"px"});k.remove()}l++}}}})},setGroupHeaders:function(b){return this.each(function(){var o=function(B,z){var A=z.length;for(var j=0;j<A;j++){if(z[j].startColumnName===B){return j}}return -1};var c=this,l=b,n=a("tr.ui-ygrid-headers",c.grid.hDiv),s=a("<tr class='ui-ygrid-columnheader' role='columnheader'></tr>").insertBefore(n),h=a(c.grid.hDiv).find("tr.yg-first-row-header");if(h[0]===undefined){h=a("<tr>",{role:"row","aria-hidden":"true"}).addClass("yg-first-row-header").css("height","auto")}else{h.empty()}for(var u=0,w=c.p.colModel.length;u<w;u++){var e={height:0,width:c.grid.headers[u].width+"px",display:(c.p.colModel[u].hidden?"none":"")};a("<th>",{role:"gridcell"}).css(e).addClass("ui-first-th-ltr").appendTo(h)}var k,g,t,d,f;for(var v=0,p=c.p.colModel.length;v<p;v++){g=o(c.p.colModel[v].name,l);if(g>=0){k=l[g];var y=0,q=0,r=k.numberOfColumns,x=c.p.colModel.length;for(t=0,d=0;d<r&&(v+d<x);d++){if(!c.p.colModel[v+d].hidden){t++;y+=c.grid.headers[v+d].width+1}else{q++}}f=a('<th class="ui-state-default ui-th-column ui-th-ltr" role="columnheader"></th>').html(k.titleText).appendTo(s);if(t>0){f.attr("colspan",String(t));f.css({width:y+"px"});f.attr("title",f.text())}if(t===0){f.hide();f.attr("colspan",String(q))}v+=t-1+q}else{var m=a('<th class="ui-state-default ui-th-column ui-th-ltr" role="columnheader"></th>').appendTo(s);if(c.p.colModel[v].hidden){m.hide()}}}a(c.grid.hDiv).find(".ui-ygrid-htable").children("thead").prepend(h);a(c).bind("yGridResizeStop.setGroupHeaders",function(z,j,i){h.find("th").eq(i).width(j-1)})})},getGridRowById:function(b){var c;this.each(function(){try{var d=this.rows.length;while(d--){if(b.toString()===this.rows[d].id){c=this.rows[d];break}}}catch(f){c=a(this.grid.bDiv).find("#"+b)}});return c},getGridRowAt:function(c){var b;this.each(function(){var d=this;b=d.rows[c]});return b},getGridCellAt:function(d,c){var b;this.each(function(){var e=this;var f=e.rows[d];if(f){b=f.cells[c]}});return b},setErrorCells:function(b){return this.each(function(){var c=this;if(c.p.errorCells){for(var g=0,j=c.p.errorCells.length;g<j;g++){var h=c.p.errorCells[g].cell;if(h){h.find("div").remove();h.removeAttr("position");h.attr({title:h.html()})}}}var f=b||c.p.errorCells;if(f==undefined||f.length==0){return}var n,m,l,d;c.p.errorCells=[];for(var e=0,k=f.length;e<k;e++){n=f[e];m=a.ygrid.uidPref+n.rowIndex;l=a(c).getGridRowById(m);if(l){d=a(l.cells[n.colIndex+(c.p.rowSequences?1:0)]);d.attr({title:n.errorMsg}).css({position:"relative"});a("<div></div>").addClass("ui-cell-error").appendTo(d);n.cell=d}c.p.errorCells.push(n)}})},setErrorRows:function(b){return this.each(function(){var c=this;if(c.p.errorRows){for(var f=0,g=c.p.errorRows.length;f<g;f++){var l=c.p.errorRows[f].row;if(l){a(l.cells[0]).find("div").remove();a(l.cells[0]).removeAttr("position")}}}var h=b||c.p.errorRows;if(h==undefined||h.length==0){return}var j,m,k;c.p.errorRows=[];for(var e=0,d=h.length;e<d;e++){j=h[e];m=a.ygrid.uidPref+j.rowIndex;k=a(c).getGridRowById(m);if(k){a(k.cells[0]).attr({title:j.errorMsg}).css({position:"relative"});a("<div></div>").addClass("ui-cell-error").appendTo(a(k.cells[0]));j.row=k}c.p.errorRows.push(j)}})},editCell:function(e,c,b,d){return this.each(function(){var i=this;if(!i.grid){return}c=parseInt(c,10);i.p.selectRow=i.rows[e].id;if(i.p.editCells.length>0){if(b===true){if(e==i.p.iRow&&c==i.p.iCol){return}}a(i).yGrid("saveCell",i.p.editCells[0].ir,i.p.editCells[0].ic)}var m=i.p.colModel[c],k=a.ygrid.stripPref(a.ygrid.uidPref,i.rows[e].id),o=i.p.data[k],g=i.getCellEditOpt(o,c),l=g.formatter;var p=m.name;if(p==="rn"||l==undefined||l=="button"||l=="hyperlink"||l=="checkbox"||l=="image"){return}var n=a("td:eq("+c+")",i.rows[e]),j=o.data[m.index][2];if(j===undefined||j===null){j=m.editable}if(j===undefined||j===null){j=i.p.enable}var h=(o.isEditable===undefined?true:o.isEditable);if(j===true&&b===true&&h&&!n.hasClass("not-editable-cell")){if(parseInt(i.p.iCol,10)>=0&&parseInt(i.p.iRow,10)>=0){a("td:eq("+i.p.iCol+")",i.rows[i.p.iRow]).removeClass("edit-cell ui-state-highlight");a(i.rows[i.p.iRow]).removeClass("selected-row ui-state-hover")}a(n).addClass("edit-cell ui-state-highlight");a(i.rows[e]).addClass("selected-row ui-state-hover");if(!g.edittype){g.edittype="label"}i.p.editCells.push({ir:e,ic:c,name:p,v:o.data[m.index],cell:n});var f=a.extend({},g.editOptions||{},{event:d,key:g.key,id:e+"_"+p,name:p});if(g.customedit&&i.p.createCellEditor&&a.isFunction(i.p.createCellEditor)){i.p.createCellEditor.call(i,n,g.edittype,e,c,f)}}i.p.iCol=c;i.p.iRow=e})},saveCell:function(c,b){return this.each(function(){var h=this,m;if(!h.grid){return}if(h.p.editCells.length>=1){m=0}else{m=null}if(m!==null){var d=a("td:eq("+b+")",h.rows[c]),q,o=a.ygrid.stripPref(a.ygrid.uidPref,h.rows[c].id),e=h.getCellEditOpt(h.p.data[o],b),r=false;if(e.customedit&&h.p.endCellEditor&&a.isFunction(h.p.endCellEditor)){q=h.p.endCellEditor.call(h,d,e.edittype,c,b)}var j=(q==undefined?"":q[0]);var p=h.p.editCells[m].v===undefined?"":h.p.editCells[m].v[0];var g=function(s){var i=false;if(s==undefined||s==null||s.length==0){i=true}return i};var n=function(y,x){if(y==null&&x!==null){return false}else{if(y!==null&&x==null){return false}else{if(y==null&&x==null){return true}else{if(y instanceof Decimal&&x instanceof Decimal){return y.equals(x)}}}}switch(e.edittype){case"dict":if(e.editOptions.multiSelect){if(y.length!=x.length){return false}else{for(var u=0,s=y.length;u<s;u++){var v=false;for(var t=0,w=x.length;t<w;t++){if(y[u].oid==x[t].oid){v=true;break}}if(!v){return false}}return true}}return y.oid==x.oid}return y==x};if((g(j)&&g(p))||n(j,p)){a(h).yGrid("restoreCell",c,b)}else{r=true;a(h).yGrid("setCell",h.rows[c].id,b,q,false,false);h.p.editCells.splice(0,1)}if(h.p.afterEndCellEditor&&a.isFunction(h.p.afterEndCellEditor)){h.p.afterEndCellEditor.call(h,d,e.edittype,r,c,b)}}if(h.p.errorCells){for(var f=0,l=h.p.errorCells.length;f<l;f++){var k=h.p.errorCells[f];if(k.rowIndex+1==c&&(h.p.rowSequences?k.colIndex+1:k.colIndex)==b){k.cell.attr({title:k.errorMsg}).css({position:"relative"});a("<div></div>").addClass("ui-cell-error").appendTo(k.cell)}}}})},restoreCell:function(c,b){return this.each(function(){var f=this,d;if(!f.grid){return}if(f.p.editCells.length>=1){d=0}else{d=null}if(d!==null){var e=a("td:eq("+b+")",f.rows[c]);a(e).empty().attr("tabindex","-1");a(f).yGrid("setCell",f.rows[c].id,b,f.p.editCells[d].v,false,false);f.p.editCells.splice(0,1)}})},setCell:function(d,e,b,f,c){return this.each(function(){var h=this,j=-1,o,k;if(!h.grid){return}if(isNaN(e)){a(h.p.colModel).each(function(p){if(this.name===e){j=p;return false}})}else{j=parseInt(e,10)}if(j>=0){var g=a(h).yGrid("getGridRowById",d),m=parseInt(a.ygrid.stripPref(a.ygrid.uidPref,d),10);if(g){var l=a("td:eq("+j+")",g);if(b!==undefined){o=b[1];k={title:o};a(l).html(o).attr(k);var n=h.p.colModel[j],i;h.p.data[m].data[n.index]=b}if(typeof f==="string"){a(l).addClass(f)}else{if(f){a(l).css(f)}}if(typeof c==="object"){a(l).attr(c)}}}})},scrollVisibleCell:function(c,b){return this.each(function(){var i=this;var d=i.grid.bDiv.clientHeight,m=i.grid.bDiv.scrollTop,e=i.rows[c].offsetTop+i.rows[c].clientHeight,l=i.rows[c].offsetTop;if(e>=d+m){i.grid.bDiv.scrollTop=e-d+2}else{if(l<m){i.grid.bDiv.scrollTop=i.rows[c].offsetTop}}var h=i.grid.bDiv.clientWidth,g=i.grid.bDiv.scrollLeft,j=i.rows[c].cells[b].offsetLeft+i.rows[c].cells[b].clientWidth,k=i.rows[c].cells[b].offsetLeft;if(j>=h+parseInt(g,10)){i.grid.bDiv.scrollLeft=i.grid.bDiv.scrollLeft+i.rows[c].cells[b].clientWidth}else{if(k<g){var f=k-i.rows[c].cells[b].clientWidth;i.grid.bDiv.scrollLeft=f<0?0:f}}})},clearBeforeUnload:function(){return this.each(function(){var d=this.grid;if(a.isFunction(d.emptyRows)){d.emptyRows.call(this,true,true)}a(document).unbind("mouseup.yGrid"+this.p.id);a(d.hDiv).unbind("mousemove");a(d.bDiv).unbind("mousemove");a(this).unbind();d.dragEnd=null;d.dragMove=null;d.dragStart=null;d.emptyRows=null;d.populate=null;d.populateVisible=null;d.scrollGrid=null;d.clearSelectCells=null;d.timer=null;d.prevRowHeight=null;d.bDiv=null;d.hDiv=null;d.cols=null;var c,b=d.headers.length;for(c=0;c<b;c++){d.headers[c].el=null}this.updatepager=null;this.refreshIndex=null;this.modifyGridCell=null;this.formatter=null;this.grid=null;this.p._indexMap=null;this.p.data=null;this.p=null})},GridDestroy:function(){return this.each(function(){if(this.grid){if(this.p.pager){a(this.p.pager).remove()}try{a(this).clearBeforeUnload();a("#gbox_"+this.id).remove()}catch(b){}}})}})})(jQuery);(function(a){a.fmatter={};a.fn.fmatter=function(g,h,f,b,c){var d=h;f=a.extend({},a.ygrid.formatter,f);try{d=a.fn.fmatter[g].call(this,h,f,b,c)}catch(e){}return d};a.extend(a.fmatter,{isBoolean:function(b){return typeof b==="boolean"},isObject:function(b){return(b&&(typeof b==="object"||a.isFunction(b)))||false},isString:function(b){return typeof b==="string"},isNumber:function(b){return typeof b==="number"&&isFinite(b)},isValue:function(b){return(this.isObject(b)||this.isString(b)||this.isNumber(b)||this.isBoolean(b))},isEmpty:function(b){if(!this.isString(b)&&this.isValue(b)){return false}if(!this.isValue(b)){return true}b=a.trim(b).replace(/\&nbsp\;/ig,"").replace(/\&#160\;/ig,"");return b===""},extend:function(b,c){if(a.isFunction(c)){a.fn.fmatter[b]=c}}});a.fn.fmatter.defaultFormat=function(c,b){return(a.fmatter.isValue(c)&&c!=="")?c:b.defaultValue||"&#160;"};a.fn.fmatter.hyperlink=function(d,b){var f={baseLinkUrl:b.baseLinkUrl,showAction:b.showAction,addParam:b.addParam||"",target:b.target,idName:b.idName},c="",e;if(b.colModel!==undefined&&b.colModel.formatOptions!==undefined){f=a.extend({},f,b.colModel.formatOptions)}if(f.target){c="target="+f.target}if(f.baseLinkUrl){e=f.baseLinkUrl+f.showAction+"?"+f.idName+"="+b.rowId+f.addParam}else{e="#"}if(a.fmatter.isString(d)||a.fmatter.isNumber(d)){return["<a  style='width: 100%' ",c," href='",e,"' class='ui-hyperlink'>",d,"</a>"].join("")}return a.fn.fmatter.defaultFormat(d,b)};a.fn.fmatter.button=function(c,b){if(a.fmatter.isString(c)||a.fmatter.isNumber(c)){c=typeof(c)=="undefined"?"":c;return"<button style='width: 100%;height: 100%' class='ui-button'>"+c+"</button>"}return a.fn.fmatter.defaultFormat(c,b)};a.fn.fmatter.checkbox=function(e,c){var f=a.extend({},c.checkbox),d;if(c.colModel!==undefined&&c.colModel.formatOptions!==undefined){f=a.extend({},f,c.colModel.formatOptions)}if(f.disabled===true||(c.colModel.editable===undefined?!this.p.enable:!c.colModel.editable)){d='disabled="disabled"'}else{d=""}if(a.fmatter.isEmpty(e)||e===undefined){e=false}e=String(e);e=(e+"").toLowerCase();var b=e.search(/(false|f|0|no|n|off|undefined)/i)<0?" checked='checked' ":"";return"<input type=\"checkbox\" style='text-align: center' "+b+' value="'+e+'" offval="false" '+d+"/>"};a.fn.fmatter.textEditor=function(c,b){return a.fn.fmatter.defaultFormat(c,b)};a.fn.fmatter.numberEditor=function(c,b){if(isNaN(parseFloat(c))){c=""}return a.fn.fmatter.defaultFormat(c,b)};a.fn.fmatter.datePicker=function(e,d){if(!a.fmatter.isEmpty(e)){var c=d.colModel.editOptions;var b=new Date(parseFloat(e,10));return b.Format(c.formatStr)}return a.fn.fmatter.defaultFormat(e,d)}})(jQuery);